(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Sd(t,e){const n=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const He={},ti=[],fn=()=>{},s0=()=>!1,i0=/^on[^a-z]/,Cl=t=>i0.test(t),Pd=t=>t.startsWith("onUpdate:"),lt=Object.assign,Cd=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},o0=Object.prototype.hasOwnProperty,De=(t,e)=>o0.call(t,e),ue=Array.isArray,ni=t=>ma(t)==="[object Map]",Ri=t=>ma(t)==="[object Set]",vp=t=>ma(t)==="[object Date]",Ee=t=>typeof t=="function",st=t=>typeof t=="string",Lo=t=>typeof t=="symbol",Be=t=>t!==null&&typeof t=="object",sv=t=>Be(t)&&Ee(t.then)&&Ee(t.catch),iv=Object.prototype.toString,ma=t=>iv.call(t),a0=t=>ma(t).slice(8,-1),ov=t=>ma(t)==="[object Object]",xd=t=>st(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Rc=Sd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},c0=/-(\w)/g,pn=xl(t=>t.replace(c0,(e,n)=>n?n.toUpperCase():"")),l0=/\B([A-Z])/g,Si=xl(t=>t.replace(l0,"-$1").toLowerCase()),Pi=xl(t=>t.charAt(0).toUpperCase()+t.slice(1)),Nu=xl(t=>t?`on${Pi(t)}`:""),Fo=(t,e)=>!Object.is(t,e),Sc=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Hc=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Gc=t=>{const e=parseFloat(t);return isNaN(e)?t:e},u0=t=>{const e=st(t)?Number(t):NaN;return isNaN(e)?t:e};let Ep;const _h=()=>Ep||(Ep=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function kd(t){if(ue(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=st(r)?m0(r):kd(r);if(s)for(const i in s)e[i]=s[i]}return e}else{if(st(t))return t;if(Be(t))return t}}const h0=/;(?![^(]*\))/g,d0=/:([^]+)/,f0=/\/\*[^]*?\*\//g;function m0(t){const e={};return t.replace(f0,"").split(h0).forEach(n=>{if(n){const r=n.split(d0);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Dd(t){let e="";if(st(t))e=t;else if(ue(t))for(let n=0;n<t.length;n++){const r=Dd(t[n]);r&&(e+=r+" ")}else if(Be(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const p0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",g0=Sd(p0);function av(t){return!!t||t===""}function _0(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=fs(t[r],e[r]);return n}function fs(t,e){if(t===e)return!0;let n=vp(t),r=vp(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Lo(t),r=Lo(e),n||r)return t===e;if(n=ue(t),r=ue(e),n||r)return n&&r?_0(t,e):!1;if(n=Be(t),r=Be(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!fs(t[o],e[o]))return!1}}return String(t)===String(e)}function Vd(t,e){return t.findIndex(n=>fs(n,e))}const BF=t=>st(t)?t:t==null?"":ue(t)||Be(t)&&(t.toString===iv||!Ee(t.toString))?JSON.stringify(t,cv,2):String(t),cv=(t,e)=>e&&e.__v_isRef?cv(t,e.value):ni(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:Ri(e)?{[`Set(${e.size})`]:[...e.values()]}:Be(e)&&!ue(e)&&!ov(e)?String(e):e;let Wt;class lv{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Wt,!e&&Wt&&(this.index=(Wt.scopes||(Wt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Wt;try{return Wt=this,e()}finally{Wt=n}}}on(){Wt=this}off(){Wt=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function pa(t){return new lv(t)}function y0(t,e=Wt){e&&e.active&&e.effects.push(t)}function uv(){return Wt}function Xt(t){Wt&&Wt.cleanups.push(t)}const Od=t=>{const e=new Set(t);return e.w=0,e.n=0,e},hv=t=>(t.w&kr)>0,dv=t=>(t.n&kr)>0,v0=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=kr},E0=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const s=e[r];hv(s)&&!dv(s)?s.delete(t):e[n++]=s,s.w&=~kr,s.n&=~kr}e.length=n}},Wc=new WeakMap;let fo=0,kr=1;const yh=30;let hn;const cs=Symbol(""),vh=Symbol("");class Nd{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,y0(this,r)}run(){if(!this.active)return this.fn();let e=hn,n=wr;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=hn,hn=this,wr=!0,kr=1<<++fo,fo<=yh?v0(this):Ip(this),this.fn()}finally{fo<=yh&&E0(this),kr=1<<--fo,hn=this.parent,wr=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){hn===this?this.deferStop=!0:this.active&&(Ip(this),this.onStop&&this.onStop(),this.active=!1)}}function Ip(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let wr=!0;const fv=[];function Ci(){fv.push(wr),wr=!1}function xi(){const t=fv.pop();wr=t===void 0?!0:t}function Ht(t,e,n){if(wr&&hn){let r=Wc.get(t);r||Wc.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=Od()),mv(s)}}function mv(t,e){let n=!1;fo<=yh?dv(t)||(t.n|=kr,n=!hv(t)):n=!t.has(hn),n&&(t.add(hn),hn.deps.push(t))}function Qn(t,e,n,r,s,i){const o=Wc.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ue(t)){const c=Number(r);o.forEach((u,h)=>{(h==="length"||h>=c)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ue(t)?xd(n)&&a.push(o.get("length")):(a.push(o.get(cs)),ni(t)&&a.push(o.get(vh)));break;case"delete":ue(t)||(a.push(o.get(cs)),ni(t)&&a.push(o.get(vh)));break;case"set":ni(t)&&a.push(o.get(cs));break}if(a.length===1)a[0]&&Eh(a[0]);else{const c=[];for(const u of a)u&&c.push(...u);Eh(Od(c))}}function Eh(t,e){const n=ue(t)?t:[...t];for(const r of n)r.computed&&wp(r);for(const r of n)r.computed||wp(r)}function wp(t,e){(t!==hn||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function I0(t,e){var n;return(n=Wc.get(t))==null?void 0:n.get(e)}const w0=Sd("__proto__,__v_isRef,__isVue"),pv=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Lo)),T0=Md(),b0=Md(!1,!0),A0=Md(!0),Tp=R0();function R0(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ae(this);for(let i=0,o=this.length;i<o;i++)Ht(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(Ae)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Ci();const r=Ae(this)[e].apply(this,n);return xi(),r}}),t}function S0(t){const e=Ae(this);return Ht(e,"has",t),e.hasOwnProperty(t)}function Md(t=!1,e=!1){return function(r,s,i){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&i===(t?e?z0:Ev:e?vv:yv).get(r))return r;const o=ue(r);if(!t){if(o&&De(Tp,s))return Reflect.get(Tp,s,i);if(s==="hasOwnProperty")return S0}const a=Reflect.get(r,s,i);return(Lo(s)?pv.has(s):w0(s))||(t||Ht(r,"get",s),e)?a:$e(a)?o&&xd(s)?a:a.value:Be(a)?t?Dl(a):Vn(a):a}}const P0=gv(),C0=gv(!0);function gv(t=!1){return function(n,r,s,i){let o=n[r];if(li(o)&&$e(o)&&!$e(s))return!1;if(!t&&(!Qc(s)&&!li(s)&&(o=Ae(o),s=Ae(s)),!ue(n)&&$e(o)&&!$e(s)))return o.value=s,!0;const a=ue(n)&&xd(r)?Number(r)<n.length:De(n,r),c=Reflect.set(n,r,s,i);return n===Ae(i)&&(a?Fo(s,o)&&Qn(n,"set",r,s):Qn(n,"add",r,s)),c}}function x0(t,e){const n=De(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&Qn(t,"delete",e,void 0),r}function k0(t,e){const n=Reflect.has(t,e);return(!Lo(e)||!pv.has(e))&&Ht(t,"has",e),n}function D0(t){return Ht(t,"iterate",ue(t)?"length":cs),Reflect.ownKeys(t)}const _v={get:T0,set:P0,deleteProperty:x0,has:k0,ownKeys:D0},V0={get:A0,set(t,e){return!0},deleteProperty(t,e){return!0}},O0=lt({},_v,{get:b0,set:C0}),Ld=t=>t,kl=t=>Reflect.getPrototypeOf(t);function sc(t,e,n=!1,r=!1){t=t.__v_raw;const s=Ae(t),i=Ae(e);n||(e!==i&&Ht(s,"get",e),Ht(s,"get",i));const{has:o}=kl(s),a=r?Ld:n?Bd:Uo;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function ic(t,e=!1){const n=this.__v_raw,r=Ae(n),s=Ae(t);return e||(t!==s&&Ht(r,"has",t),Ht(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function oc(t,e=!1){return t=t.__v_raw,!e&&Ht(Ae(t),"iterate",cs),Reflect.get(t,"size",t)}function bp(t){t=Ae(t);const e=Ae(this);return kl(e).has.call(e,t)||(e.add(t),Qn(e,"add",t,t)),this}function Ap(t,e){e=Ae(e);const n=Ae(this),{has:r,get:s}=kl(n);let i=r.call(n,t);i||(t=Ae(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?Fo(e,o)&&Qn(n,"set",t,e):Qn(n,"add",t,e),this}function Rp(t){const e=Ae(this),{has:n,get:r}=kl(e);let s=n.call(e,t);s||(t=Ae(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&Qn(e,"delete",t,void 0),i}function Sp(){const t=Ae(this),e=t.size!==0,n=t.clear();return e&&Qn(t,"clear",void 0,void 0),n}function ac(t,e){return function(r,s){const i=this,o=i.__v_raw,a=Ae(o),c=e?Ld:t?Bd:Uo;return!t&&Ht(a,"iterate",cs),o.forEach((u,h)=>r.call(s,c(u),c(h),i))}}function cc(t,e,n){return function(...r){const s=this.__v_raw,i=Ae(s),o=ni(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=s[t](...r),h=n?Ld:e?Bd:Uo;return!e&&Ht(i,"iterate",c?vh:cs),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:a?[h(d[0]),h(d[1])]:h(d),done:m}},[Symbol.iterator](){return this}}}}function ir(t){return function(...e){return t==="delete"?!1:this}}function N0(){const t={get(i){return sc(this,i)},get size(){return oc(this)},has:ic,add:bp,set:Ap,delete:Rp,clear:Sp,forEach:ac(!1,!1)},e={get(i){return sc(this,i,!1,!0)},get size(){return oc(this)},has:ic,add:bp,set:Ap,delete:Rp,clear:Sp,forEach:ac(!1,!0)},n={get(i){return sc(this,i,!0)},get size(){return oc(this,!0)},has(i){return ic.call(this,i,!0)},add:ir("add"),set:ir("set"),delete:ir("delete"),clear:ir("clear"),forEach:ac(!0,!1)},r={get(i){return sc(this,i,!0,!0)},get size(){return oc(this,!0)},has(i){return ic.call(this,i,!0)},add:ir("add"),set:ir("set"),delete:ir("delete"),clear:ir("clear"),forEach:ac(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=cc(i,!1,!1),n[i]=cc(i,!0,!1),e[i]=cc(i,!1,!0),r[i]=cc(i,!0,!0)}),[t,n,e,r]}const[M0,L0,F0,U0]=N0();function Fd(t,e){const n=e?t?U0:F0:t?L0:M0;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(De(n,s)&&s in r?n:r,s,i)}const B0={get:Fd(!1,!1)},j0={get:Fd(!1,!0)},$0={get:Fd(!0,!1)},yv=new WeakMap,vv=new WeakMap,Ev=new WeakMap,z0=new WeakMap;function q0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function K0(t){return t.__v_skip||!Object.isExtensible(t)?0:q0(a0(t))}function Vn(t){return li(t)?t:Ud(t,!1,_v,B0,yv)}function Iv(t){return Ud(t,!1,O0,j0,vv)}function Dl(t){return Ud(t,!0,V0,$0,Ev)}function Ud(t,e,n,r,s){if(!Be(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=K0(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function Tr(t){return li(t)?Tr(t.__v_raw):!!(t&&t.__v_isReactive)}function li(t){return!!(t&&t.__v_isReadonly)}function Qc(t){return!!(t&&t.__v_isShallow)}function wv(t){return Tr(t)||li(t)}function Ae(t){const e=t&&t.__v_raw;return e?Ae(e):t}function Vl(t){return Hc(t,"__v_skip",!0),t}const Uo=t=>Be(t)?Vn(t):t,Bd=t=>Be(t)?Dl(t):t;function Tv(t){wr&&hn&&(t=Ae(t),mv(t.dep||(t.dep=Od())))}function bv(t,e){t=Ae(t);const n=t.dep;n&&Eh(n)}function $e(t){return!!(t&&t.__v_isRef===!0)}function ze(t){return Av(t,!1)}function ft(t){return Av(t,!0)}function Av(t,e){return $e(t)?t:new H0(t,e)}class H0{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ae(e),this._value=n?e:Uo(e)}get value(){return Tv(this),this._value}set value(e){const n=this.__v_isShallow||Qc(e)||li(e);e=n?e:Ae(e),Fo(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Uo(e),bv(this))}}function Mt(t){return $e(t)?t.value:t}const G0={get:(t,e,n)=>Mt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return $e(s)&&!$e(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Rv(t){return Tr(t)?t:new Proxy(t,G0)}function Ol(t){const e=ue(t)?new Array(t.length):{};for(const n in t)e[n]=Sv(t,n);return e}class W0{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return I0(Ae(this._object),this._key)}}class Q0{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Bo(t,e,n){return $e(t)?t:Ee(t)?new Q0(t):Be(t)&&arguments.length>1?Sv(t,e,n):ze(t)}function Sv(t,e,n){const r=t[e];return $e(r)?r:new W0(t,e,n)}class Y0{constructor(e,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Nd(e,()=>{this._dirty||(this._dirty=!0,bv(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=Ae(this);return Tv(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function J0(t,e,n=!1){let r,s;const i=Ee(t);return i?(r=t,s=fn):(r=t.get,s=t.set),new Y0(r,s,i||!s,n)}function br(t,e,n,r){let s;try{s=r?t(...r):t()}catch(i){Nl(i,e,n)}return s}function sn(t,e,n,r){if(Ee(t)){const i=br(t,e,n,r);return i&&sv(i)&&i.catch(o=>{Nl(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(sn(t[i],e,n,r));return s}function Nl(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const u=i.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){br(c,null,10,[t,o,a]);return}}X0(t,n,s,r)}function X0(t,e,n,r=!0){console.error(t)}let jo=!1,Ih=!1;const kt=[];let bn=0;const ri=[];let Bn=null,es=0;const Pv=Promise.resolve();let jd=null;function yn(t){const e=jd||Pv;return t?e.then(this?t.bind(this):t):e}function Z0(t){let e=bn+1,n=kt.length;for(;e<n;){const r=e+n>>>1;$o(kt[r])<t?e=r+1:n=r}return e}function $d(t){(!kt.length||!kt.includes(t,jo&&t.allowRecurse?bn+1:bn))&&(t.id==null?kt.push(t):kt.splice(Z0(t.id),0,t),Cv())}function Cv(){!jo&&!Ih&&(Ih=!0,jd=Pv.then(kv))}function eA(t){const e=kt.indexOf(t);e>bn&&kt.splice(e,1)}function tA(t){ue(t)?ri.push(...t):(!Bn||!Bn.includes(t,t.allowRecurse?es+1:es))&&ri.push(t),Cv()}function Pp(t,e=jo?bn+1:0){for(;e<kt.length;e++){const n=kt[e];n&&n.pre&&(kt.splice(e,1),e--,n())}}function xv(t){if(ri.length){const e=[...new Set(ri)];if(ri.length=0,Bn){Bn.push(...e);return}for(Bn=e,Bn.sort((n,r)=>$o(n)-$o(r)),es=0;es<Bn.length;es++)Bn[es]();Bn=null,es=0}}const $o=t=>t.id==null?1/0:t.id,nA=(t,e)=>{const n=$o(t)-$o(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function kv(t){Ih=!1,jo=!0,kt.sort(nA);const e=fn;try{for(bn=0;bn<kt.length;bn++){const n=kt[bn];n&&n.active!==!1&&br(n,null,14)}}finally{bn=0,kt.length=0,xv(),jo=!1,jd=null,(kt.length||ri.length)&&kv()}}function rA(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||He;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:m}=r[h]||He;m&&(s=n.map(g=>st(g)?g.trim():g)),d&&(s=n.map(Gc))}let a,c=r[a=Nu(e)]||r[a=Nu(pn(e))];!c&&i&&(c=r[a=Nu(Si(e))]),c&&sn(c,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,sn(u,t,6,s)}}function Dv(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Ee(t)){const c=u=>{const h=Dv(u,e,!0);h&&(a=!0,lt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(Be(t)&&r.set(t,null),null):(ue(i)?i.forEach(c=>o[c]=null):lt(o,i),Be(t)&&r.set(t,o),o)}function Ml(t,e){return!t||!Cl(e)?!1:(e=e.slice(2).replace(/Once$/,""),De(t,e[0].toLowerCase()+e.slice(1))||De(t,Si(e))||De(t,e))}let Et=null,Ll=null;function Yc(t){const e=Et;return Et=t,Ll=t&&t.type.__scopeId||null,e}function sA(t){Ll=t}function iA(){Ll=null}function Pc(t,e=Et,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&jp(-1);const i=Yc(e);let o;try{o=t(...s)}finally{Yc(i),r._d&&jp(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Mu(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:c,emit:u,render:h,renderCache:d,data:m,setupState:g,ctx:E,inheritAttrs:b}=t;let C,N;const V=Yc(t);try{if(n.shapeFlag&4){const L=s||r;C=Tn(h.call(L,L,d,i,g,m,E)),N=c}else{const L=e;C=Tn(L.length>1?L(i,{attrs:c,slots:a,emit:u}):L(i,null)),N=e.props?c:oA(c)}}catch(L){Ro.length=0,Nl(L,t,1),C=$(on)}let x=C;if(N&&b!==!1){const L=Object.keys(N),{shapeFlag:q}=x;L.length&&q&7&&(o&&L.some(Pd)&&(N=aA(N,o)),x=Dr(x,N))}return n.dirs&&(x=Dr(x),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),C=x,Yc(V),C}const oA=t=>{let e;for(const n in t)(n==="class"||n==="style"||Cl(n))&&((e||(e={}))[n]=t[n]);return e},aA=(t,e)=>{const n={};for(const r in t)(!Pd(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function cA(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Cp(r,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const m=h[d];if(o[m]!==r[m]&&!Ml(u,m))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Cp(r,o,u):!0:!!o;return!1}function Cp(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Ml(n,i))return!0}return!1}function lA({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const uA=t=>t.__isSuspense;function hA(t,e){e&&e.pendingBranch?ue(t)?e.effects.push(...t):e.effects.push(t):tA(t)}function Fr(t,e){return zd(t,null,e)}const lc={};function Fe(t,e,n){return zd(t,e,n)}function zd(t,e,{immediate:n,deep:r,flush:s,onTrack:i,onTrigger:o}=He){var a;const c=uv()===((a=mt)==null?void 0:a.scope)?mt:null;let u,h=!1,d=!1;if($e(t)?(u=()=>t.value,h=Qc(t)):Tr(t)?(u=()=>t,r=!0):ue(t)?(d=!0,h=t.some(L=>Tr(L)||Qc(L)),u=()=>t.map(L=>{if($e(L))return L.value;if(Tr(L))return as(L);if(Ee(L))return br(L,c,2)})):Ee(t)?e?u=()=>br(t,c,2):u=()=>{if(!(c&&c.isUnmounted))return m&&m(),sn(t,c,3,[g])}:u=fn,e&&r){const L=u;u=()=>as(L())}let m,g=L=>{m=V.onStop=()=>{br(L,c,4)}},E;if(Go)if(g=fn,e?n&&sn(e,c,3,[u(),d?[]:void 0,g]):u(),s==="sync"){const L=cR();E=L.__watcherHandles||(L.__watcherHandles=[])}else return fn;let b=d?new Array(t.length).fill(lc):lc;const C=()=>{if(V.active)if(e){const L=V.run();(r||h||(d?L.some((q,G)=>Fo(q,b[G])):Fo(L,b)))&&(m&&m(),sn(e,c,3,[L,b===lc?void 0:d&&b[0]===lc?[]:b,g]),b=L)}else V.run()};C.allowRecurse=!!e;let N;s==="sync"?N=C:s==="post"?N=()=>$t(C,c&&c.suspense):(C.pre=!0,c&&(C.id=c.uid),N=()=>$d(C));const V=new Nd(u,N);e?n?C():b=V.run():s==="post"?$t(V.run.bind(V),c&&c.suspense):V.run();const x=()=>{V.stop(),c&&c.scope&&Cd(c.scope.effects,V)};return E&&E.push(x),x}function dA(t,e,n){const r=this.proxy,s=st(t)?t.includes(".")?Vv(r,t):()=>r[t]:t.bind(r,r);let i;Ee(e)?i=e:(i=e.handler,n=e);const o=mt;ui(this);const a=zd(s,i.bind(r),n);return o?ui(o):ls(),a}function Vv(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function as(t,e){if(!Be(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),$e(t))as(t.value,e);else if(ue(t))for(let n=0;n<t.length;n++)as(t[n],e);else if(Ri(t)||ni(t))t.forEach(n=>{as(n,e)});else if(ov(t))for(const n in t)as(t[n],e);return t}function Jc(t,e){const n=Et;if(n===null)return t;const r=ql(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,c,u=He]=e[i];o&&(Ee(o)&&(o={mounted:o,updated:o}),o.deep&&as(a),s.push({dir:o,instance:r,value:a,oldValue:void 0,arg:c,modifiers:u}))}return t}function Hr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Ci(),sn(c,n,8,[t.el,a,t,e]),xi())}}function Ov(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Hd(()=>{t.isMounted=!0}),Bl(()=>{t.isUnmounting=!0}),t}const en=[Function,Array],Nv={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:en,onEnter:en,onAfterEnter:en,onEnterCancelled:en,onBeforeLeave:en,onLeave:en,onAfterLeave:en,onLeaveCancelled:en,onBeforeAppear:en,onAppear:en,onAfterAppear:en,onAppearCancelled:en},fA={name:"BaseTransition",props:Nv,setup(t,{slots:e}){const n=tf(),r=Ov();let s;return()=>{const i=e.default&&qd(e.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const b of i)if(b.type!==on){o=b;break}}const a=Ae(t),{mode:c}=a;if(r.isLeaving)return Lu(o);const u=xp(o);if(!u)return Lu(o);const h=zo(u,a,r,n);qo(u,h);const d=n.subTree,m=d&&xp(d);let g=!1;const{getTransitionKey:E}=u.type;if(E){const b=E();s===void 0?s=b:b!==s&&(s=b,g=!0)}if(m&&m.type!==on&&(!ts(u,m)||g)){const b=zo(m,a,r,n);if(qo(m,b),c==="out-in")return r.isLeaving=!0,b.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},Lu(o);c==="in-out"&&u.type!==on&&(b.delayLeave=(C,N,V)=>{const x=Mv(r,m);x[String(m.key)]=m,C._leaveCb=()=>{N(),C._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=V})}return o}}},mA=fA;function Mv(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function zo(t,e,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:d,onLeave:m,onAfterLeave:g,onLeaveCancelled:E,onBeforeAppear:b,onAppear:C,onAfterAppear:N,onAppearCancelled:V}=e,x=String(t.key),L=Mv(n,t),q=(_,v)=>{_&&sn(_,r,9,v)},G=(_,v)=>{const w=v[1];q(_,v),ue(_)?_.every(S=>S.length<=1)&&w():_.length<=1&&w()},R={mode:i,persisted:o,beforeEnter(_){let v=a;if(!n.isMounted)if(s)v=b||a;else return;_._leaveCb&&_._leaveCb(!0);const w=L[x];w&&ts(t,w)&&w.el._leaveCb&&w.el._leaveCb(),q(v,[_])},enter(_){let v=c,w=u,S=h;if(!n.isMounted)if(s)v=C||c,w=N||u,S=V||h;else return;let T=!1;const I=_._enterCb=de=>{T||(T=!0,de?q(S,[_]):q(w,[_]),R.delayedLeave&&R.delayedLeave(),_._enterCb=void 0)};v?G(v,[_,I]):I()},leave(_,v){const w=String(t.key);if(_._enterCb&&_._enterCb(!0),n.isUnmounting)return v();q(d,[_]);let S=!1;const T=_._leaveCb=I=>{S||(S=!0,v(),I?q(E,[_]):q(g,[_]),_._leaveCb=void 0,L[w]===t&&delete L[w])};L[w]=t,m?G(m,[_,T]):T()},clone(_){return zo(_,e,n,r)}};return R}function Lu(t){if(Fl(t))return t=Dr(t),t.children=null,t}function xp(t){return Fl(t)?t.children?t.children[0]:void 0:t}function qo(t,e){t.shapeFlag&6&&t.component?qo(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function qd(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===vt?(o.patchFlag&128&&s++,r=r.concat(qd(o.children,e,a))):(e||o.type!==on)&&r.push(a!=null?Dr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Kd(t,e){return Ee(t)?(()=>lt({name:t.name},e,{setup:t}))():t}const To=t=>!!t.type.__asyncLoader,Fl=t=>t.type.__isKeepAlive;function pA(t,e){Lv(t,"a",e)}function gA(t,e){Lv(t,"da",e)}function Lv(t,e,n=mt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Ul(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Fl(s.parent.vnode)&&_A(r,e,n,s),s=s.parent}}function _A(t,e,n,r){const s=Ul(e,t,r,!0);Bv(()=>{Cd(r[e],s)},n)}function Ul(t,e,n=mt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Ci(),ui(n);const a=sn(e,n,t,o);return ls(),xi(),a});return r?s.unshift(i):s.push(i),i}}const Zn=t=>(e,n=mt)=>(!Go||t==="sp")&&Ul(t,(...r)=>e(...r),n),Fv=Zn("bm"),Hd=Zn("m"),yA=Zn("bu"),Uv=Zn("u"),Bl=Zn("bum"),Bv=Zn("um"),vA=Zn("sp"),EA=Zn("rtg"),IA=Zn("rtc");function wA(t,e=mt){Ul("ec",t,e)}const Gd="components",TA="directives";function bA(t,e){return Qd(Gd,t,!0,e)||t}const jv=Symbol.for("v-ndc");function AA(t){return st(t)?Qd(Gd,t,!1)||t:t||jv}function Wd(t){return Qd(TA,t)}function Qd(t,e,n=!0,r=!1){const s=Et||mt;if(s){const i=s.type;if(t===Gd){const a=iR(i,!1);if(a&&(a===e||a===pn(e)||a===Pi(pn(e))))return i}const o=kp(s[t]||i[t],e)||kp(s.appContext[t],e);return!o&&r?i:o}}function kp(t,e){return t&&(t[e]||t[pn(e)]||t[Pi(pn(e))])}function jF(t,e,n,r){let s;const i=n&&n[r];if(ue(t)||st(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(Be(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const u=o[a];s[a]=e(t[u],u,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function $F(t,e,n={},r,s){if(Et.isCE||Et.parent&&To(Et.parent)&&Et.parent.isCE)return e!=="default"&&(n.name=e),$("slot",n,r&&r());let i=t[e];i&&i._c&&(i._d=!1),jl();const o=i&&$v(i(n)),a=Zd(vt,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function $v(t){return t.some(e=>Zc(e)?!(e.type===on||e.type===vt&&!$v(e.children)):!0)?t:null}const wh=t=>t?Zv(t)?ql(t)||t.proxy:wh(t.parent):null,bo=lt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>wh(t.parent),$root:t=>wh(t.root),$emit:t=>t.emit,$options:t=>Yd(t),$forceUpdate:t=>t.f||(t.f=()=>$d(t.update)),$nextTick:t=>t.n||(t.n=yn.bind(t.proxy)),$watch:t=>dA.bind(t)}),Fu=(t,e)=>t!==He&&!t.__isScriptSetup&&De(t,e),RA={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Fu(r,e))return o[e]=1,r[e];if(s!==He&&De(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&De(u,e))return o[e]=3,i[e];if(n!==He&&De(n,e))return o[e]=4,n[e];Th&&(o[e]=0)}}const h=bo[e];let d,m;if(h)return e==="$attrs"&&Ht(t,"get",e),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==He&&De(n,e))return o[e]=4,n[e];if(m=c.config.globalProperties,De(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Fu(s,e)?(s[e]=n,!0):r!==He&&De(r,e)?(r[e]=n,!0):De(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==He&&De(t,o)||Fu(e,o)||(a=i[0])&&De(a,o)||De(r,o)||De(bo,o)||De(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:De(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Dp(t){return ue(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Th=!0;function SA(t){const e=Yd(t),n=t.proxy,r=t.ctx;Th=!1,e.beforeCreate&&Vp(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:u,created:h,beforeMount:d,mounted:m,beforeUpdate:g,updated:E,activated:b,deactivated:C,beforeDestroy:N,beforeUnmount:V,destroyed:x,unmounted:L,render:q,renderTracked:G,renderTriggered:R,errorCaptured:_,serverPrefetch:v,expose:w,inheritAttrs:S,components:T,directives:I,filters:de}=e;if(u&&PA(u,r,null),o)for(const Ie in o){const he=o[Ie];Ee(he)&&(r[Ie]=he.bind(n))}if(s){const Ie=s.call(n,n);Be(Ie)&&(t.data=Vn(Ie))}if(Th=!0,i)for(const Ie in i){const he=i[Ie],Te=Ee(he)?he.bind(n,n):Ee(he.get)?he.get.bind(n,n):fn,Ge=!Ee(he)&&Ee(he.set)?he.set.bind(n):fn,ut=Y({get:Te,set:Ge});Object.defineProperty(r,Ie,{enumerable:!0,configurable:!0,get:()=>ut.value,set:Xe=>ut.value=Xe})}if(a)for(const Ie in a)zv(a[Ie],r,n,Ie);if(c){const Ie=Ee(c)?c.call(n):c;Reflect.ownKeys(Ie).forEach(he=>{Ar(he,Ie[he])})}h&&Vp(h,t,"c");function pe(Ie,he){ue(he)?he.forEach(Te=>Ie(Te.bind(n))):he&&Ie(he.bind(n))}if(pe(Fv,d),pe(Hd,m),pe(yA,g),pe(Uv,E),pe(pA,b),pe(gA,C),pe(wA,_),pe(IA,G),pe(EA,R),pe(Bl,V),pe(Bv,L),pe(vA,v),ue(w))if(w.length){const Ie=t.exposed||(t.exposed={});w.forEach(he=>{Object.defineProperty(Ie,he,{get:()=>n[he],set:Te=>n[he]=Te})})}else t.exposed||(t.exposed={});q&&t.render===fn&&(t.render=q),S!=null&&(t.inheritAttrs=S),T&&(t.components=T),I&&(t.directives=I)}function PA(t,e,n=fn){ue(t)&&(t=bh(t));for(const r in t){const s=t[r];let i;Be(s)?"default"in s?i=ct(s.from||r,s.default,!0):i=ct(s.from||r):i=ct(s),$e(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Vp(t,e,n){sn(ue(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function zv(t,e,n,r){const s=r.includes(".")?Vv(n,r):()=>n[r];if(st(t)){const i=e[t];Ee(i)&&Fe(s,i)}else if(Ee(t))Fe(s,t.bind(n));else if(Be(t))if(ue(t))t.forEach(i=>zv(i,e,n,r));else{const i=Ee(t.handler)?t.handler.bind(n):e[t.handler];Ee(i)&&Fe(s,i,t)}}function Yd(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(u=>Xc(c,u,o,!0)),Xc(c,e,o)),Be(e)&&i.set(e,c),c}function Xc(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Xc(t,i,n,!0),s&&s.forEach(o=>Xc(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=CA[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const CA={data:Op,props:Np,emits:Np,methods:mo,computed:mo,beforeCreate:Ot,created:Ot,beforeMount:Ot,mounted:Ot,beforeUpdate:Ot,updated:Ot,beforeDestroy:Ot,beforeUnmount:Ot,destroyed:Ot,unmounted:Ot,activated:Ot,deactivated:Ot,errorCaptured:Ot,serverPrefetch:Ot,components:mo,directives:mo,watch:kA,provide:Op,inject:xA};function Op(t,e){return e?t?function(){return lt(Ee(t)?t.call(this,this):t,Ee(e)?e.call(this,this):e)}:e:t}function xA(t,e){return mo(bh(t),bh(e))}function bh(t){if(ue(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ot(t,e){return t?[...new Set([].concat(t,e))]:e}function mo(t,e){return t?lt(Object.create(null),t,e):e}function Np(t,e){return t?ue(t)&&ue(e)?[...new Set([...t,...e])]:lt(Object.create(null),Dp(t),Dp(e??{})):e}function kA(t,e){if(!t)return e;if(!e)return t;const n=lt(Object.create(null),t);for(const r in e)n[r]=Ot(t[r],e[r]);return n}function qv(){return{app:null,config:{isNativeTag:s0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let DA=0;function VA(t,e){return function(r,s=null){Ee(r)||(r=lt({},r)),s!=null&&!Be(s)&&(s=null);const i=qv(),o=new Set;let a=!1;const c=i.app={_uid:DA++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:lR,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&Ee(u.install)?(o.add(u),u.install(c,...h)):Ee(u)&&(o.add(u),u(c,...h))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,h){return h?(i.components[u]=h,c):i.components[u]},directive(u,h){return h?(i.directives[u]=h,c):i.directives[u]},mount(u,h,d){if(!a){const m=$(r,s);return m.appContext=i,h&&e?e(m,u):t(m,u,d),a=!0,c._container=u,u.__vue_app__=c,ql(m.component)||m.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(u,h){return i.provides[u]=h,c},runWithContext(u){Ko=c;try{return u()}finally{Ko=null}}};return c}}let Ko=null;function Ar(t,e){if(mt){let n=mt.provides;const r=mt.parent&&mt.parent.provides;r===n&&(n=mt.provides=Object.create(r)),n[t]=e}}function ct(t,e,n=!1){const r=mt||Et;if(r||Ko){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Ko._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ee(e)?e.call(r&&r.proxy):e}}function OA(){return!!(mt||Et||Ko)}function NA(t,e,n,r=!1){const s={},i={};Hc(i,$l,1),t.propsDefaults=Object.create(null),Kv(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Iv(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function MA(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Ae(s),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let m=h[d];if(Ml(t.emitsOptions,m))continue;const g=e[m];if(c)if(De(i,m))g!==i[m]&&(i[m]=g,u=!0);else{const E=pn(m);s[E]=Ah(c,a,E,g,t,!1)}else g!==i[m]&&(i[m]=g,u=!0)}}}else{Kv(t,e,s,i)&&(u=!0);let h;for(const d in a)(!e||!De(e,d)&&((h=Si(d))===d||!De(e,h)))&&(c?n&&(n[d]!==void 0||n[h]!==void 0)&&(s[d]=Ah(c,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!De(e,d))&&(delete i[d],u=!0)}u&&Qn(t,"set","$attrs")}function Kv(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Rc(c))continue;const u=e[c];let h;s&&De(s,h=pn(c))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:Ml(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=Ae(n),u=a||He;for(let h=0;h<i.length;h++){const d=i[h];n[d]=Ah(s,c,d,u[d],t,!De(u,d))}}return o}function Ah(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=De(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ee(c)){const{propsDefaults:u}=s;n in u?r=u[n]:(ui(s),r=u[n]=c.call(null,e),ls())}else r=c}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Si(n))&&(r=!0))}return r}function Hv(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!Ee(t)){const h=d=>{c=!0;const[m,g]=Hv(d,e,!0);lt(o,m),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return Be(t)&&r.set(t,ti),ti;if(ue(i))for(let h=0;h<i.length;h++){const d=pn(i[h]);Mp(d)&&(o[d]=He)}else if(i)for(const h in i){const d=pn(h);if(Mp(d)){const m=i[h],g=o[d]=ue(m)||Ee(m)?{type:m}:lt({},m);if(g){const E=Up(Boolean,g.type),b=Up(String,g.type);g[0]=E>-1,g[1]=b<0||E<b,(E>-1||De(g,"default"))&&a.push(d)}}}const u=[o,a];return Be(t)&&r.set(t,u),u}function Mp(t){return t[0]!=="$"}function Lp(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Fp(t,e){return Lp(t)===Lp(e)}function Up(t,e){return ue(e)?e.findIndex(n=>Fp(n,t)):Ee(e)&&Fp(e,t)?0:-1}const Gv=t=>t[0]==="_"||t==="$stable",Jd=t=>ue(t)?t.map(Tn):[Tn(t)],LA=(t,e,n)=>{if(e._n)return e;const r=Pc((...s)=>Jd(e(...s)),n);return r._c=!1,r},Wv=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Gv(s))continue;const i=t[s];if(Ee(i))e[s]=LA(s,i,r);else if(i!=null){const o=Jd(i);e[s]=()=>o}}},Qv=(t,e)=>{const n=Jd(e);t.slots.default=()=>n},FA=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ae(e),Hc(e,"_",n)):Wv(e,t.slots={})}else t.slots={},e&&Qv(t,e);Hc(t.slots,$l,1)},UA=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=He;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(lt(s,e),!n&&a===1&&delete s._):(i=!e.$stable,Wv(e,s)),o=e}else e&&(Qv(t,e),o={default:1});if(i)for(const a in s)!Gv(a)&&!(a in o)&&delete s[a]};function Rh(t,e,n,r,s=!1){if(ue(t)){t.forEach((m,g)=>Rh(m,e&&(ue(e)?e[g]:e),n,r,s));return}if(To(r)&&!s)return;const i=r.shapeFlag&4?ql(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:c}=t,u=e&&e.r,h=a.refs===He?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==c&&(st(u)?(h[u]=null,De(d,u)&&(d[u]=null)):$e(u)&&(u.value=null)),Ee(c))br(c,a,12,[o,h]);else{const m=st(c),g=$e(c);if(m||g){const E=()=>{if(t.f){const b=m?De(d,c)?d[c]:h[c]:c.value;s?ue(b)&&Cd(b,i):ue(b)?b.includes(i)||b.push(i):m?(h[c]=[i],De(d,c)&&(d[c]=h[c])):(c.value=[i],t.k&&(h[t.k]=c.value))}else m?(h[c]=o,De(d,c)&&(d[c]=o)):g&&(c.value=o,t.k&&(h[t.k]=o))};o?(E.id=-1,$t(E,n)):E()}}}const $t=hA;function BA(t){return jA(t)}function jA(t,e){const n=_h();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:h,parentNode:d,nextSibling:m,setScopeId:g=fn,insertStaticContent:E}=t,b=(A,P,D,U=null,j=null,z=null,te=!1,W=null,X=!!P.dynamicChildren)=>{if(A===P)return;A&&!ts(A,P)&&(U=B(A),Xe(A,j,z,!0),A=null),P.patchFlag===-2&&(X=!1,P.dynamicChildren=null);const{type:K,ref:le,shapeFlag:se}=P;switch(K){case ga:C(A,P,D,U);break;case on:N(A,P,D,U);break;case Uu:A==null&&V(P,D,U,te);break;case vt:T(A,P,D,U,j,z,te,W,X);break;default:se&1?q(A,P,D,U,j,z,te,W,X):se&6?I(A,P,D,U,j,z,te,W,X):(se&64||se&128)&&K.process(A,P,D,U,j,z,te,W,X,Z)}le!=null&&j&&Rh(le,A&&A.ref,z,P||A,!P)},C=(A,P,D,U)=>{if(A==null)r(P.el=a(P.children),D,U);else{const j=P.el=A.el;P.children!==A.children&&u(j,P.children)}},N=(A,P,D,U)=>{A==null?r(P.el=c(P.children||""),D,U):P.el=A.el},V=(A,P,D,U)=>{[A.el,A.anchor]=E(A.children,P,D,U,A.el,A.anchor)},x=({el:A,anchor:P},D,U)=>{let j;for(;A&&A!==P;)j=m(A),r(A,D,U),A=j;r(P,D,U)},L=({el:A,anchor:P})=>{let D;for(;A&&A!==P;)D=m(A),s(A),A=D;s(P)},q=(A,P,D,U,j,z,te,W,X)=>{te=te||P.type==="svg",A==null?G(P,D,U,j,z,te,W,X):v(A,P,j,z,te,W,X)},G=(A,P,D,U,j,z,te,W)=>{let X,K;const{type:le,props:se,shapeFlag:ae,transition:fe,dirs:we}=A;if(X=A.el=o(A.type,z,se&&se.is,se),ae&8?h(X,A.children):ae&16&&_(A.children,X,null,U,j,z&&le!=="foreignObject",te,W),we&&Hr(A,null,U,"created"),R(X,A,A.scopeId,te,U),se){for(const _e in se)_e!=="value"&&!Rc(_e)&&i(X,_e,null,se[_e],z,A.children,U,j,_t);"value"in se&&i(X,"value",null,se.value),(K=se.onVnodeBeforeMount)&&wn(K,U,A)}we&&Hr(A,null,U,"beforeMount");const ye=(!j||j&&!j.pendingBranch)&&fe&&!fe.persisted;ye&&fe.beforeEnter(X),r(X,P,D),((K=se&&se.onVnodeMounted)||ye||we)&&$t(()=>{K&&wn(K,U,A),ye&&fe.enter(X),we&&Hr(A,null,U,"mounted")},j)},R=(A,P,D,U,j)=>{if(D&&g(A,D),U)for(let z=0;z<U.length;z++)g(A,U[z]);if(j){let z=j.subTree;if(P===z){const te=j.vnode;R(A,te,te.scopeId,te.slotScopeIds,j.parent)}}},_=(A,P,D,U,j,z,te,W,X=0)=>{for(let K=X;K<A.length;K++){const le=A[K]=W?fr(A[K]):Tn(A[K]);b(null,le,P,D,U,j,z,te,W)}},v=(A,P,D,U,j,z,te)=>{const W=P.el=A.el;let{patchFlag:X,dynamicChildren:K,dirs:le}=P;X|=A.patchFlag&16;const se=A.props||He,ae=P.props||He;let fe;D&&Gr(D,!1),(fe=ae.onVnodeBeforeUpdate)&&wn(fe,D,P,A),le&&Hr(P,A,D,"beforeUpdate"),D&&Gr(D,!0);const we=j&&P.type!=="foreignObject";if(K?w(A.dynamicChildren,K,W,D,U,we,z):te||he(A,P,W,null,D,U,we,z,!1),X>0){if(X&16)S(W,P,se,ae,D,U,j);else if(X&2&&se.class!==ae.class&&i(W,"class",null,ae.class,j),X&4&&i(W,"style",se.style,ae.style,j),X&8){const ye=P.dynamicProps;for(let _e=0;_e<ye.length;_e++){const qe=ye[_e],Bt=se[qe],Nn=ae[qe];(Nn!==Bt||qe==="value")&&i(W,qe,Bt,Nn,j,A.children,D,U,_t)}}X&1&&A.children!==P.children&&h(W,P.children)}else!te&&K==null&&S(W,P,se,ae,D,U,j);((fe=ae.onVnodeUpdated)||le)&&$t(()=>{fe&&wn(fe,D,P,A),le&&Hr(P,A,D,"updated")},U)},w=(A,P,D,U,j,z,te)=>{for(let W=0;W<P.length;W++){const X=A[W],K=P[W],le=X.el&&(X.type===vt||!ts(X,K)||X.shapeFlag&70)?d(X.el):D;b(X,K,le,null,U,j,z,te,!0)}},S=(A,P,D,U,j,z,te)=>{if(D!==U){if(D!==He)for(const W in D)!Rc(W)&&!(W in U)&&i(A,W,D[W],null,te,P.children,j,z,_t);for(const W in U){if(Rc(W))continue;const X=U[W],K=D[W];X!==K&&W!=="value"&&i(A,W,K,X,te,P.children,j,z,_t)}"value"in U&&i(A,"value",D.value,U.value)}},T=(A,P,D,U,j,z,te,W,X)=>{const K=P.el=A?A.el:a(""),le=P.anchor=A?A.anchor:a("");let{patchFlag:se,dynamicChildren:ae,slotScopeIds:fe}=P;fe&&(W=W?W.concat(fe):fe),A==null?(r(K,D,U),r(le,D,U),_(P.children,D,le,j,z,te,W,X)):se>0&&se&64&&ae&&A.dynamicChildren?(w(A.dynamicChildren,ae,D,j,z,te,W),(P.key!=null||j&&P===j.subTree)&&Xd(A,P,!0)):he(A,P,D,le,j,z,te,W,X)},I=(A,P,D,U,j,z,te,W,X)=>{P.slotScopeIds=W,A==null?P.shapeFlag&512?j.ctx.activate(P,D,U,te,X):de(P,D,U,j,z,te,X):ke(A,P,X)},de=(A,P,D,U,j,z,te)=>{const W=A.component=eR(A,U,j);if(Fl(A)&&(W.ctx.renderer=Z),tR(W),W.asyncDep){if(j&&j.registerDep(W,pe),!A.el){const X=W.subTree=$(on);N(null,X,P,D)}return}pe(W,A,P,D,j,z,te)},ke=(A,P,D)=>{const U=P.component=A.component;if(cA(A,P,D))if(U.asyncDep&&!U.asyncResolved){Ie(U,P,D);return}else U.next=P,eA(U.update),U.update();else P.el=A.el,U.vnode=P},pe=(A,P,D,U,j,z,te)=>{const W=()=>{if(A.isMounted){let{next:le,bu:se,u:ae,parent:fe,vnode:we}=A,ye=le,_e;Gr(A,!1),le?(le.el=we.el,Ie(A,le,te)):le=we,se&&Sc(se),(_e=le.props&&le.props.onVnodeBeforeUpdate)&&wn(_e,fe,le,we),Gr(A,!0);const qe=Mu(A),Bt=A.subTree;A.subTree=qe,b(Bt,qe,d(Bt.el),B(Bt),A,j,z),le.el=qe.el,ye===null&&lA(A,qe.el),ae&&$t(ae,j),(_e=le.props&&le.props.onVnodeUpdated)&&$t(()=>wn(_e,fe,le,we),j)}else{let le;const{el:se,props:ae}=P,{bm:fe,m:we,parent:ye}=A,_e=To(P);if(Gr(A,!1),fe&&Sc(fe),!_e&&(le=ae&&ae.onVnodeBeforeMount)&&wn(le,ye,P),Gr(A,!0),se&&Pe){const qe=()=>{A.subTree=Mu(A),Pe(se,A.subTree,A,j,null)};_e?P.type.__asyncLoader().then(()=>!A.isUnmounted&&qe()):qe()}else{const qe=A.subTree=Mu(A);b(null,qe,D,U,A,j,z),P.el=qe.el}if(we&&$t(we,j),!_e&&(le=ae&&ae.onVnodeMounted)){const qe=P;$t(()=>wn(le,ye,qe),j)}(P.shapeFlag&256||ye&&To(ye.vnode)&&ye.vnode.shapeFlag&256)&&A.a&&$t(A.a,j),A.isMounted=!0,P=D=U=null}},X=A.effect=new Nd(W,()=>$d(K),A.scope),K=A.update=()=>X.run();K.id=A.uid,Gr(A,!0),K()},Ie=(A,P,D)=>{P.component=A;const U=A.vnode.props;A.vnode=P,A.next=null,MA(A,P.props,U,D),UA(A,P.children,D),Ci(),Pp(),xi()},he=(A,P,D,U,j,z,te,W,X=!1)=>{const K=A&&A.children,le=A?A.shapeFlag:0,se=P.children,{patchFlag:ae,shapeFlag:fe}=P;if(ae>0){if(ae&128){Ge(K,se,D,U,j,z,te,W,X);return}else if(ae&256){Te(K,se,D,U,j,z,te,W,X);return}}fe&8?(le&16&&_t(K,j,z),se!==K&&h(D,se)):le&16?fe&16?Ge(K,se,D,U,j,z,te,W,X):_t(K,j,z,!0):(le&8&&h(D,""),fe&16&&_(se,D,U,j,z,te,W,X))},Te=(A,P,D,U,j,z,te,W,X)=>{A=A||ti,P=P||ti;const K=A.length,le=P.length,se=Math.min(K,le);let ae;for(ae=0;ae<se;ae++){const fe=P[ae]=X?fr(P[ae]):Tn(P[ae]);b(A[ae],fe,D,null,j,z,te,W,X)}K>le?_t(A,j,z,!0,!1,se):_(P,D,U,j,z,te,W,X,se)},Ge=(A,P,D,U,j,z,te,W,X)=>{let K=0;const le=P.length;let se=A.length-1,ae=le-1;for(;K<=se&&K<=ae;){const fe=A[K],we=P[K]=X?fr(P[K]):Tn(P[K]);if(ts(fe,we))b(fe,we,D,null,j,z,te,W,X);else break;K++}for(;K<=se&&K<=ae;){const fe=A[se],we=P[ae]=X?fr(P[ae]):Tn(P[ae]);if(ts(fe,we))b(fe,we,D,null,j,z,te,W,X);else break;se--,ae--}if(K>se){if(K<=ae){const fe=ae+1,we=fe<le?P[fe].el:U;for(;K<=ae;)b(null,P[K]=X?fr(P[K]):Tn(P[K]),D,we,j,z,te,W,X),K++}}else if(K>ae)for(;K<=se;)Xe(A[K],j,z,!0),K++;else{const fe=K,we=K,ye=new Map;for(K=we;K<=ae;K++){const St=P[K]=X?fr(P[K]):Tn(P[K]);St.key!=null&&ye.set(St.key,K)}let _e,qe=0;const Bt=ae-we+1;let Nn=!1,ja=0;const ln=new Array(Bt);for(K=0;K<Bt;K++)ln[K]=0;for(K=fe;K<=se;K++){const St=A[K];if(qe>=Bt){Xe(St,j,z,!0);continue}let jt;if(St.key!=null)jt=ye.get(St.key);else for(_e=we;_e<=ae;_e++)if(ln[_e-we]===0&&ts(St,P[_e])){jt=_e;break}jt===void 0?Xe(St,j,z,!0):(ln[jt-we]=K+1,jt>=ja?ja=jt:Nn=!0,b(St,P[jt],D,null,j,z,te,W,X),qe++)}const Ui=Nn?$A(ln):ti;for(_e=Ui.length-1,K=Bt-1;K>=0;K--){const St=we+K,jt=P[St],$a=St+1<le?P[St+1].el:U;ln[K]===0?b(null,jt,D,$a,j,z,te,W,X):Nn&&(_e<0||K!==Ui[_e]?ut(jt,D,$a,2):_e--)}}},ut=(A,P,D,U,j=null)=>{const{el:z,type:te,transition:W,children:X,shapeFlag:K}=A;if(K&6){ut(A.component.subTree,P,D,U);return}if(K&128){A.suspense.move(P,D,U);return}if(K&64){te.move(A,P,D,Z);return}if(te===vt){r(z,P,D);for(let se=0;se<X.length;se++)ut(X[se],P,D,U);r(A.anchor,P,D);return}if(te===Uu){x(A,P,D);return}if(U!==2&&K&1&&W)if(U===0)W.beforeEnter(z),r(z,P,D),$t(()=>W.enter(z),j);else{const{leave:se,delayLeave:ae,afterLeave:fe}=W,we=()=>r(z,P,D),ye=()=>{se(z,()=>{we(),fe&&fe()})};ae?ae(z,we,ye):ye()}else r(z,P,D)},Xe=(A,P,D,U=!1,j=!1)=>{const{type:z,props:te,ref:W,children:X,dynamicChildren:K,shapeFlag:le,patchFlag:se,dirs:ae}=A;if(W!=null&&Rh(W,null,D,A,!0),le&256){P.ctx.deactivate(A);return}const fe=le&1&&ae,we=!To(A);let ye;if(we&&(ye=te&&te.onVnodeBeforeUnmount)&&wn(ye,P,A),le&6)In(A.component,D,U);else{if(le&128){A.suspense.unmount(D,U);return}fe&&Hr(A,null,P,"beforeUnmount"),le&64?A.type.remove(A,P,D,j,Z,U):K&&(z!==vt||se>0&&se&64)?_t(K,P,D,!1,!0):(z===vt&&se&384||!j&&le&16)&&_t(X,P,D),U&&Ze(A)}(we&&(ye=te&&te.onVnodeUnmounted)||fe)&&$t(()=>{ye&&wn(ye,P,A),fe&&Hr(A,null,P,"unmounted")},D)},Ze=A=>{const{type:P,el:D,anchor:U,transition:j}=A;if(P===vt){tr(D,U);return}if(P===Uu){L(A);return}const z=()=>{s(D),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(A.shapeFlag&1&&j&&!j.persisted){const{leave:te,delayLeave:W}=j,X=()=>te(D,z);W?W(A.el,z,X):X()}else z()},tr=(A,P)=>{let D;for(;A!==P;)D=m(A),s(A),A=D;s(P)},In=(A,P,D)=>{const{bum:U,scope:j,update:z,subTree:te,um:W}=A;U&&Sc(U),j.stop(),z&&(z.active=!1,Xe(te,A,P,D)),W&&$t(W,P),$t(()=>{A.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},_t=(A,P,D,U=!1,j=!1,z=0)=>{for(let te=z;te<A.length;te++)Xe(A[te],P,D,U,j)},B=A=>A.shapeFlag&6?B(A.component.subTree):A.shapeFlag&128?A.suspense.next():m(A.anchor||A.el),ne=(A,P,D)=>{A==null?P._vnode&&Xe(P._vnode,null,null,!0):b(P._vnode||null,A,P,null,null,null,D),Pp(),xv(),P._vnode=A},Z={p:b,um:Xe,m:ut,r:Ze,mt:de,mc:_,pc:he,pbc:w,n:B,o:t};let oe,Pe;return e&&([oe,Pe]=e(Z)),{render:ne,hydrate:oe,createApp:VA(ne,oe)}}function Gr({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Xd(t,e,n=!1){const r=t.children,s=e.children;if(ue(r)&&ue(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=fr(s[i]),a.el=o.el),n||Xd(o,a)),a.type===ga&&(a.el=o.el)}}function $A(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const zA=t=>t.__isTeleport,Ao=t=>t&&(t.disabled||t.disabled===""),Bp=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Sh=(t,e)=>{const n=t&&t.to;return st(n)?e?e(n):null:n},qA={__isTeleport:!0,process(t,e,n,r,s,i,o,a,c,u){const{mc:h,pc:d,pbc:m,o:{insert:g,querySelector:E,createText:b,createComment:C}}=u,N=Ao(e.props);let{shapeFlag:V,children:x,dynamicChildren:L}=e;if(t==null){const q=e.el=b(""),G=e.anchor=b("");g(q,n,r),g(G,n,r);const R=e.target=Sh(e.props,E),_=e.targetAnchor=b("");R&&(g(_,R),o=o||Bp(R));const v=(w,S)=>{V&16&&h(x,w,S,s,i,o,a,c)};N?v(n,G):R&&v(R,_)}else{e.el=t.el;const q=e.anchor=t.anchor,G=e.target=t.target,R=e.targetAnchor=t.targetAnchor,_=Ao(t.props),v=_?n:G,w=_?q:R;if(o=o||Bp(G),L?(m(t.dynamicChildren,L,v,s,i,o,a),Xd(t,e,!0)):c||d(t,e,v,w,s,i,o,a,!1),N)_||uc(e,n,q,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const S=e.target=Sh(e.props,E);S&&uc(e,S,null,u,0)}else _&&uc(e,G,R,u,1)}Yv(e)},remove(t,e,n,r,{um:s,o:{remove:i}},o){const{shapeFlag:a,children:c,anchor:u,targetAnchor:h,target:d,props:m}=t;if(d&&i(h),(o||!Ao(m))&&(i(u),a&16))for(let g=0;g<c.length;g++){const E=c[g];s(E,e,n,!0,!!E.dynamicChildren)}},move:uc,hydrate:KA};function uc(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:c,children:u,props:h}=t,d=i===2;if(d&&r(o,e,n),(!d||Ao(h))&&c&16)for(let m=0;m<u.length;m++)s(u[m],e,n,2);d&&r(a,e,n)}function KA(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:c}},u){const h=e.target=Sh(e.props,c);if(h){const d=h._lpa||h.firstChild;if(e.shapeFlag&16)if(Ao(e.props))e.anchor=u(o(t),e,a(t),n,r,s,i),e.targetAnchor=d;else{e.anchor=o(t);let m=d;for(;m;)if(m=o(m),m&&m.nodeType===8&&m.data==="teleport anchor"){e.targetAnchor=m,h._lpa=e.targetAnchor&&o(e.targetAnchor);break}u(d,e,h,n,r,s,i)}Yv(e)}return e.anchor&&o(e.anchor)}const HA=qA;function Yv(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const vt=Symbol.for("v-fgt"),ga=Symbol.for("v-txt"),on=Symbol.for("v-cmt"),Uu=Symbol.for("v-stc"),Ro=[];let dn=null;function jl(t=!1){Ro.push(dn=t?null:[])}function GA(){Ro.pop(),dn=Ro[Ro.length-1]||null}let Ho=1;function jp(t){Ho+=t}function Jv(t){return t.dynamicChildren=Ho>0?dn||ti:null,GA(),Ho>0&&dn&&dn.push(t),t}function WA(t,e,n,r,s,i){return Jv(zl(t,e,n,r,s,i,!0))}function Zd(t,e,n,r,s){return Jv($(t,e,n,r,s,!0))}function Zc(t){return t?t.__v_isVNode===!0:!1}function ts(t,e){return t.type===e.type&&t.key===e.key}const $l="__vInternal",Xv=({key:t})=>t??null,Cc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?st(t)||$e(t)||Ee(t)?{i:Et,r:t,k:e,f:!!n}:t:null);function zl(t,e=null,n=null,r=0,s=null,i=t===vt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Xv(e),ref:e&&Cc(e),scopeId:Ll,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Et};return a?(ef(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=st(n)?8:16),Ho>0&&!o&&dn&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&dn.push(c),c}const $=QA;function QA(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===jv)&&(t=on),Zc(t)){const a=Dr(t,e,!0);return n&&ef(a,n),Ho>0&&!i&&dn&&(a.shapeFlag&6?dn[dn.indexOf(t)]=a:dn.push(a)),a.patchFlag|=-2,a}if(oR(t)&&(t=t.__vccOpts),e){e=YA(e);let{class:a,style:c}=e;a&&!st(a)&&(e.class=Dd(a)),Be(c)&&(wv(c)&&!ue(c)&&(c=lt({},c)),e.style=kd(c))}const o=st(t)?1:uA(t)?128:zA(t)?64:Be(t)?4:Ee(t)?2:0;return zl(t,e,n,r,s,o,i,!0)}function YA(t){return t?wv(t)||$l in t?lt({},t):t:null}function Dr(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?qt(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Xv(a),ref:e&&e.ref?n&&s?ue(s)?s.concat(Cc(e)):[s,Cc(e)]:Cc(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==vt?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Dr(t.ssContent),ssFallback:t.ssFallback&&Dr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function JA(t=" ",e=0){return $(ga,null,t,e)}function zF(t="",e=!1){return e?(jl(),Zd(on,null,t)):$(on,null,t)}function Tn(t){return t==null||typeof t=="boolean"?$(on):ue(t)?$(vt,null,t.slice()):typeof t=="object"?fr(t):$(ga,null,String(t))}function fr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Dr(t)}function ef(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ue(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),ef(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!($l in e)?e._ctx=Et:s===3&&Et&&(Et.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ee(e)?(e={default:e,_ctx:Et},n=32):(e=String(e),r&64?(n=16,e=[JA(e)]):n=8);t.children=e,t.shapeFlag|=n}function qt(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Dd([e.class,r.class]));else if(s==="style")e.style=kd([e.style,r.style]);else if(Cl(s)){const i=e[s],o=r[s];o&&i!==o&&!(ue(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function wn(t,e,n,r=null){sn(t,e,7,[n,r])}const XA=qv();let ZA=0;function eR(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||XA,i={uid:ZA++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new lv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Hv(r,s),emitsOptions:Dv(r,s),emit:null,emitted:null,propsDefaults:He,inheritAttrs:r.inheritAttrs,ctx:He,data:He,props:He,attrs:He,slots:He,refs:He,setupState:He,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=rA.bind(null,i),t.ce&&t.ce(i),i}let mt=null;const tf=()=>mt||Et;let nf,Fs,$p="__VUE_INSTANCE_SETTERS__";(Fs=_h()[$p])||(Fs=_h()[$p]=[]),Fs.push(t=>mt=t),nf=t=>{Fs.length>1?Fs.forEach(e=>e(t)):Fs[0](t)};const ui=t=>{nf(t),t.scope.on()},ls=()=>{mt&&mt.scope.off(),nf(null)};function Zv(t){return t.vnode.shapeFlag&4}let Go=!1;function tR(t,e=!1){Go=e;const{props:n,children:r}=t.vnode,s=Zv(t);NA(t,n,s,e),FA(t,r);const i=s?nR(t,e):void 0;return Go=!1,i}function nR(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Vl(new Proxy(t.ctx,RA));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?sR(t):null;ui(t),Ci();const i=br(r,t,0,[t.props,s]);if(xi(),ls(),sv(i)){if(i.then(ls,ls),e)return i.then(o=>{zp(t,o,e)}).catch(o=>{Nl(o,t,0)});t.asyncDep=i}else zp(t,i,e)}else eE(t,e)}function zp(t,e,n){Ee(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Be(e)&&(t.setupState=Rv(e)),eE(t,n)}let qp;function eE(t,e,n){const r=t.type;if(!t.render){if(!e&&qp&&!r.render){const s=r.template||Yd(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=r,u=lt(lt({isCustomElement:i,delimiters:a},o),c);r.render=qp(s,u)}}t.render=r.render||fn}ui(t),Ci(),SA(t),xi(),ls()}function rR(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Ht(t,"get","$attrs"),e[n]}}))}function sR(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return rR(t)},slots:t.slots,emit:t.emit,expose:e}}function ql(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Rv(Vl(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in bo)return bo[n](t)},has(e,n){return n in e||n in bo}}))}function iR(t,e=!0){return Ee(t)?t.displayName||t.name:t.name||e&&t.__name}function oR(t){return Ee(t)&&"__vccOpts"in t}const Y=(t,e)=>J0(t,e,Go);function ki(t,e,n){const r=arguments.length;return r===2?Be(e)&&!ue(e)?Zc(e)?$(t,null,[e]):$(t,e):$(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Zc(n)&&(n=[n]),$(t,e,n))}const aR=Symbol.for("v-scx"),cR=()=>ct(aR),lR="3.3.4",uR="http://www.w3.org/2000/svg",ns=typeof document<"u"?document:null,Kp=ns&&ns.createElement("template"),hR={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e?ns.createElementNS(uR,t):ns.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>ns.createTextNode(t),createComment:t=>ns.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ns.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Kp.innerHTML=r?`<svg>${t}</svg>`:t;const a=Kp.content;if(r){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function dR(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function fR(t,e,n){const r=t.style,s=st(n);if(n&&!s){if(e&&!st(e))for(const i in e)n[i]==null&&Ph(r,i,"");for(const i in n)Ph(r,i,n[i])}else{const i=r.display;s?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=i)}}const Hp=/\s*!important$/;function Ph(t,e,n){if(ue(n))n.forEach(r=>Ph(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=mR(t,e);Hp.test(n)?t.setProperty(Si(r),n.replace(Hp,""),"important"):t[r]=n}}const Gp=["Webkit","Moz","ms"],Bu={};function mR(t,e){const n=Bu[e];if(n)return n;let r=pn(e);if(r!=="filter"&&r in t)return Bu[e]=r;r=Pi(r);for(let s=0;s<Gp.length;s++){const i=Gp[s]+r;if(i in t)return Bu[e]=i}return e}const Wp="http://www.w3.org/1999/xlink";function pR(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Wp,e.slice(6,e.length)):t.setAttributeNS(Wp,e,n);else{const i=g0(e);n==null||i&&!av(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function gR(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const u=a==="OPTION"?t.getAttribute("value"):t.value,h=n??"";u!==h&&(t.value=h),n==null&&t.removeAttribute(e);return}let c=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=av(n):n==null&&u==="string"?(n="",c=!0):u==="number"&&(n=0,c=!0)}try{t[e]=n}catch{}c&&t.removeAttribute(e)}function jn(t,e,n,r){t.addEventListener(e,n,r)}function _R(t,e,n,r){t.removeEventListener(e,n,r)}function yR(t,e,n,r,s=null){const i=t._vei||(t._vei={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=vR(e);if(r){const u=i[e]=wR(r,s);jn(t,a,u,c)}else o&&(_R(t,a,o,c),i[e]=void 0)}}const Qp=/(?:Once|Passive|Capture)$/;function vR(t){let e;if(Qp.test(t)){e={};let r;for(;r=t.match(Qp);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Si(t.slice(2)),e]}let ju=0;const ER=Promise.resolve(),IR=()=>ju||(ER.then(()=>ju=0),ju=Date.now());function wR(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;sn(TR(r,n.value),e,5,[r])};return n.value=t,n.attached=IR(),n}function TR(t,e){if(ue(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Yp=/^on[a-z]/,bR=(t,e,n,r,s=!1,i,o,a,c)=>{e==="class"?dR(t,r,s):e==="style"?fR(t,n,r):Cl(e)?Pd(e)||yR(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):AR(t,e,r,s))?gR(t,e,r,i,o,a,c):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),pR(t,e,r,s))};function AR(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&Yp.test(e)&&Ee(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Yp.test(e)&&st(n)?!1:e in t}const or="transition",Xi="animation",ms=(t,{slots:e})=>ki(mA,nE(t),e);ms.displayName="Transition";const tE={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},RR=ms.props=lt({},Nv,tE),Wr=(t,e=[])=>{ue(t)?t.forEach(n=>n(...e)):t&&t(...e)},Jp=t=>t?ue(t)?t.some(e=>e.length>1):t.length>1:!1;function nE(t){const e={};for(const T in t)T in tE||(e[T]=t[T]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,E=SR(s),b=E&&E[0],C=E&&E[1],{onBeforeEnter:N,onEnter:V,onEnterCancelled:x,onLeave:L,onLeaveCancelled:q,onBeforeAppear:G=N,onAppear:R=V,onAppearCancelled:_=x}=e,v=(T,I,de)=>{hr(T,I?h:a),hr(T,I?u:o),de&&de()},w=(T,I)=>{T._isLeaving=!1,hr(T,d),hr(T,g),hr(T,m),I&&I()},S=T=>(I,de)=>{const ke=T?R:V,pe=()=>v(I,T,de);Wr(ke,[I,pe]),Xp(()=>{hr(I,T?c:i),Un(I,T?h:a),Jp(ke)||Zp(I,r,b,pe)})};return lt(e,{onBeforeEnter(T){Wr(N,[T]),Un(T,i),Un(T,o)},onBeforeAppear(T){Wr(G,[T]),Un(T,c),Un(T,u)},onEnter:S(!1),onAppear:S(!0),onLeave(T,I){T._isLeaving=!0;const de=()=>w(T,I);Un(T,d),sE(),Un(T,m),Xp(()=>{T._isLeaving&&(hr(T,d),Un(T,g),Jp(L)||Zp(T,r,C,de))}),Wr(L,[T,de])},onEnterCancelled(T){v(T,!1),Wr(x,[T])},onAppearCancelled(T){v(T,!0),Wr(_,[T])},onLeaveCancelled(T){w(T),Wr(q,[T])}})}function SR(t){if(t==null)return null;if(Be(t))return[$u(t.enter),$u(t.leave)];{const e=$u(t);return[e,e]}}function $u(t){return u0(t)}function Un(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function hr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Xp(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let PR=0;function Zp(t,e,n,r){const s=t._endId=++PR,i=()=>{s===t._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=rE(t,e);if(!o)return r();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,m),i()},m=g=>{g.target===t&&++h>=c&&d()};setTimeout(()=>{h<c&&d()},a+1),t.addEventListener(u,m)}function rE(t,e){const n=window.getComputedStyle(t),r=E=>(n[E]||"").split(", "),s=r(`${or}Delay`),i=r(`${or}Duration`),o=eg(s,i),a=r(`${Xi}Delay`),c=r(`${Xi}Duration`),u=eg(a,c);let h=null,d=0,m=0;e===or?o>0&&(h=or,d=o,m=i.length):e===Xi?u>0&&(h=Xi,d=u,m=c.length):(d=Math.max(o,u),h=d>0?o>u?or:Xi:null,m=h?h===or?i.length:c.length:0);const g=h===or&&/\b(transform|all)(,|$)/.test(r(`${or}Property`).toString());return{type:h,timeout:d,propCount:m,hasTransform:g}}function eg(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>tg(n)+tg(t[r])))}function tg(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function sE(){return document.body.offsetHeight}const iE=new WeakMap,oE=new WeakMap,aE={name:"TransitionGroup",props:lt({},RR,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=tf(),r=Ov();let s,i;return Uv(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!VR(s[0].el,n.vnode.el,o))return;s.forEach(xR),s.forEach(kR);const a=s.filter(DR);sE(),a.forEach(c=>{const u=c.el,h=u.style;Un(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=u._moveCb=m=>{m&&m.target!==u||(!m||/transform$/.test(m.propertyName))&&(u.removeEventListener("transitionend",d),u._moveCb=null,hr(u,o))};u.addEventListener("transitionend",d)})}),()=>{const o=Ae(t),a=nE(o);let c=o.tag||vt;s=i,i=e.default?qd(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&qo(h,zo(h,a,r,n))}if(s)for(let u=0;u<s.length;u++){const h=s[u];qo(h,zo(h,a,r,n)),iE.set(h,h.el.getBoundingClientRect())}return $(c,null,i)}}},CR=t=>delete t.mode;aE.props;const qF=aE;function xR(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function kR(t){oE.set(t,t.el.getBoundingClientRect())}function DR(t){const e=iE.get(t),n=oE.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function VR(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&r.classList.remove(a))}),n.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:i}=rE(r);return s.removeChild(r),i}const Vr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ue(e)?n=>Sc(e,n):e};function OR(t){t.target.composing=!0}function ng(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const rg={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t._assign=Vr(s);const i=r||s.props&&s.props.type==="number";jn(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Gc(a)),t._assign(a)}),n&&jn(t,"change",()=>{t.value=t.value.trim()}),e||(jn(t,"compositionstart",OR),jn(t,"compositionend",ng),jn(t,"change",ng))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:s}},i){if(t._assign=Vr(i),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(s||t.type==="number")&&Gc(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},NR={deep:!0,created(t,e,n){t._assign=Vr(n),jn(t,"change",()=>{const r=t._modelValue,s=hi(t),i=t.checked,o=t._assign;if(ue(r)){const a=Vd(r,s),c=a!==-1;if(i&&!c)o(r.concat(s));else if(!i&&c){const u=[...r];u.splice(a,1),o(u)}}else if(Ri(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(cE(t,i))})},mounted:sg,beforeUpdate(t,e,n){t._assign=Vr(n),sg(t,e,n)}};function sg(t,{value:e,oldValue:n},r){t._modelValue=e,ue(e)?t.checked=Vd(e,r.props.value)>-1:Ri(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=fs(e,cE(t,!0)))}const MR={created(t,{value:e},n){t.checked=fs(e,n.props.value),t._assign=Vr(n),jn(t,"change",()=>{t._assign(hi(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t._assign=Vr(r),e!==n&&(t.checked=fs(e,r.props.value))}},LR={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Ri(e);jn(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Gc(hi(o)):hi(o));t._assign(t.multiple?s?new Set(i):i:i[0])}),t._assign=Vr(r)},mounted(t,{value:e}){ig(t,e)},beforeUpdate(t,e,n){t._assign=Vr(n)},updated(t,{value:e}){ig(t,e)}};function ig(t,e){const n=t.multiple;if(!(n&&!ue(e)&&!Ri(e))){for(let r=0,s=t.options.length;r<s;r++){const i=t.options[r],o=hi(i);if(n)ue(e)?i.selected=Vd(e,o)>-1:i.selected=e.has(o);else if(fs(hi(i),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function hi(t){return"_value"in t?t._value:t.value}function cE(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const KF={created(t,e,n){hc(t,e,n,null,"created")},mounted(t,e,n){hc(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){hc(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){hc(t,e,n,r,"updated")}};function FR(t,e){switch(t){case"SELECT":return LR;case"TEXTAREA":return rg;default:switch(e){case"checkbox":return NR;case"radio":return MR;default:return rg}}}function hc(t,e,n,r,s){const o=FR(t.tagName,n.props&&n.props.type)[s];o&&o(t,e,n,r)}const UR=["ctrl","shift","alt","meta"],BR={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>UR.some(n=>t[`${n}Key`]&&!e.includes(n))},HF=(t,e)=>(n,...r)=>{for(let s=0;s<e.length;s++){const i=BR[e[s]];if(i&&i(n,e))return}return t(n,...r)},lE={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Zi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Zi(t,!0),r.enter(t)):r.leave(t,()=>{Zi(t,!1)}):Zi(t,e))},beforeUnmount(t,{value:e}){Zi(t,e)}};function Zi(t,e){t.style.display=e?t._vod:"none"}const jR=lt({patchProp:bR},hR);let og;function $R(){return og||(og=BA(jR))}const zR=(...t)=>{const e=$R().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=qR(r);if(!s)return;const i=e._component;!Ee(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function qR(t){return st(t)?document.querySelector(t):t}var KR=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let uE;const Kl=t=>uE=t,hE=Symbol();function Ch(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var So;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(So||(So={}));function HR(){const t=pa(!0),e=t.run(()=>ze({}));let n=[],r=[];const s=Vl({install(i){Kl(s),s._a=i,i.provide(hE,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!KR?r.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const dE=()=>{};function ag(t,e,n,r=dE){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&uv()&&Xt(s),s}function Us(t,...e){t.slice().forEach(n=>{n(...e)})}const GR=t=>t();function xh(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Ch(s)&&Ch(r)&&t.hasOwnProperty(n)&&!$e(r)&&!Tr(r)?t[n]=xh(s,r):t[n]=r}return t}const WR=Symbol();function QR(t){return!Ch(t)||!t.hasOwnProperty(WR)}const{assign:dr}=Object;function YR(t){return!!($e(t)&&t.effect)}function JR(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let c;function u(){a||(n.state.value[t]=s?s():{});const h=Ol(n.state.value[t]);return dr(h,i,Object.keys(o||{}).reduce((d,m)=>(d[m]=Vl(Y(()=>{Kl(n);const g=n._s.get(t);return o[m].call(g,g)})),d),{}))}return c=fE(t,u,e,n,r,!0),c}function fE(t,e,n={},r,s,i){let o;const a=dr({actions:{}},n),c={deep:!0};let u,h,d=[],m=[],g;const E=r.state.value[t];!i&&!E&&(r.state.value[t]={}),ze({});let b;function C(_){let v;u=h=!1,typeof _=="function"?(_(r.state.value[t]),v={type:So.patchFunction,storeId:t,events:g}):(xh(r.state.value[t],_),v={type:So.patchObject,payload:_,storeId:t,events:g});const w=b=Symbol();yn().then(()=>{b===w&&(u=!0)}),h=!0,Us(d,v,r.state.value[t])}const N=i?function(){const{state:v}=n,w=v?v():{};this.$patch(S=>{dr(S,w)})}:dE;function V(){o.stop(),d=[],m=[],r._s.delete(t)}function x(_,v){return function(){Kl(r);const w=Array.from(arguments),S=[],T=[];function I(pe){S.push(pe)}function de(pe){T.push(pe)}Us(m,{args:w,name:_,store:q,after:I,onError:de});let ke;try{ke=v.apply(this&&this.$id===t?this:q,w)}catch(pe){throw Us(T,pe),pe}return ke instanceof Promise?ke.then(pe=>(Us(S,pe),pe)).catch(pe=>(Us(T,pe),Promise.reject(pe))):(Us(S,ke),ke)}}const L={_p:r,$id:t,$onAction:ag.bind(null,m),$patch:C,$reset:N,$subscribe(_,v={}){const w=ag(d,_,v.detached,()=>S()),S=o.run(()=>Fe(()=>r.state.value[t],T=>{(v.flush==="sync"?h:u)&&_({storeId:t,type:So.direct,events:g},T)},dr({},c,v)));return w},$dispose:V},q=Vn(L);r._s.set(t,q);const G=r._a&&r._a.runWithContext||GR,R=r._e.run(()=>(o=pa(),G(()=>o.run(e))));for(const _ in R){const v=R[_];if($e(v)&&!YR(v)||Tr(v))i||(E&&QR(v)&&($e(v)?v.value=E[_]:xh(v,E[_])),r.state.value[t][_]=v);else if(typeof v=="function"){const w=x(_,v);R[_]=w,a.actions[_]=v}}return dr(q,R),dr(Ae(q),R),Object.defineProperty(q,"$state",{get:()=>r.state.value[t],set:_=>{C(v=>{dr(v,_)})}}),r._p.forEach(_=>{dr(q,o.run(()=>_({store:q,app:r._a,pinia:r,options:a})))}),E&&i&&n.hydrate&&n.hydrate(q.$state,E),u=!0,h=!0,q}function XR(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,c){const u=OA();return a=a||(u?ct(hE,null):null),a&&Kl(a),a=uE,a._s.has(r)||(i?fE(r,e,s,a):JR(r,s,a)),a._s.get(r)}return o.$id=r,o}const ZR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAM1BMVEXk5ueutLfn6eqrsbTp6+zg4uOwtrnJzc/j5earsbW0uby4vcDQ09XGyszU19jd3+G/xMamCvwDAAAFLklEQVR4nO2d2bLbIAxAbYE3sDH//7WFbPfexG4MiCAcnWmnrzkjIRaD2jQMwzAMwzAMwzAMwzAMwzAMwzAMwzAMwzAMwzAMw5wQkHJczewxZh2lhNK/CBOQo1n0JIT74/H/qMV0Z7GU3aCcVPuEE1XDCtVLAhgtpme7H0s1N1U7QjO0L8F7llzGeh1hEG/8Lo7TUmmuSrOfns9xnGXpXxsONPpA/B6OqqstjC6Ax/0ujkNdYQQbKNi2k64qiiEZ+ohi35X+2YcZw/WujmslYewiAliVYrxgJYrdwUmwXsU+RdApUi83oNIE27YvrfB/ZPg8+BJETXnqh9CVzBbTQHgojgiCvtqU9thFJg/CKz3VIMKMEkIXxIWqIpIg2SkjYj+xC816mrJae2aiWGykxRNsW0UwiJghJDljYI5CD8GRiCtIsJxizYUPQ2pzItZy5pcisTRdk/a9m4amtNNfBuQkdVhSaYqfpNTSFGfb9GRIakrE2Pm+GFLaCQPqiu0OpWP+HMPQQcgQMiQprWXNmsVwIjQjYi/ZrhAqNTCgr2gu0Jnz85RSSjso0HkMFZ0YZjKkc26a/jlmh9JiDyDxi9oeorTYAzZkwwoMz19pzj9bnH/GP/+qbchjSGflneWYhtTuKdMOmNKZcJ5TjInQKcYXnESd/jQxy0ENpULTNGOGgxpap/oyw9pbUAqhfx2Dbkhovvfgz4iUzoM9+GlK6/Mh4q29hyC1mwro30hpVVLPF9wYQr71RazOeM5/cw81iBRD+A03aM9/C/obbrKjbYSpCmIVG3qT/Q8oeUo3Rz0IL7vI1tEbCB9pSiu8I/aV8x3Kg/BGWrWp4ZVs0nZfmAoEG4h/61yHYIJiFSl6Q0Vk6tTW1N8kYp8hdOkfHYYMXd2Qft+8CYwqYDSKvqIh+MCF8Wgca2u/cwdgeW3TtuVn6+1oBs3yLo5C2JpK6CvQzGpfUkz9UG/87gCsi5o2LIXolxN0FbwAsjOLEr+YJmXn7iR6N0BCt5p5cMxm7eAsfS+/CACQf4CTpKjzgkvr2cVarVTf96372yut7XLJ1sa7lv6VcfgYrWaxqr3Wlo1S6pvStr22sxOtTNPLzdY3nj20bPP+ejFdJYkLsjGLdtPBEbe/mr2bQKiXWJDroA+vtzc0p9aahuwqHMDYrQEXHEw9jwQl3drMpts9JBU1SdktPe5FBRdJQ6bwXBpa57ib2A8kukQDzMjh++Uo7Fo6Wd02Pkf4fknqoo4HtvAIjsqUcjx6DIPgWCaOML9rKI/oqD9/lgNrn+eF+p7j8tnzHBiR7+kdUGw/+V1Kzkc75mMy6U+FMaxjPibiM1U1uGM+puInHpmALZCgP4pt7i840MV8+0R1zPsRB6UTcqpizncYwZ89syDydfyWCwXB1l8/zRNGWbTG/GHKUm9AkxHMc/EGSk3z2+ArEhPEV5TUBLEvUGFcjEUH80J/jveTGOAJEljJbILWGQT3zRYiwuKsUXN1EEJAzBhRJFll7mBUG7KD8EqPkKekBREaL8hMDZLQSG6AQjtHPYmvTQnX0TtpC1SYCe2YdkkyLP3jj5BSbKiuR585eQhTgoje6yIb0Yb0C+mV6EYvebqw5SDy2WmubogZiF2AVxPC2FpDf8H2Q9QWo6IkjUxTWVEI3WY/wrCeSuqJ+eRWzXR/JXwgVjUMozbCOfoEZiSiKVGepqv5CJ8RyR4D7xBeamqa7z3BJ/z17JxuBPdv93d/a2Ki878MMAzDMAzDMAzDMAzDMF/KP09VUmxBAiI3AAAAAElFTkSuQmCC";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},eS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},pE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),r.push(n[h],n[d],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new tS;const m=i<<2|a>>4;if(r.push(m),u!==64){const g=a<<4&240|u>>2;if(r.push(g),d!==64){const E=u<<6&192|d;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nS=function(t){const e=mE(t);return pE.encodeByteArray(e,!0)},el=function(t){return nS(t).replace(/\./g,"")},gE=function(t){try{return pE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=()=>rS().__FIREBASE_DEFAULTS__,iS=()=>{if(typeof process>"u"||typeof{}>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gE(t[1]);return e&&JSON.parse(e)},Hl=()=>{try{return sS()||iS()||oS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_E=t=>{var e,n;return(n=(e=Hl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yE=t=>{const e=_E(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vE=()=>{var t;return(t=Hl())===null||t===void 0?void 0:t.config},EE=t=>{var e;return(e=Hl())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[el(JSON.stringify(n)),el(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function lS(){var t;const e=(t=Hl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fS(){const t=pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wE(){return!lS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TE(){try{return typeof indexedDB=="object"}catch{return!1}}function mS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="FirebaseError";class On extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pS,Object.setPrototypeOf(this,On.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_a.prototype.create)}}class _a{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?gS(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new On(s,a,r)}}function gS(t,e){return t.replace(_S,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const _S=/\{\$([^}]+)}/g;function yS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(cg(i)&&cg(o)){if(!Wo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function cg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function po(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function go(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function vS(t,e){const n=new ES(t,e);return n.subscribe.bind(n)}class ES{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");IS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=zu),s.error===void 0&&(s.error=zu),s.complete===void 0&&(s.complete=zu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(t){return t&&t._delegate?t._delegate:t}class Or{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bS(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TS(t){return t===Xr?void 0:t}function bS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const RS={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},SS=Re.INFO,PS={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},CS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=PS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rf{constructor(e){this.name=e,this._logLevel=SS,this._logHandler=CS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const xS=(t,e)=>e.some(n=>t instanceof n);let lg,ug;function kS(){return lg||(lg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DS(){return ug||(ug=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bE=new WeakMap,kh=new WeakMap,AE=new WeakMap,qu=new WeakMap,sf=new WeakMap;function VS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Rr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&bE.set(n,t)}).catch(()=>{}),sf.set(e,t),e}function OS(t){if(kh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});kh.set(t,e)}let Dh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function NS(t){Dh=t(Dh)}function MS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ku(this),e,...n);return AE.set(r,e.sort?e.sort():[e]),Rr(r)}:DS().includes(t)?function(...e){return t.apply(Ku(this),e),Rr(bE.get(this))}:function(...e){return Rr(t.apply(Ku(this),e))}}function LS(t){return typeof t=="function"?MS(t):(t instanceof IDBTransaction&&OS(t),xS(t,kS())?new Proxy(t,Dh):t)}function Rr(t){if(t instanceof IDBRequest)return VS(t);if(qu.has(t))return qu.get(t);const e=LS(t);return e!==t&&(qu.set(t,e),sf.set(e,t)),e}const Ku=t=>sf.get(t);function FS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Rr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Rr(o.result),c.oldVersion,c.newVersion,Rr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const US=["get","getKey","getAll","getAllKeys","count"],BS=["put","add","delete","clear"],Hu=new Map;function hg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hu.get(e))return Hu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=BS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||US.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return Hu.set(e,i),i}NS(t=>({...t,get:(e,n,r)=>hg(e,n)||t.get(e,n,r),has:(e,n)=>!!hg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($S(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $S(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vh="@firebase/app",dg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new rf("@firebase/app"),zS="@firebase/app-compat",qS="@firebase/analytics-compat",KS="@firebase/analytics",HS="@firebase/app-check-compat",GS="@firebase/app-check",WS="@firebase/auth",QS="@firebase/auth-compat",YS="@firebase/database",JS="@firebase/data-connect",XS="@firebase/database-compat",ZS="@firebase/functions",eP="@firebase/functions-compat",tP="@firebase/installations",nP="@firebase/installations-compat",rP="@firebase/messaging",sP="@firebase/messaging-compat",iP="@firebase/performance",oP="@firebase/performance-compat",aP="@firebase/remote-config",cP="@firebase/remote-config-compat",lP="@firebase/storage",uP="@firebase/storage-compat",hP="@firebase/firestore",dP="@firebase/vertexai-preview",fP="@firebase/firestore-compat",mP="firebase",pP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh="[DEFAULT]",gP={[Vh]:"fire-core",[zS]:"fire-core-compat",[KS]:"fire-analytics",[qS]:"fire-analytics-compat",[GS]:"fire-app-check",[HS]:"fire-app-check-compat",[WS]:"fire-auth",[QS]:"fire-auth-compat",[YS]:"fire-rtdb",[JS]:"fire-data-connect",[XS]:"fire-rtdb-compat",[ZS]:"fire-fn",[eP]:"fire-fn-compat",[tP]:"fire-iid",[nP]:"fire-iid-compat",[rP]:"fire-fcm",[sP]:"fire-fcm-compat",[iP]:"fire-perf",[oP]:"fire-perf-compat",[aP]:"fire-rc",[cP]:"fire-rc-compat",[lP]:"fire-gcs",[uP]:"fire-gcs-compat",[hP]:"fire-fst",[fP]:"fire-fst-compat",[dP]:"fire-vertex","fire-js":"fire-js",[mP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new Map,_P=new Map,Nh=new Map;function fg(t,e){try{t.container.addComponent(e)}catch(n){Yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ps(t){const e=t.name;if(Nh.has(e))return Yn.debug(`There were multiple attempts to register component ${e}.`),!1;Nh.set(e,t);for(const n of tl.values())fg(n,t);for(const n of _P.values())fg(n,t);return!0}function va(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $n(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new _a("app","Firebase",yP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=pP;function RE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Oh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Sr.create("bad-app-name",{appName:String(s)});if(n||(n=vE()),!n)throw Sr.create("no-options");const i=tl.get(s);if(i){if(Wo(n,i.options)&&Wo(r,i.config))return i;throw Sr.create("duplicate-app",{appName:s})}const o=new AS(s);for(const c of Nh.values())o.addComponent(c);const a=new vP(n,r,o);return tl.set(s,a),a}function of(t=Oh){const e=tl.get(t);if(!e&&t===Oh&&vE())return RE();if(!e)throw Sr.create("no-app",{appName:t});return e}function Pn(t,e,n){var r;let s=(r=gP[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yn.warn(a.join(" "));return}ps(new Or(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="firebase-heartbeat-database",IP=1,Qo="firebase-heartbeat-store";let Gu=null;function SE(){return Gu||(Gu=FS(EP,IP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Sr.create("idb-open",{originalErrorMessage:t.message})})),Gu}async function wP(t){try{const n=(await SE()).transaction(Qo),r=await n.objectStore(Qo).get(PE(t));return await n.done,r}catch(e){if(e instanceof On)Yn.warn(e.message);else{const n=Sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yn.warn(n.message)}}}async function mg(t,e){try{const r=(await SE()).transaction(Qo,"readwrite");await r.objectStore(Qo).put(e,PE(t)),await r.done}catch(n){if(n instanceof On)Yn.warn(n.message);else{const r=Sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yn.warn(r.message)}}}function PE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=1024,bP=30*24*60*60*1e3;class AP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=pg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=bP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Yn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pg(),{heartbeatsToSend:r,unsentEntries:s}=RP(this._heartbeatsCache.heartbeats),i=el(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Yn.warn(n),""}}}function pg(){return new Date().toISOString().substring(0,10)}function RP(t,e=TP){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),gg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),gg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class SP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TE()?mS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return mg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return mg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function gg(t){return el(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t){ps(new Or("platform-logger",e=>new jS(e),"PRIVATE")),ps(new Or("heartbeat",e=>new AP(e),"PRIVATE")),Pn(Vh,dg,t),Pn(Vh,dg,"esm2017"),Pn("fire-js","")}PP("");var _g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,CE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,_){function v(){}v.prototype=_.prototype,R.D=_.prototype,R.prototype=new v,R.prototype.constructor=R,R.C=function(w,S,T){for(var I=Array(arguments.length-2),de=2;de<arguments.length;de++)I[de-2]=arguments[de];return _.prototype[S].apply(w,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,_,v){v||(v=0);var w=Array(16);if(typeof _=="string")for(var S=0;16>S;++S)w[S]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(S=0;16>S;++S)w[S]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=R.g[0],v=R.g[1],S=R.g[2];var T=R.g[3],I=_+(T^v&(S^T))+w[0]+3614090360&4294967295;_=v+(I<<7&4294967295|I>>>25),I=T+(S^_&(v^S))+w[1]+3905402710&4294967295,T=_+(I<<12&4294967295|I>>>20),I=S+(v^T&(_^v))+w[2]+606105819&4294967295,S=T+(I<<17&4294967295|I>>>15),I=v+(_^S&(T^_))+w[3]+3250441966&4294967295,v=S+(I<<22&4294967295|I>>>10),I=_+(T^v&(S^T))+w[4]+4118548399&4294967295,_=v+(I<<7&4294967295|I>>>25),I=T+(S^_&(v^S))+w[5]+1200080426&4294967295,T=_+(I<<12&4294967295|I>>>20),I=S+(v^T&(_^v))+w[6]+2821735955&4294967295,S=T+(I<<17&4294967295|I>>>15),I=v+(_^S&(T^_))+w[7]+4249261313&4294967295,v=S+(I<<22&4294967295|I>>>10),I=_+(T^v&(S^T))+w[8]+1770035416&4294967295,_=v+(I<<7&4294967295|I>>>25),I=T+(S^_&(v^S))+w[9]+2336552879&4294967295,T=_+(I<<12&4294967295|I>>>20),I=S+(v^T&(_^v))+w[10]+4294925233&4294967295,S=T+(I<<17&4294967295|I>>>15),I=v+(_^S&(T^_))+w[11]+2304563134&4294967295,v=S+(I<<22&4294967295|I>>>10),I=_+(T^v&(S^T))+w[12]+1804603682&4294967295,_=v+(I<<7&4294967295|I>>>25),I=T+(S^_&(v^S))+w[13]+4254626195&4294967295,T=_+(I<<12&4294967295|I>>>20),I=S+(v^T&(_^v))+w[14]+2792965006&4294967295,S=T+(I<<17&4294967295|I>>>15),I=v+(_^S&(T^_))+w[15]+1236535329&4294967295,v=S+(I<<22&4294967295|I>>>10),I=_+(S^T&(v^S))+w[1]+4129170786&4294967295,_=v+(I<<5&4294967295|I>>>27),I=T+(v^S&(_^v))+w[6]+3225465664&4294967295,T=_+(I<<9&4294967295|I>>>23),I=S+(_^v&(T^_))+w[11]+643717713&4294967295,S=T+(I<<14&4294967295|I>>>18),I=v+(T^_&(S^T))+w[0]+3921069994&4294967295,v=S+(I<<20&4294967295|I>>>12),I=_+(S^T&(v^S))+w[5]+3593408605&4294967295,_=v+(I<<5&4294967295|I>>>27),I=T+(v^S&(_^v))+w[10]+38016083&4294967295,T=_+(I<<9&4294967295|I>>>23),I=S+(_^v&(T^_))+w[15]+3634488961&4294967295,S=T+(I<<14&4294967295|I>>>18),I=v+(T^_&(S^T))+w[4]+3889429448&4294967295,v=S+(I<<20&4294967295|I>>>12),I=_+(S^T&(v^S))+w[9]+568446438&4294967295,_=v+(I<<5&4294967295|I>>>27),I=T+(v^S&(_^v))+w[14]+3275163606&4294967295,T=_+(I<<9&4294967295|I>>>23),I=S+(_^v&(T^_))+w[3]+4107603335&4294967295,S=T+(I<<14&4294967295|I>>>18),I=v+(T^_&(S^T))+w[8]+1163531501&4294967295,v=S+(I<<20&4294967295|I>>>12),I=_+(S^T&(v^S))+w[13]+2850285829&4294967295,_=v+(I<<5&4294967295|I>>>27),I=T+(v^S&(_^v))+w[2]+4243563512&4294967295,T=_+(I<<9&4294967295|I>>>23),I=S+(_^v&(T^_))+w[7]+1735328473&4294967295,S=T+(I<<14&4294967295|I>>>18),I=v+(T^_&(S^T))+w[12]+2368359562&4294967295,v=S+(I<<20&4294967295|I>>>12),I=_+(v^S^T)+w[5]+4294588738&4294967295,_=v+(I<<4&4294967295|I>>>28),I=T+(_^v^S)+w[8]+2272392833&4294967295,T=_+(I<<11&4294967295|I>>>21),I=S+(T^_^v)+w[11]+1839030562&4294967295,S=T+(I<<16&4294967295|I>>>16),I=v+(S^T^_)+w[14]+4259657740&4294967295,v=S+(I<<23&4294967295|I>>>9),I=_+(v^S^T)+w[1]+2763975236&4294967295,_=v+(I<<4&4294967295|I>>>28),I=T+(_^v^S)+w[4]+1272893353&4294967295,T=_+(I<<11&4294967295|I>>>21),I=S+(T^_^v)+w[7]+4139469664&4294967295,S=T+(I<<16&4294967295|I>>>16),I=v+(S^T^_)+w[10]+3200236656&4294967295,v=S+(I<<23&4294967295|I>>>9),I=_+(v^S^T)+w[13]+681279174&4294967295,_=v+(I<<4&4294967295|I>>>28),I=T+(_^v^S)+w[0]+3936430074&4294967295,T=_+(I<<11&4294967295|I>>>21),I=S+(T^_^v)+w[3]+3572445317&4294967295,S=T+(I<<16&4294967295|I>>>16),I=v+(S^T^_)+w[6]+76029189&4294967295,v=S+(I<<23&4294967295|I>>>9),I=_+(v^S^T)+w[9]+3654602809&4294967295,_=v+(I<<4&4294967295|I>>>28),I=T+(_^v^S)+w[12]+3873151461&4294967295,T=_+(I<<11&4294967295|I>>>21),I=S+(T^_^v)+w[15]+530742520&4294967295,S=T+(I<<16&4294967295|I>>>16),I=v+(S^T^_)+w[2]+3299628645&4294967295,v=S+(I<<23&4294967295|I>>>9),I=_+(S^(v|~T))+w[0]+4096336452&4294967295,_=v+(I<<6&4294967295|I>>>26),I=T+(v^(_|~S))+w[7]+1126891415&4294967295,T=_+(I<<10&4294967295|I>>>22),I=S+(_^(T|~v))+w[14]+2878612391&4294967295,S=T+(I<<15&4294967295|I>>>17),I=v+(T^(S|~_))+w[5]+4237533241&4294967295,v=S+(I<<21&4294967295|I>>>11),I=_+(S^(v|~T))+w[12]+1700485571&4294967295,_=v+(I<<6&4294967295|I>>>26),I=T+(v^(_|~S))+w[3]+2399980690&4294967295,T=_+(I<<10&4294967295|I>>>22),I=S+(_^(T|~v))+w[10]+4293915773&4294967295,S=T+(I<<15&4294967295|I>>>17),I=v+(T^(S|~_))+w[1]+2240044497&4294967295,v=S+(I<<21&4294967295|I>>>11),I=_+(S^(v|~T))+w[8]+1873313359&4294967295,_=v+(I<<6&4294967295|I>>>26),I=T+(v^(_|~S))+w[15]+4264355552&4294967295,T=_+(I<<10&4294967295|I>>>22),I=S+(_^(T|~v))+w[6]+2734768916&4294967295,S=T+(I<<15&4294967295|I>>>17),I=v+(T^(S|~_))+w[13]+1309151649&4294967295,v=S+(I<<21&4294967295|I>>>11),I=_+(S^(v|~T))+w[4]+4149444226&4294967295,_=v+(I<<6&4294967295|I>>>26),I=T+(v^(_|~S))+w[11]+3174756917&4294967295,T=_+(I<<10&4294967295|I>>>22),I=S+(_^(T|~v))+w[2]+718787259&4294967295,S=T+(I<<15&4294967295|I>>>17),I=v+(T^(S|~_))+w[9]+3951481745&4294967295,R.g[0]=R.g[0]+_&4294967295,R.g[1]=R.g[1]+(S+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+S&4294967295,R.g[3]=R.g[3]+T&4294967295}r.prototype.u=function(R,_){_===void 0&&(_=R.length);for(var v=_-this.blockSize,w=this.B,S=this.h,T=0;T<_;){if(S==0)for(;T<=v;)s(this,R,T),T+=this.blockSize;if(typeof R=="string"){for(;T<_;)if(w[S++]=R.charCodeAt(T++),S==this.blockSize){s(this,w),S=0;break}}else for(;T<_;)if(w[S++]=R[T++],S==this.blockSize){s(this,w),S=0;break}}this.h=S,this.o+=_},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var _=1;_<R.length-8;++_)R[_]=0;var v=8*this.o;for(_=R.length-8;_<R.length;++_)R[_]=v&255,v/=256;for(this.u(R),R=Array(16),_=v=0;4>_;++_)for(var w=0;32>w;w+=8)R[v++]=this.g[_]>>>w&255;return R};function i(R,_){var v=a;return Object.prototype.hasOwnProperty.call(v,R)?v[R]:v[R]=_(R)}function o(R,_){this.h=_;for(var v=[],w=!0,S=R.length-1;0<=S;S--){var T=R[S]|0;w&&T==_||(v[S]=T,w=!1)}this.g=v}var a={};function c(R){return-128<=R&&128>R?i(R,function(_){return new o([_|0],0>_?-1:0)}):new o([R|0],0>R?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return d;if(0>R)return C(u(-R));for(var _=[],v=1,w=0;R>=v;w++)_[w]=R/v|0,v*=4294967296;return new o(_,0)}function h(R,_){if(R.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(R.charAt(0)=="-")return C(h(R.substring(1),_));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=u(Math.pow(_,8)),w=d,S=0;S<R.length;S+=8){var T=Math.min(8,R.length-S),I=parseInt(R.substring(S,S+T),_);8>T?(T=u(Math.pow(_,T)),w=w.j(T).add(u(I))):(w=w.j(v),w=w.add(u(I)))}return w}var d=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(b(this))return-C(this).m();for(var R=0,_=1,v=0;v<this.g.length;v++){var w=this.i(v);R+=(0<=w?w:4294967296+w)*_,_*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(E(this))return"0";if(b(this))return"-"+C(this).toString(R);for(var _=u(Math.pow(R,6)),v=this,w="";;){var S=L(v,_).g;v=N(v,S.j(_));var T=((0<v.g.length?v.g[0]:v.h)>>>0).toString(R);if(v=S,E(v))return T+w;for(;6>T.length;)T="0"+T;w=T+w}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function E(R){if(R.h!=0)return!1;for(var _=0;_<R.g.length;_++)if(R.g[_]!=0)return!1;return!0}function b(R){return R.h==-1}t.l=function(R){return R=N(this,R),b(R)?-1:E(R)?0:1};function C(R){for(var _=R.g.length,v=[],w=0;w<_;w++)v[w]=~R.g[w];return new o(v,~R.h).add(m)}t.abs=function(){return b(this)?C(this):this},t.add=function(R){for(var _=Math.max(this.g.length,R.g.length),v=[],w=0,S=0;S<=_;S++){var T=w+(this.i(S)&65535)+(R.i(S)&65535),I=(T>>>16)+(this.i(S)>>>16)+(R.i(S)>>>16);w=I>>>16,T&=65535,I&=65535,v[S]=I<<16|T}return new o(v,v[v.length-1]&-2147483648?-1:0)};function N(R,_){return R.add(C(_))}t.j=function(R){if(E(this)||E(R))return d;if(b(this))return b(R)?C(this).j(C(R)):C(C(this).j(R));if(b(R))return C(this.j(C(R)));if(0>this.l(g)&&0>R.l(g))return u(this.m()*R.m());for(var _=this.g.length+R.g.length,v=[],w=0;w<2*_;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var S=0;S<R.g.length;S++){var T=this.i(w)>>>16,I=this.i(w)&65535,de=R.i(S)>>>16,ke=R.i(S)&65535;v[2*w+2*S]+=I*ke,V(v,2*w+2*S),v[2*w+2*S+1]+=T*ke,V(v,2*w+2*S+1),v[2*w+2*S+1]+=I*de,V(v,2*w+2*S+1),v[2*w+2*S+2]+=T*de,V(v,2*w+2*S+2)}for(w=0;w<_;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=_;w<2*_;w++)v[w]=0;return new o(v,0)};function V(R,_){for(;(R[_]&65535)!=R[_];)R[_+1]+=R[_]>>>16,R[_]&=65535,_++}function x(R,_){this.g=R,this.h=_}function L(R,_){if(E(_))throw Error("division by zero");if(E(R))return new x(d,d);if(b(R))return _=L(C(R),_),new x(C(_.g),C(_.h));if(b(_))return _=L(R,C(_)),new x(C(_.g),_.h);if(30<R.g.length){if(b(R)||b(_))throw Error("slowDivide_ only works with positive integers.");for(var v=m,w=_;0>=w.l(R);)v=q(v),w=q(w);var S=G(v,1),T=G(w,1);for(w=G(w,2),v=G(v,2);!E(w);){var I=T.add(w);0>=I.l(R)&&(S=S.add(v),T=I),w=G(w,1),v=G(v,1)}return _=N(R,S.j(_)),new x(S,_)}for(S=d;0<=R.l(_);){for(v=Math.max(1,Math.floor(R.m()/_.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),T=u(v),I=T.j(_);b(I)||0<I.l(R);)v-=w,T=u(v),I=T.j(_);E(T)&&(T=m),S=S.add(T),R=N(R,I)}return new x(S,R)}t.A=function(R){return L(this,R).h},t.and=function(R){for(var _=Math.max(this.g.length,R.g.length),v=[],w=0;w<_;w++)v[w]=this.i(w)&R.i(w);return new o(v,this.h&R.h)},t.or=function(R){for(var _=Math.max(this.g.length,R.g.length),v=[],w=0;w<_;w++)v[w]=this.i(w)|R.i(w);return new o(v,this.h|R.h)},t.xor=function(R){for(var _=Math.max(this.g.length,R.g.length),v=[],w=0;w<_;w++)v[w]=this.i(w)^R.i(w);return new o(v,this.h^R.h)};function q(R){for(var _=R.g.length+1,v=[],w=0;w<_;w++)v[w]=R.i(w)<<1|R.i(w-1)>>>31;return new o(v,R.h)}function G(R,_){var v=_>>5;_%=32;for(var w=R.g.length-v,S=[],T=0;T<w;T++)S[T]=0<_?R.i(T+v)>>>_|R.i(T+v+1)<<32-_:R.i(T+v);return new o(S,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,us=o}).apply(typeof _g<"u"?_g:typeof self<"u"?self:typeof window<"u"?window:{});var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xE,_o,kE,xc,Mh,DE,VE,OE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,p){return l==Array.prototype||l==Object.prototype||(l[f]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof dc=="object"&&dc];for(var f=0;f<l.length;++f){var p=l[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,f){if(f)e:{var p=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var k=l[y];if(!(k in p))break e;p=p[k]}l=l[l.length-1],y=p[l],f=f(y),f!=y&&f!=null&&e(p,l,{configurable:!0,writable:!0,value:f})}}function i(l,f){l instanceof String&&(l+="");var p=0,y=!1,k={next:function(){if(!y&&p<l.length){var M=p++;return{value:f(M,l[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}s("Array.prototype.values",function(l){return l||function(){return i(this,function(f,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function u(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,p){return l.call.apply(l.bind,arguments)}function d(l,f,p){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,y),l.apply(f,k)}}return function(){return l.apply(f,arguments)}}function m(l,f,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,m.apply(null,arguments)}function g(l,f){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function E(l,f){function p(){}p.prototype=f.prototype,l.aa=f.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(y,k,M){for(var J=Array(arguments.length-2),je=2;je<arguments.length;je++)J[je-2]=arguments[je];return f.prototype[k].apply(y,J)}}function b(l){const f=l.length;if(0<f){const p=Array(f);for(let y=0;y<f;y++)p[y]=l[y];return p}return[]}function C(l,f){for(let p=1;p<arguments.length;p++){const y=arguments[p];if(c(y)){const k=l.length||0,M=y.length||0;l.length=k+M;for(let J=0;J<M;J++)l[k+J]=y[J]}else l.push(y)}}class N{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function V(l){return/^[\s\xa0]*$/.test(l)}function x(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function L(l){return L[" "](l),l}L[" "]=function(){};var q=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function G(l,f,p){for(const y in l)f.call(p,l[y],y,l)}function R(l,f){for(const p in l)f.call(void 0,l[p],p,l)}function _(l){const f={};for(const p in l)f[p]=l[p];return f}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(l,f){let p,y;for(let k=1;k<arguments.length;k++){y=arguments[k];for(p in y)l[p]=y[p];for(let M=0;M<v.length;M++)p=v[M],Object.prototype.hasOwnProperty.call(y,p)&&(l[p]=y[p])}}function S(l){var f=1;l=l.split(":");const p=[];for(;0<f&&l.length;)p.push(l.shift()),f--;return l.length&&p.push(l.join(":")),p}function T(l){a.setTimeout(()=>{throw l},0)}function I(){var l=Te;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class de{constructor(){this.h=this.g=null}add(f,p){const y=ke.get();y.set(f,p),this.h?this.h.next=y:this.g=y,this.h=y}}var ke=new N(()=>new pe,l=>l.reset());class pe{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,he=!1,Te=new de,Ge=()=>{const l=a.Promise.resolve(void 0);Ie=()=>{l.then(ut)}};var ut=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(p){T(p)}var f=ke;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}he=!1};function Xe(){this.s=this.s,this.C=this.C}Xe.prototype.s=!1,Xe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Xe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ze(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Ze.prototype.h=function(){this.defaultPrevented=!0};var tr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,f),a.removeEventListener("test",p,f)}catch{}return l}();function In(l,f){if(Ze.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(q){e:{try{L(f.nodeName);var k=!0;break e}catch{}k=!1}k||(f=null)}}else p=="mouseover"?f=l.fromElement:p=="mouseout"&&(f=l.toElement);this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:_t[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&In.aa.h.call(this)}}E(In,Ze);var _t={2:"touch",3:"pen",4:"mouse"};In.prototype.h=function(){In.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var B="closure_listenable_"+(1e6*Math.random()|0),ne=0;function Z(l,f,p,y,k){this.listener=l,this.proxy=null,this.src=f,this.type=p,this.capture=!!y,this.ha=k,this.key=++ne,this.da=this.fa=!1}function oe(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Pe(l){this.src=l,this.g={},this.h=0}Pe.prototype.add=function(l,f,p,y,k){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var J=P(l,f,y,k);return-1<J?(f=l[J],p||(f.fa=!1)):(f=new Z(f,this.src,M,!!y,k),f.fa=p,l.push(f)),f};function A(l,f){var p=f.type;if(p in l.g){var y=l.g[p],k=Array.prototype.indexOf.call(y,f,void 0),M;(M=0<=k)&&Array.prototype.splice.call(y,k,1),M&&(oe(f),l.g[p].length==0&&(delete l.g[p],l.h--))}}function P(l,f,p,y){for(var k=0;k<l.length;++k){var M=l[k];if(!M.da&&M.listener==f&&M.capture==!!p&&M.ha==y)return k}return-1}var D="closure_lm_"+(1e6*Math.random()|0),U={};function j(l,f,p,y,k){if(y&&y.once)return W(l,f,p,y,k);if(Array.isArray(f)){for(var M=0;M<f.length;M++)j(l,f[M],p,y,k);return null}return p=we(p),l&&l[B]?l.K(f,p,u(y)?!!y.capture:!!y,k):z(l,f,p,!1,y,k)}function z(l,f,p,y,k,M){if(!f)throw Error("Invalid event type");var J=u(k)?!!k.capture:!!k,je=ae(l);if(je||(l[D]=je=new Pe(l)),p=je.add(f,p,y,J,M),p.proxy)return p;if(y=te(),p.proxy=y,y.src=l,y.listener=p,l.addEventListener)tr||(k=J),k===void 0&&(k=!1),l.addEventListener(f.toString(),y,k);else if(l.attachEvent)l.attachEvent(le(f.toString()),y);else if(l.addListener&&l.removeListener)l.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function te(){function l(p){return f.call(l.src,l.listener,p)}const f=se;return l}function W(l,f,p,y,k){if(Array.isArray(f)){for(var M=0;M<f.length;M++)W(l,f[M],p,y,k);return null}return p=we(p),l&&l[B]?l.L(f,p,u(y)?!!y.capture:!!y,k):z(l,f,p,!0,y,k)}function X(l,f,p,y,k){if(Array.isArray(f))for(var M=0;M<f.length;M++)X(l,f[M],p,y,k);else y=u(y)?!!y.capture:!!y,p=we(p),l&&l[B]?(l=l.i,f=String(f).toString(),f in l.g&&(M=l.g[f],p=P(M,p,y,k),-1<p&&(oe(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete l.g[f],l.h--)))):l&&(l=ae(l))&&(f=l.g[f.toString()],l=-1,f&&(l=P(f,p,y,k)),(p=-1<l?f[l]:null)&&K(p))}function K(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[B])A(f.i,l);else{var p=l.type,y=l.proxy;f.removeEventListener?f.removeEventListener(p,y,l.capture):f.detachEvent?f.detachEvent(le(p),y):f.addListener&&f.removeListener&&f.removeListener(y),(p=ae(f))?(A(p,l),p.h==0&&(p.src=null,f[D]=null)):oe(l)}}}function le(l){return l in U?U[l]:U[l]="on"+l}function se(l,f){if(l.da)l=!0;else{f=new In(f,this);var p=l.listener,y=l.ha||l.src;l.fa&&K(l),l=p.call(y,f)}return l}function ae(l){return l=l[D],l instanceof Pe?l:null}var fe="__closure_events_fn_"+(1e9*Math.random()>>>0);function we(l){return typeof l=="function"?l:(l[fe]||(l[fe]=function(f){return l.handleEvent(f)}),l[fe])}function ye(){Xe.call(this),this.i=new Pe(this),this.M=this,this.F=null}E(ye,Xe),ye.prototype[B]=!0,ye.prototype.removeEventListener=function(l,f,p,y){X(this,l,f,p,y)};function _e(l,f){var p,y=l.F;if(y)for(p=[];y;y=y.F)p.push(y);if(l=l.M,y=f.type||f,typeof f=="string")f=new Ze(f,l);else if(f instanceof Ze)f.target=f.target||l;else{var k=f;f=new Ze(y,l),w(f,k)}if(k=!0,p)for(var M=p.length-1;0<=M;M--){var J=f.g=p[M];k=qe(J,y,!0,f)&&k}if(J=f.g=l,k=qe(J,y,!0,f)&&k,k=qe(J,y,!1,f)&&k,p)for(M=0;M<p.length;M++)J=f.g=p[M],k=qe(J,y,!1,f)&&k}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var p=l.g[f],y=0;y<p.length;y++)oe(p[y]);delete l.g[f],l.h--}}this.F=null},ye.prototype.K=function(l,f,p,y){return this.i.add(String(l),f,!1,p,y)},ye.prototype.L=function(l,f,p,y){return this.i.add(String(l),f,!0,p,y)};function qe(l,f,p,y){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var k=!0,M=0;M<f.length;++M){var J=f[M];if(J&&!J.da&&J.capture==p){var je=J.listener,wt=J.ha||J.src;J.fa&&A(l.i,J),k=je.call(wt,y)!==!1&&k}}return k&&!y.defaultPrevented}function Bt(l,f,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Nn(l){l.g=Bt(()=>{l.g=null,l.i&&(l.i=!1,Nn(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class ja extends Xe{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Nn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ln(l){Xe.call(this),this.h=l,this.g={}}E(ln,Xe);var Ui=[];function St(l){G(l.g,function(f,p){this.g.hasOwnProperty(p)&&K(f)},l),l.g={}}ln.prototype.N=function(){ln.aa.N.call(this),St(this)},ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jt=a.JSON.stringify,$a=a.JSON.parse,Ob=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Eu(){}Eu.prototype.h=null;function Pm(l){return l.h||(l.h=l.i())}function Cm(){}var Bi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Iu(){Ze.call(this,"d")}E(Iu,Ze);function wu(){Ze.call(this,"c")}E(wu,Ze);var $r={},xm=null;function za(){return xm=xm||new ye}$r.La="serverreachability";function km(l){Ze.call(this,$r.La,l)}E(km,Ze);function ji(l){const f=za();_e(f,new km(f))}$r.STAT_EVENT="statevent";function Dm(l,f){Ze.call(this,$r.STAT_EVENT,l),this.stat=f}E(Dm,Ze);function Dt(l){const f=za();_e(f,new Dm(f,l))}$r.Ma="timingevent";function Vm(l,f){Ze.call(this,$r.Ma,l),this.size=f}E(Vm,Ze);function $i(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function zi(){this.g=!0}zi.prototype.xa=function(){this.g=!1};function Nb(l,f,p,y,k,M){l.info(function(){if(l.g)if(M)for(var J="",je=M.split("&"),wt=0;wt<je.length;wt++){var Ve=je[wt].split("=");if(1<Ve.length){var Pt=Ve[0];Ve=Ve[1];var Ct=Pt.split("_");J=2<=Ct.length&&Ct[1]=="type"?J+(Pt+"="+Ve+"&"):J+(Pt+"=redacted&")}}else J=null;else J=M;return"XMLHTTP REQ ("+y+") [attempt "+k+"]: "+f+`
`+p+`
`+J})}function Mb(l,f,p,y,k,M,J){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+k+"]: "+f+`
`+p+`
`+M+" "+J})}function Os(l,f,p,y){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Fb(l,p)+(y?" "+y:"")})}function Lb(l,f){l.info(function(){return"TIMEOUT: "+f})}zi.prototype.info=function(){};function Fb(l,f){if(!l.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var y=p[l];if(!(2>y.length)){var k=y[1];if(Array.isArray(k)&&!(1>k.length)){var M=k[0];if(M!="noop"&&M!="stop"&&M!="close")for(var J=1;J<k.length;J++)k[J]=""}}}}return jt(p)}catch{return f}}var qa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Om={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tu;function Ka(){}E(Ka,Eu),Ka.prototype.g=function(){return new XMLHttpRequest},Ka.prototype.i=function(){return{}},Tu=new Ka;function nr(l,f,p,y){this.j=l,this.i=f,this.l=p,this.R=y||1,this.U=new ln(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nm}function Nm(){this.i=null,this.g="",this.h=!1}var Mm={},bu={};function Au(l,f,p){l.L=1,l.v=Qa(Mn(f)),l.m=p,l.P=!0,Lm(l,null)}function Lm(l,f){l.F=Date.now(),Ha(l),l.A=Mn(l.v);var p=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),Jm(p.i,"t",y),l.C=0,p=l.j.J,l.h=new Nm,l.g=pp(l.j,p?f:null,!l.m),0<l.O&&(l.M=new ja(m(l.Y,l,l.g),l.O)),f=l.U,p=l.g,y=l.ca;var k="readystatechange";Array.isArray(k)||(k&&(Ui[0]=k.toString()),k=Ui);for(var M=0;M<k.length;M++){var J=j(p,k[M],y||f.handleEvent,!1,f.h||f);if(!J)break;f.g[J.key]=J}f=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),ji(),Nb(l.i,l.u,l.A,l.l,l.R,l.m)}nr.prototype.ca=function(l){l=l.target;const f=this.M;f&&Ln(l)==3?f.j():this.Y(l)},nr.prototype.Y=function(l){try{if(l==this.g)e:{const Ct=Ln(this.g);var f=this.g.Ba();const Ls=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||sp(this.g)))){this.J||Ct!=4||f==7||(f==8||0>=Ls?ji(3):ji(2)),Ru(this);var p=this.g.Z();this.X=p;t:if(Fm(this)){var y=sp(this.g);l="";var k=y.length,M=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zr(this),qi(this);var J="";break t}this.h.i=new a.TextDecoder}for(f=0;f<k;f++)this.h.h=!0,l+=this.h.i.decode(y[f],{stream:!(M&&f==k-1)});y.length=0,this.h.g+=l,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=p==200,Mb(this.i,this.u,this.A,this.l,this.R,Ct,p),this.o){if(this.T&&!this.K){t:{if(this.g){var je,wt=this.g;if((je=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(je)){var Ve=je;break t}}Ve=null}if(p=Ve)Os(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Su(this,p);else{this.o=!1,this.s=3,Dt(12),zr(this),qi(this);break e}}if(this.P){p=!0;let un;for(;!this.J&&this.C<J.length;)if(un=Ub(this,J),un==bu){Ct==4&&(this.s=4,Dt(14),p=!1),Os(this.i,this.l,null,"[Incomplete Response]");break}else if(un==Mm){this.s=4,Dt(15),Os(this.i,this.l,J,"[Invalid Chunk]"),p=!1;break}else Os(this.i,this.l,un,null),Su(this,un);if(Fm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||J.length!=0||this.h.h||(this.s=1,Dt(16),p=!1),this.o=this.o&&p,!p)Os(this.i,this.l,J,"[Invalid Chunked Response]"),zr(this),qi(this);else if(0<J.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Vu(Pt),Pt.M=!0,Dt(11))}}else Os(this.i,this.l,J,null),Su(this,J);Ct==4&&zr(this),this.o&&!this.J&&(Ct==4?hp(this.j,this):(this.o=!1,Ha(this)))}else n0(this.g),p==400&&0<J.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),zr(this),qi(this)}}}catch{}finally{}};function Fm(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Ub(l,f){var p=l.C,y=f.indexOf(`
`,p);return y==-1?bu:(p=Number(f.substring(p,y)),isNaN(p)?Mm:(y+=1,y+p>f.length?bu:(f=f.slice(y,y+p),l.C=y+p,f)))}nr.prototype.cancel=function(){this.J=!0,zr(this)};function Ha(l){l.S=Date.now()+l.I,Um(l,l.I)}function Um(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=$i(m(l.ba,l),f)}function Ru(l){l.B&&(a.clearTimeout(l.B),l.B=null)}nr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Lb(this.i,this.A),this.L!=2&&(ji(),Dt(17)),zr(this),this.s=2,qi(this)):Um(this,this.S-l)};function qi(l){l.j.G==0||l.J||hp(l.j,l)}function zr(l){Ru(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,St(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Su(l,f){try{var p=l.j;if(p.G!=0&&(p.g==l||Pu(p.h,l))){if(!l.K&&Pu(p.h,l)&&p.G==3){try{var y=p.Da.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var k=y;if(k[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)tc(p),Za(p);else break e;Du(p),Dt(18)}}else p.za=k[1],0<p.za-p.T&&37500>k[2]&&p.F&&p.v==0&&!p.C&&(p.C=$i(m(p.Za,p),6e3));if(1>=$m(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Kr(p,11)}else if((l.K||p.g==l)&&tc(p),!V(f))for(k=p.Da.g.parse(f),f=0;f<k.length;f++){let Ve=k[f];if(p.T=Ve[0],Ve=Ve[1],p.G==2)if(Ve[0]=="c"){p.K=Ve[1],p.ia=Ve[2];const Pt=Ve[3];Pt!=null&&(p.la=Pt,p.j.info("VER="+p.la));const Ct=Ve[4];Ct!=null&&(p.Aa=Ct,p.j.info("SVER="+p.Aa));const Ls=Ve[5];Ls!=null&&typeof Ls=="number"&&0<Ls&&(y=1.5*Ls,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;const un=l.g;if(un){const rc=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rc){var M=y.h;M.g||rc.indexOf("spdy")==-1&&rc.indexOf("quic")==-1&&rc.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Cu(M,M.h),M.h=null))}if(y.D){const Ou=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Ou&&(y.ya=Ou,Ke(y.I,y.D,Ou))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var J=l;if(y.qa=mp(y,y.J?y.ia:null,y.W),J.K){zm(y.h,J);var je=J,wt=y.L;wt&&(je.I=wt),je.B&&(Ru(je),Ha(je)),y.g=J}else lp(y);0<p.i.length&&ec(p)}else Ve[0]!="stop"&&Ve[0]!="close"||Kr(p,7);else p.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Kr(p,7):ku(p):Ve[0]!="noop"&&p.l&&p.l.ta(Ve),p.v=0)}}ji(4)}catch{}}var Bb=class{constructor(l,f){this.g=l,this.map=f}};function Bm(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function $m(l){return l.h?1:l.g?l.g.size:0}function Pu(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Cu(l,f){l.g?l.g.add(f):l.h=f}function zm(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Bm.prototype.cancel=function(){if(this.i=qm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function qm(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const p of l.g.values())f=f.concat(p.D);return f}return b(l.i)}function jb(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],p=l.length,y=0;y<p;y++)f.push(l[y]);return f}f=[],p=0;for(y in l)f[p++]=l[y];return f}function $b(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var p=0;p<l;p++)f.push(p);return f}f=[],p=0;for(const y in l)f[p++]=y;return f}}}function Km(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var p=$b(l),y=jb(l),k=y.length,M=0;M<k;M++)f.call(void 0,y[M],p&&p[M],l)}var Hm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zb(l,f){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var y=l[p].indexOf("="),k=null;if(0<=y){var M=l[p].substring(0,y);k=l[p].substring(y+1)}else M=l[p];f(M,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function qr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof qr){this.h=l.h,Ga(this,l.j),this.o=l.o,this.g=l.g,Wa(this,l.s),this.l=l.l;var f=l.i,p=new Gi;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),Gm(this,p),this.m=l.m}else l&&(f=String(l).match(Hm))?(this.h=!1,Ga(this,f[1]||"",!0),this.o=Ki(f[2]||""),this.g=Ki(f[3]||"",!0),Wa(this,f[4]),this.l=Ki(f[5]||"",!0),Gm(this,f[6]||"",!0),this.m=Ki(f[7]||"")):(this.h=!1,this.i=new Gi(null,this.h))}qr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Hi(f,Wm,!0),":");var p=this.g;return(p||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Hi(f,Wm,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Hi(p,p.charAt(0)=="/"?Hb:Kb,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Hi(p,Wb)),l.join("")};function Mn(l){return new qr(l)}function Ga(l,f,p){l.j=p?Ki(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Wa(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Gm(l,f,p){f instanceof Gi?(l.i=f,Qb(l.i,l.h)):(p||(f=Hi(f,Gb)),l.i=new Gi(f,l.h))}function Ke(l,f,p){l.i.set(f,p)}function Qa(l){return Ke(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ki(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Hi(l,f,p){return typeof l=="string"?(l=encodeURI(l).replace(f,qb),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function qb(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Wm=/[#\/\?@]/g,Kb=/[#\?:]/g,Hb=/[#\?]/g,Gb=/[#\?@]/g,Wb=/#/g;function Gi(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function rr(l){l.g||(l.g=new Map,l.h=0,l.i&&zb(l.i,function(f,p){l.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}t=Gi.prototype,t.add=function(l,f){rr(this),this.i=null,l=Ns(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(f),this.h+=1,this};function Qm(l,f){rr(l),f=Ns(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Ym(l,f){return rr(l),f=Ns(l,f),l.g.has(f)}t.forEach=function(l,f){rr(this),this.g.forEach(function(p,y){p.forEach(function(k){l.call(f,k,y,this)},this)},this)},t.na=function(){rr(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let y=0;y<f.length;y++){const k=l[y];for(let M=0;M<k.length;M++)p.push(f[y])}return p},t.V=function(l){rr(this);let f=[];if(typeof l=="string")Ym(this,l)&&(f=f.concat(this.g.get(Ns(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)f=f.concat(l[p])}return f},t.set=function(l,f){return rr(this),this.i=null,l=Ns(this,l),Ym(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Jm(l,f,p){Qm(l,f),0<p.length&&(l.i=null,l.g.set(Ns(l,f),b(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var y=f[p];const M=encodeURIComponent(String(y)),J=this.V(y);for(y=0;y<J.length;y++){var k=M;J[y]!==""&&(k+="="+encodeURIComponent(String(J[y]))),l.push(k)}}return this.i=l.join("&")};function Ns(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function Qb(l,f){f&&!l.j&&(rr(l),l.i=null,l.g.forEach(function(p,y){var k=y.toLowerCase();y!=k&&(Qm(this,y),Jm(this,k,p))},l)),l.j=f}function Yb(l,f){const p=new zi;if(a.Image){const y=new Image;y.onload=g(sr,p,"TestLoadImage: loaded",!0,f,y),y.onerror=g(sr,p,"TestLoadImage: error",!1,f,y),y.onabort=g(sr,p,"TestLoadImage: abort",!1,f,y),y.ontimeout=g(sr,p,"TestLoadImage: timeout",!1,f,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else f(!1)}function Jb(l,f){const p=new zi,y=new AbortController,k=setTimeout(()=>{y.abort(),sr(p,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:y.signal}).then(M=>{clearTimeout(k),M.ok?sr(p,"TestPingServer: ok",!0,f):sr(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(k),sr(p,"TestPingServer: error",!1,f)})}function sr(l,f,p,y,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),y(p)}catch{}}function Xb(){this.g=new Ob}function Zb(l,f,p){const y=p||"";try{Km(l,function(k,M){let J=k;u(k)&&(J=jt(k)),f.push(y+M+"="+encodeURIComponent(J))})}catch(k){throw f.push(y+"type="+encodeURIComponent("_badmap")),k}}function Ya(l){this.l=l.Ub||null,this.j=l.eb||!1}E(Ya,Eu),Ya.prototype.g=function(){return new Ja(this.l,this.j)},Ya.prototype.i=function(l){return function(){return l}}({});function Ja(l,f){ye.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Ja,ye),t=Ja.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Qi(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wi(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Qi(this)),this.g&&(this.readyState=3,Qi(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xm(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xm(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Wi(this):Qi(this),this.readyState==3&&Xm(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Wi(this))},t.Qa=function(l){this.g&&(this.response=l,Wi(this))},t.ga=function(){this.g&&Wi(this)};function Wi(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Qi(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=f.next();return l.join(`\r
`)};function Qi(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ja.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Zm(l){let f="";return G(l,function(p,y){f+=y,f+=":",f+=p,f+=`\r
`}),f}function xu(l,f,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=Zm(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ke(l,f,p))}function nt(l){ye.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(nt,ye);var e0=/^https?$/i,t0=["POST","PUT"];t=nt.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tu.g(),this.v=this.o?Pm(this.o):Pm(Tu),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(M){ep(this,M);return}if(l=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var k in y)p.set(k,y[k]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())p.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),k=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(t0,f,void 0))||y||k||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,J]of p)this.g.setRequestHeader(M,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rp(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){ep(this,M)}};function ep(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,tp(l),Xa(l)}function tp(l){l.A||(l.A=!0,_e(l,"complete"),_e(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,_e(this,"complete"),_e(this,"abort"),Xa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xa(this,!0)),nt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?np(this):this.bb())},t.bb=function(){np(this)};function np(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Ln(l)!=4||l.Z()!=2)){if(l.u&&Ln(l)==4)Bt(l.Ea,0,l);else if(_e(l,"readystatechange"),Ln(l)==4){l.h=!1;try{const J=l.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var y;if(y=J===0){var k=String(l.D).match(Hm)[1]||null;!k&&a.self&&a.self.location&&(k=a.self.location.protocol.slice(0,-1)),y=!e0.test(k?k.toLowerCase():"")}p=y}if(p)_e(l,"complete"),_e(l,"success");else{l.m=6;try{var M=2<Ln(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",tp(l)}}finally{Xa(l)}}}}function Xa(l,f){if(l.g){rp(l);const p=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||_e(l,"ready");try{p.onreadystatechange=y}catch{}}}function rp(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Ln(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),$a(f)}};function sp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function n0(l){const f={};l=(l.g&&2<=Ln(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<l.length;y++){if(V(l[y]))continue;var p=S(l[y]);const k=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const M=f[k]||[];f[k]=M,M.push(p)}R(f,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yi(l,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||f}function ip(l){this.Aa=0,this.i=[],this.j=new zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yi("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yi("baseRetryDelayMs",5e3,l),this.cb=Yi("retryDelaySeedMs",1e4,l),this.Wa=Yi("forwardChannelMaxRetries",2,l),this.wa=Yi("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Bm(l&&l.concurrentRequestLimit),this.Da=new Xb,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ip.prototype,t.la=8,t.G=1,t.connect=function(l,f,p,y){Dt(0),this.W=l,this.H=f||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=mp(this,null,this.W),ec(this)};function ku(l){if(op(l),l.G==3){var f=l.U++,p=Mn(l.I);if(Ke(p,"SID",l.K),Ke(p,"RID",f),Ke(p,"TYPE","terminate"),Ji(l,p),f=new nr(l,l.j,f),f.L=2,f.v=Qa(Mn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=f.v,p=!0),p||(f.g=pp(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ha(f)}fp(l)}function Za(l){l.g&&(Vu(l),l.g.cancel(),l.g=null)}function op(l){Za(l),l.u&&(a.clearTimeout(l.u),l.u=null),tc(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function ec(l){if(!jm(l.h)&&!l.s){l.s=!0;var f=l.Ga;Ie||Ge(),he||(Ie(),he=!0),Te.add(f,l),l.B=0}}function r0(l,f){return $m(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=$i(m(l.Ga,l,f),dp(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const k=new nr(this,this.j,l);let M=this.o;if(this.S&&(M?(M=_(M),w(M,this.S)):M=this.S),this.m!==null||this.O||(k.H=M,M=null),this.P)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(f+=y,4096<f){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=cp(this,k,f),p=Mn(this.I),Ke(p,"RID",l),Ke(p,"CVER",22),this.D&&Ke(p,"X-HTTP-Session-Id",this.D),Ji(this,p),M&&(this.O?f="headers="+encodeURIComponent(String(Zm(M)))+"&"+f:this.m&&xu(p,this.m,M)),Cu(this.h,k),this.Ua&&Ke(p,"TYPE","init"),this.P?(Ke(p,"$req",f),Ke(p,"SID","null"),k.T=!0,Au(k,p,null)):Au(k,p,f),this.G=2}}else this.G==3&&(l?ap(this,l):this.i.length==0||jm(this.h)||ap(this))};function ap(l,f){var p;f?p=f.l:p=l.U++;const y=Mn(l.I);Ke(y,"SID",l.K),Ke(y,"RID",p),Ke(y,"AID",l.T),Ji(l,y),l.m&&l.o&&xu(y,l.m,l.o),p=new nr(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),f&&(l.i=f.D.concat(l.i)),f=cp(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Cu(l.h,p),Au(p,y,f)}function Ji(l,f){l.H&&G(l.H,function(p,y){Ke(f,y,p)}),l.l&&Km({},function(p,y){Ke(f,y,p)})}function cp(l,f,p){p=Math.min(l.i.length,p);var y=l.l?m(l.l.Na,l.l,l):null;e:{var k=l.i;let M=-1;for(;;){const J=["count="+p];M==-1?0<p?(M=k[0].g,J.push("ofs="+M)):M=0:J.push("ofs="+M);let je=!0;for(let wt=0;wt<p;wt++){let Ve=k[wt].g;const Pt=k[wt].map;if(Ve-=M,0>Ve)M=Math.max(0,k[wt].g-100),je=!1;else try{Zb(Pt,J,"req"+Ve+"_")}catch{y&&y(Pt)}}if(je){y=J.join("&");break e}}}return l=l.i.splice(0,p),f.D=l,y}function lp(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Ie||Ge(),he||(Ie(),he=!0),Te.add(f,l),l.v=0}}function Du(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=$i(m(l.Fa,l),dp(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,up(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=$i(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),Za(this),up(this))};function Vu(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function up(l){l.g=new nr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Mn(l.qa);Ke(f,"RID","rpc"),Ke(f,"SID",l.K),Ke(f,"AID",l.T),Ke(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ke(f,"TO",l.ja),Ke(f,"TYPE","xmlhttp"),Ji(l,f),l.m&&l.o&&xu(f,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Qa(Mn(f)),p.m=null,p.P=!0,Lm(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Za(this),Du(this),Dt(19))};function tc(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function hp(l,f){var p=null;if(l.g==f){tc(l),Vu(l),l.g=null;var y=2}else if(Pu(l.h,f))p=f.D,zm(l.h,f),y=1;else return;if(l.G!=0){if(f.o)if(y==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var k=l.B;y=za(),_e(y,new Vm(y,p)),ec(l)}else lp(l);else if(k=f.s,k==3||k==0&&0<f.X||!(y==1&&r0(l,f)||y==2&&Du(l)))switch(p&&0<p.length&&(f=l.h,f.i=f.i.concat(p)),k){case 1:Kr(l,5);break;case 4:Kr(l,10);break;case 3:Kr(l,6);break;default:Kr(l,2)}}}function dp(l,f){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*f}function Kr(l,f){if(l.j.info("Error code "+f),f==2){var p=m(l.fb,l),y=l.Xa;const k=!y;y=new qr(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ga(y,"https"),Qa(y),k?Yb(y.toString(),p):Jb(y.toString(),p)}else Dt(2);l.G=0,l.l&&l.l.sa(f),fp(l),op(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function fp(l){if(l.G=0,l.ka=[],l.l){const f=qm(l.h);(f.length!=0||l.i.length!=0)&&(C(l.ka,f),C(l.ka,l.i),l.h.i.length=0,b(l.i),l.i.length=0),l.l.ra()}}function mp(l,f,p){var y=p instanceof qr?Mn(p):new qr(p);if(y.g!="")f&&(y.g=f+"."+y.g),Wa(y,y.s);else{var k=a.location;y=k.protocol,f=f?f+"."+k.hostname:k.hostname,k=+k.port;var M=new qr(null);y&&Ga(M,y),f&&(M.g=f),k&&Wa(M,k),p&&(M.l=p),y=M}return p=l.D,f=l.ya,p&&f&&Ke(y,p,f),Ke(y,"VER",l.la),Ji(l,y),y}function pp(l,f,p){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new nt(new Ya({eb:p})):new nt(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gp(){}t=gp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nc(){}nc.prototype.g=function(l,f){return new Gt(l,f)};function Gt(l,f){ye.call(this),this.g=new ip(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!V(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!V(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Ms(this)}E(Gt,ye),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){ku(this.g)},Gt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=jt(l),l=p);f.i.push(new Bb(f.Ya++,l)),f.G==3&&ec(f)},Gt.prototype.N=function(){this.g.l=null,delete this.j,ku(this.g),delete this.g,Gt.aa.N.call(this)};function _p(l){Iu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const p in f){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}E(_p,Iu);function yp(){wu.call(this),this.status=1}E(yp,wu);function Ms(l){this.g=l}E(Ms,gp),Ms.prototype.ua=function(){_e(this.g,"a")},Ms.prototype.ta=function(l){_e(this.g,new _p(l))},Ms.prototype.sa=function(l){_e(this.g,new yp)},Ms.prototype.ra=function(){_e(this.g,"b")},nc.prototype.createWebChannel=nc.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,OE=function(){return new nc},VE=function(){return za()},DE=$r,Mh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qa.NO_ERROR=0,qa.TIMEOUT=8,qa.HTTP_ERROR=6,xc=qa,Om.COMPLETE="complete",kE=Om,Cm.EventType=Bi,Bi.OPEN="a",Bi.CLOSE="b",Bi.ERROR="c",Bi.MESSAGE="d",ye.prototype.listen=ye.prototype.K,_o=Cm,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,xE=nt}).apply(typeof dc<"u"?dc:typeof self<"u"?self:typeof window<"u"?window:{});const yg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Di="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new rf("@firebase/firestore");function Gs(){return gs.logLevel}function H(t,...e){if(gs.logLevel<=Re.DEBUG){const n=e.map(af);gs.debug(`Firestore (${Di}): ${t}`,...n)}}function Nt(t,...e){if(gs.logLevel<=Re.ERROR){const n=e.map(af);gs.error(`Firestore (${Di}): ${t}`,...n)}}function di(t,...e){if(gs.logLevel<=Re.WARN){const n=e.map(af);gs.warn(`Firestore (${Di}): ${t}`,...n)}}function af(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${Di}) INTERNAL ASSERTION FAILED: `+t;throw Nt(e),new Error(e)}function ie(t,e){t||re()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends On{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class xP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kP{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ie(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new mn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new mn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new mn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ie(typeof r.accessToken=="string"),new NE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string"),new Tt(e)}}class DP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class VP{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new DP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ie(this.o===void 0);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ie(typeof n.token=="string"),this.R=n.token,new OP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=MP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function fi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function LE(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new tt(0,0))}static max(){return new ce(new tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Yo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ne extends Yo{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const LP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends Yo{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return LP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new et(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ne.fromString(e))}static fromName(e){return new ee(Ne.fromString(e).popFirst(5))}static empty(){return new ee(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ne(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Lh(t){return t.fields.find(e=>e.kind===2)}function Zr(t){return t.fields.filter(e=>e.kind!==2)}nl.UNKNOWN_ID=-1;class kc{constructor(e,n){this.fieldPath=e,this.kind=n}}class Jo{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Jo(0,Zt.min())}}function FP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new tt(n+1,0):new tt(n,r));return new Zt(s,ee.empty(),e)}function FE(t){return new Zt(t.readTime,t.key,-1)}class Zt{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zt(ce.min(),ee.empty(),-1)}static max(){return new Zt(ce.max(),ee.empty(),-1)}}function cf(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ps(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==UE)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(s=>s?O.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new O((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new O((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new mn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Po(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=lf(r.target.error);this.V.reject(new Po(e,s))}}static open(e,n,r,s){try{return new Gl(n,e.transaction(s,r))}catch(i){throw new Po(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(H("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new BP(n)}}class Pr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Pr.S(pt())===12.2&&Nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return H("SimpleDb","Removing database:",e),rs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!TE())return!1;if(Pr.v())return!0;const e=pt(),n=Pr.S(e),r=0<n&&n<10,s=jE(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(H("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Po(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new Q(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Q(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Po(e,o))},s.onupgradeneeded=i=>{H("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{H("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Gl.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),O.reject(u))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){const c=a,u=c.name!=="FirebaseError"&&o<3;if(H("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function jE(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class UP{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return rs(this.B.delete())}}class Po extends Q{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ur(t){return t.name==="IndexedDbTransactionError"}class BP{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(H("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(H("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rs(r)}add(e){return H("SimpleDb","ADD",this.store.name,e,e),rs(this.store.add(e))}get(e){return rs(this.store.get(e)).next(n=>(n===void 0&&(n=null),H("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return H("SimpleDb","DELETE",this.store.name,e),rs(this.store.delete(e))}count(){return H("SimpleDb","COUNT",this.store.name),rs(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new O((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(r),o=[];return this.W(i,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new O((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){H("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new O((r,s)=>{n.onerror=i=>{const o=lf(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new O((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new UP(a),u=n(a.primaryKey,a.value,c);if(u instanceof O){const h=u.catch(d=>(c.done(),O.reject(d)));r.push(h)}c.isDone?s():c.K===null?a.continue():a.continue(c.K)}}).next(()=>O.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function rs(t){return new O((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=lf(r.target.error);n(s)}})}let vg=!1;function lf(t){const e=Pr.S(pt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vg||(vg=!0,setTimeout(()=>{throw r},0)),r}}return t}class jP{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){H("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{H("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Ur(n)?H("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Ps(n)}await this.X(6e4)})}}class $P{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return O.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return H("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(a=>(H("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=FE(i);cf(o,r)>0&&(r=o)}),new Zt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}nn.oe=-1;function Ea(t){return t==null}function Xo(t){return t===0&&1/t==-1/0}function zP(t){return typeof t=="number"&&Number.isInteger(t)&&!Xo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Eg(e)),e=qP(t.get(n),e);return Eg(e)}function qP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function Eg(t){return t+""}function An(t){const e=t.length;if(ie(e>=2),e===2)return ie(t.charAt(0)===""&&t.charAt(1)===""),Ne.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&re(),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:re()}i=o+2}return new Ne(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t,e){return[t,Lt(e)]}function $E(t,e,n){return[t,Lt(e),n]}const KP={},HP=["prefixPath","collectionGroup","readTime","documentId"],GP=["prefixPath","collectionGroup","documentId"],WP=["collectionGroup","readTime","prefixPath","documentId"],QP=["canonicalId","targetId"],YP=["targetId","path"],JP=["path","targetId"],XP=["collectionId","parent"],ZP=["indexId","uid"],eC=["uid","sequenceNumber"],tC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nC=["indexId","uid","orderedDocumentKey"],rC=["userId","collectionPath","documentId"],sC=["userId","collectionPath","largestBatchId"],iC=["userId","collectionGroup","largestBatchId"],zE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oC=[...zE,"documentOverlays"],qE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KE=qE,uf=[...KE,"indexConfiguration","indexState","indexEntries"],aC=uf,cC=[...uf,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends BE{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function gt(t,e){const n=ge(t);return Pr.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||bt.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fc(this.root,e,this.comparator,!0)}}class fc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??bt.RED,this.left=s??bt.EMPTY,this.right=i??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new bt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return bt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,s,i){return this}insert(e,n,r){return new bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tg(this.data.getIterator())}getIteratorFrom(e){return new Tg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ue)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ue(this.comparator);return n.data=e,n}}class Tg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bs(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new Ue(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new GE("Invalid base64 string: "+i):i}}(e);return new dt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const lC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jn(t){if(ie(!!t),typeof t=="string"){let e=0;const n=lC.exec(t);if(ie(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Nr(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function df(t){const e=t.mapValue.fields.__previous_value__;return hf(e)?df(e):e}function Zo(t){const e=Jn(t.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n,r,s,i,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class _s{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _s("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _s&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vc={nullValue:"NULL_VALUE"};function ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hf(t)?4:WE(t)?9007199254740991:Wl(t)?10:11:re()}function kn(t,e){if(t===e)return!0;const n=ys(t);if(n!==ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zo(t).isEqual(Zo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Jn(s.timestampValue),a=Jn(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Nr(s.bytesValue).isEqual(Nr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return We(s.geoPointValue.latitude)===We(i.geoPointValue.latitude)&&We(s.geoPointValue.longitude)===We(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return We(s.integerValue)===We(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=We(s.doubleValue),a=We(i.doubleValue);return o===a?Xo(o)===Xo(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return fi(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(wg(o)!==wg(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!kn(o[c],a[c])))return!1;return!0}(t,e);default:return re()}}function ea(t,e){return(t.values||[]).find(n=>kn(n,e))!==void 0}function Mr(t,e){if(t===e)return 0;const n=ys(t),r=ys(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=We(i.integerValue||i.doubleValue),c=We(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return bg(t.timestampValue,e.timestampValue);case 4:return bg(Zo(t),Zo(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Nr(i),c=Nr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=ve(a[u],c[u]);if(h!==0)return h}return ve(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ve(We(i.latitude),We(o.latitude));return a!==0?a:ve(We(i.longitude),We(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ag(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,u,h;const d=i.fields||{},m=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,E=(c=m.value)===null||c===void 0?void 0:c.arrayValue,b=ve(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:Ag(g,E)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ir.mapValue&&o===Ir.mapValue)return 0;if(i===Ir.mapValue)return 1;if(o===Ir.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){const m=ve(c[d],h[d]);if(m!==0)return m;const g=Mr(a[c[d]],u[h[d]]);if(g!==0)return g}return ve(c.length,h.length)}(t.mapValue,e.mapValue);default:throw re()}}function bg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=Jn(t),r=Jn(e),s=ve(n.seconds,r.seconds);return s!==0?s:ve(n.nanos,r.nanos)}function Ag(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Mr(n[s],r[s]);if(i)return i}return ve(n.length,r.length)}function mi(t){return Uh(t)}function Uh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Nr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Uh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Uh(n.fields[o])}`;return s+"}"}(t.mapValue):re()}function ta(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Bh(t){return!!t&&"integerValue"in t}function na(t){return!!t&&"arrayValue"in t}function Rg(t){return!!t&&"nullValue"in t}function Sg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Oc(t){return!!t&&"mapValue"in t}function Wl(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Co(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Cs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Co(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Co(t.arrayValue.values[n]);return e}return Object.assign({},t)}function WE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const QE={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function hC(t){return"nullValue"in t?Vc:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ta(_s.empty(),ee.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Wl(t)?QE:{mapValue:{}}:re()}function dC(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ta(_s.empty(),ee.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?QE:"mapValue"in t?Wl(t)?{mapValue:{}}:Ir:re()}function Pg(t,e){const n=Mr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Cg(t,e){const n=Mr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Oc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Co(n)}setAll(e){let n=et.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Co(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Oc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Oc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Cs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(Co(this.value))}}function YE(t){const e=[];return Cs(t.fields,(n,r)=>{const s=new et([n]);if(Oc(r)){const i=YE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Qe(e,0,ce.min(),ce.min(),ce.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new Qe(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Qe(e,2,n,ce.min(),ce.min(),At.empty(),0)}static newUnknownDocument(e,n){return new Qe(e,3,n,ce.min(),ce.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n){this.position=e,this.inclusive=n}}function xg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=Mr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function kg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n="asc"){this.field=e,this.dir=n}}function fC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{}class Se extends JE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mC(e,n,r):n==="array-contains"?new _C(e,r):n==="in"?new rI(e,r):n==="not-in"?new yC(e,r):n==="array-contains-any"?new vC(e,r):new Se(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pC(e,r):new gC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Mr(n,this.value)):n!==null&&ys(this.value)===ys(n)&&this.matchesComparison(Mr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Le extends JE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Le(e,n)}matches(e){return gi(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function gi(t){return t.op==="and"}function jh(t){return t.op==="or"}function ff(t){return XE(t)&&gi(t)}function XE(t){for(const e of t.filters)if(e instanceof Le)return!1;return!0}function $h(t){if(t instanceof Se)return t.field.canonicalString()+t.op.toString()+mi(t.value);if(ff(t))return t.filters.map(e=>$h(e)).join(",");{const e=t.filters.map(n=>$h(n)).join(",");return`${t.op}(${e})`}}function ZE(t,e){return t instanceof Se?function(r,s){return s instanceof Se&&r.op===s.op&&r.field.isEqual(s.field)&&kn(r.value,s.value)}(t,e):t instanceof Le?function(r,s){return s instanceof Le&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&ZE(o,s.filters[a]),!0):!1}(t,e):void re()}function eI(t,e){const n=t.filters.concat(e);return Le.create(n,t.op)}function tI(t){return t instanceof Se?function(n){return`${n.field.canonicalString()} ${n.op} ${mi(n.value)}`}(t):t instanceof Le?function(n){return n.op.toString()+" {"+n.getFilters().map(tI).join(" ,")+"}"}(t):"Filter"}class mC extends Se{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class pC extends Se{constructor(e,n){super(e,"in",n),this.keys=nI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gC extends Se{constructor(e,n){super(e,"not-in",n),this.keys=nI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class _C extends Se{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return na(n)&&ea(n.arrayValue,this.value)}}class rI extends Se{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ea(this.value.arrayValue,n)}}class yC extends Se{constructor(e,n){super(e,"not-in",n)}matches(e){if(ea(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ea(this.value.arrayValue,n)}}class vC extends Se{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!na(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ea(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function zh(t,e=null,n=[],r=[],s=null,i=null,o=null){return new EC(t,e,n,r,s,i,o)}function vs(t){const e=ge(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$h(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ea(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>mi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>mi(r)).join(",")),e.ue=n}return e.ue}function Ia(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kg(t.startAt,e.startAt)&&kg(t.endAt,e.endAt)}function sl(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function il(t,e){return t.filters.filter(n=>n instanceof Se&&n.field.isEqual(e))}function Dg(t,e,n){let r=Vc,s=!0;for(const i of il(t,e)){let o=Vc,a=!0;switch(i.op){case"<":case"<=":o=hC(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Vc}Pg({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Pg({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Vg(t,e,n){let r=Ir,s=!0;for(const i of il(t,e)){let o=Ir,a=!0;switch(i.op){case">=":case">":o=dC(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Ir}Cg({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Cg({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function IC(t,e,n,r,s,i,o,a){return new wa(t,e,n,r,s,i,o,a)}function Ta(t){return new wa(t)}function Og(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sI(t){return t.collectionGroup!==null}function xo(t){const e=ge(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ue(et.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new rl(i,r))}),n.has(et.keyField().canonicalString())||e.ce.push(new rl(et.keyField(),r))}return e.ce}function an(t){const e=ge(t);return e.le||(e.le=wC(e,xo(t))),e.le}function wC(t,e){if(t.limitType==="F")return zh(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new rl(s.field,i)});const n=t.endAt?new pi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pi(t.startAt.position,t.startAt.inclusive):null;return zh(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function qh(t,e){const n=t.filters.concat([e]);return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Kh(t,e,n){return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ql(t,e){return Ia(an(t),an(e))&&t.limitType===e.limitType}function iI(t){return`${vs(an(t))}|lt:${t.limitType}`}function Ws(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>tI(s)).join(", ")}]`),Ea(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>mi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>mi(s)).join(",")),`Target(${r})`}(an(t))}; limitType=${t.limitType})`}function ba(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of xo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=xg(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,xo(r),s)||r.endAt&&!function(o,a,c){const u=xg(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,xo(r),s))}(t,e)}function TC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oI(t){return(e,n)=>{let r=!1;for(const s of xo(t)){const i=bC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function bC(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?Mr(c,u):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return HE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=new Je(ee.comparator);function Yt(){return AC}const aI=new Je(ee.comparator);function yo(...t){let e=aI;for(const n of t)e=e.insert(n.key,n);return e}function cI(t){let e=aI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Rn(){return ko()}function lI(){return ko()}function ko(){return new Br(t=>t.toString(),(t,e)=>t.isEqual(e))}const RC=new Je(ee.comparator),SC=new Ue(ee.comparator);function be(...t){let e=SC;for(const n of t)e=e.add(n);return e}const PC=new Ue(ve);function CC(){return PC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xo(e)?"-0":e}}function uI(t){return{integerValue:""+t}}function xC(t,e){return zP(e)?uI(e):mf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(){this._=void 0}}function kC(t,e,n){return t instanceof _i?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&hf(i)&&(i=df(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof yi?dI(t,e):t instanceof vi?fI(t,e):function(s,i){const o=hI(s,i),a=Ng(o)+Ng(s.Pe);return Bh(o)&&Bh(s.Pe)?uI(a):mf(s.serializer,a)}(t,e)}function DC(t,e,n){return t instanceof yi?dI(t,e):t instanceof vi?fI(t,e):n}function hI(t,e){return t instanceof ra?function(r){return Bh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class _i extends Yl{}class yi extends Yl{constructor(e){super(),this.elements=e}}function dI(t,e){const n=mI(e);for(const r of t.elements)n.some(s=>kn(s,r))||n.push(r);return{arrayValue:{values:n}}}class vi extends Yl{constructor(e){super(),this.elements=e}}function fI(t,e){let n=mI(e);for(const r of t.elements)n=n.filter(s=>!kn(s,r));return{arrayValue:{values:n}}}class ra extends Yl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ng(t){return We(t.integerValue||t.doubleValue)}function mI(t){return na(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n){this.field=e,this.transform=n}}function VC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof yi&&s instanceof yi||r instanceof vi&&s instanceof vi?fi(r.elements,s.elements,kn):r instanceof ra&&s instanceof ra?kn(r.Pe,s.Pe):r instanceof _i&&s instanceof _i}(t.transform,e.transform)}class OC{constructor(e,n){this.version=e,this.transformResults=n}}class at{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new at}static exists(e){return new at(void 0,e)}static updateTime(e){return new at(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jl{}function gI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Aa(t.key,at.none()):new Vi(t.key,t.data,at.none());{const n=t.data,r=At.empty();let s=new Ue(et.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new er(t.key,r,new Kt(s.toArray()),at.none())}}function NC(t,e,n){t instanceof Vi?function(s,i,o){const a=s.value.clone(),c=Lg(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof er?function(s,i,o){if(!Nc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Lg(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(_I(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Do(t,e,n,r){return t instanceof Vi?function(i,o,a,c){if(!Nc(i.precondition,o))return a;const u=i.value.clone(),h=Fg(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof er?function(i,o,a,c){if(!Nc(i.precondition,o))return a;const u=Fg(i.fieldTransforms,c,o),h=o.data;return h.setAll(_I(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return Nc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function MC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=hI(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function Mg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&fi(r,s,(i,o)=>VC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vi extends Jl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class er extends Jl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _I(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Lg(t,e,n){const r=new Map;ie(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,DC(o,a,n[s]))}return r}function Fg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,kC(i,o,e))}return r}class Aa extends Jl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pf extends Jl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&NC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Do(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Do(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=lI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=gI(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&fi(this.mutations,e.mutations,(n,r)=>Mg(n,r))&&fi(this.baseMutations,e.baseMutations,(n,r)=>Mg(n,r))}}class _f{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ie(e.mutations.length===r.length);let s=function(){return RC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new _f(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,Ce;function yI(t){switch(t){default:return re();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function vI(t){if(t===void 0)return Nt("GRPC error has no .code"),F.UNKNOWN;switch(t){case ht.OK:return F.OK;case ht.CANCELLED:return F.CANCELLED;case ht.UNKNOWN:return F.UNKNOWN;case ht.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ht.INTERNAL:return F.INTERNAL;case ht.UNAVAILABLE:return F.UNAVAILABLE;case ht.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ht.NOT_FOUND:return F.NOT_FOUND;case ht.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ht.ABORTED:return F.ABORTED;case ht.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ht.DATA_LOSS:return F.DATA_LOSS;default:return re()}}(Ce=ht||(ht={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new us([4294967295,4294967295],0);function Ug(t){const e=FC().encode(t),n=new CE;return n.update(e),new Uint8Array(n.digest())}function Bg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new us([n,r],0),new us([s,i],0)]}class vf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new vo(`Invalid padding: ${n}`);if(r<0)throw new vo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new vo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=us.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(us.fromNumber(r)));return s.compare(UC)===1&&(s=new us([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ug(e),[r,s]=Bg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new vf(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Ug(e),[r,s]=Bg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class vo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ra.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xl(ce.min(),s,new Je(ve),Yt(),be())}}class Ra{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ra(r,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class EI{constructor(e,n){this.targetId=e,this.me=n}}class II{constructor(e,n,r=dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class jg{constructor(){this.fe=0,this.ge=zg(),this.pe=dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=be(),n=be(),r=be();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re()}}),new Ra(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=zg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class BC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yt(),this.qe=$g(),this.Qe=new Je(ve)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(sl(i))if(r===0){const o=new ee(i.path);this.Ue(n,o,Qe.newNoDocument(o,ce.min()))}else ie(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Nr(r).toUint8Array()}catch(c){if(c instanceof GE)return di("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new vf(o,s,i)}catch(c){return di(c instanceof vo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&sl(a.target)){const c=new ee(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Qe.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=be();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Xl(e,n,this.Qe,this.ke,r);return this.ke=Yt(),this.qe=$g(),this.Qe=new Je(ve),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new jg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ue(ve),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new jg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function $g(){return new Je(ee.comparator)}function zg(){return new Je(ee.comparator)}const jC=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),$C=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),zC=(()=>({and:"AND",or:"OR"}))();class qC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hh(t,e){return t.useProto3Json||Ea(e)?e:{value:e}}function Ei(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function KC(t,e){return Ei(t,e.toTimestamp())}function It(t){return ie(!!t),ce.fromTimestamp(function(n){const r=Jn(n);return new tt(r.seconds,r.nanos)}(t))}function Ef(t,e){return Gh(t,e).canonicalString()}function Gh(t,e){const n=function(s){return new Ne(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TI(t){const e=Ne.fromString(t);return ie(DI(e)),e}function sa(t,e){return Ef(t.databaseId,e.path)}function Wn(t,e){const n=TI(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(RI(n))}function bI(t,e){return Ef(t.databaseId,e)}function AI(t){const e=TI(t);return e.length===4?Ne.emptyPath():RI(e)}function Wh(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RI(t){return ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function qg(t,e,n){return{name:sa(t,e),fields:n.value.mapValue.fields}}function HC(t,e,n){const r=Wn(t,e.name),s=It(e.updateTime),i=e.createTime?It(e.createTime):ce.min(),o=new At({mapValue:{fields:e.fields}}),a=Qe.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function GC(t,e){return"found"in e?function(r,s){ie(!!s.found),s.found.name,s.found.updateTime;const i=Wn(r,s.found.name),o=It(s.found.updateTime),a=s.found.createTime?It(s.found.createTime):ce.min(),c=new At({mapValue:{fields:s.found.fields}});return Qe.newFoundDocument(i,o,a,c)}(t,e):"missing"in e?function(r,s){ie(!!s.missing),ie(!!s.readTime);const i=Wn(r,s.missing),o=It(s.readTime);return Qe.newNoDocument(i,o)}(t,e):re()}function WC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(ie(h===void 0||typeof h=="string"),dt.fromBase64String(h||"")):(ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array),dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?F.UNKNOWN:vI(u.code);return new Q(h,u.message||"")}(o);n=new II(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Wn(t,r.document.name),i=It(r.document.updateTime),o=r.document.createTime?It(r.document.createTime):ce.min(),a=new At({mapValue:{fields:r.document.fields}}),c=Qe.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Mc(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Wn(t,r.document),i=r.readTime?It(r.readTime):ce.min(),o=Qe.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Mc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Wn(t,r.document),i=r.removedTargetIds||[];n=new Mc([],i,s,null)}else{if(!("filter"in e))return re();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new LC(s,i),a=r.targetId;n=new EI(a,o)}}return n}function ia(t,e){let n;if(e instanceof Vi)n={update:qg(t,e.key,e.value)};else if(e instanceof Aa)n={delete:sa(t,e.key)};else if(e instanceof er)n={update:qg(t,e.key,e.data),updateMask:e1(e.fieldMask)};else{if(!(e instanceof pf))return re();n={verify:sa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof _i)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof yi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof vi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ra)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:KC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re()}(t,e.precondition)),n}function Qh(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?at.updateTime(It(i.updateTime)):i.exists!==void 0?at.exists(i.exists):at.none()}(e.currentDocument):at.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let c=null;if("setToServerValue"in a)ie(a.setToServerValue==="REQUEST_TIME"),c=new _i;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];c=new yi(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];c=new vi(h)}else"increment"in a?c=new ra(o,a.increment):re();const u=et.fromServerFormat(a.fieldPath);return new pI(u,c)}(t,s)):[];if(e.update){e.update.name;const s=Wn(t,e.update.name),i=new At({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new Kt(u.map(h=>et.fromServerFormat(h)))}(e.updateMask);return new er(s,i,o,n,r)}return new Vi(s,i,n,r)}if(e.delete){const s=Wn(t,e.delete);return new Aa(s,n)}if(e.verify){const s=Wn(t,e.verify);return new pf(s,n)}return re()}function QC(t,e){return t&&t.length>0?(ie(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?It(s.updateTime):It(i);return o.isEqual(ce.min())&&(o=It(i)),new OC(o,s.transformResults||[])}(n,e))):[]}function SI(t,e){return{documents:[bI(t,e.path)]}}function PI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bI(t,s);const i=function(u){if(u.length!==0)return kI(Le.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Qs(m.field),direction:JC(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Hh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function CI(t){let e=AI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ie(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const m=xI(d);return m instanceof Le&&ff(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(m=>function(E){return new rl(Ys(E.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(d){let m;return m=typeof d=="object"?d.value:d,Ea(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(d){const m=!!d.before,g=d.values||[];return new pi(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const m=!d.before,g=d.values||[];return new pi(g,m)}(n.endAt)),IC(e,s,o,i,a,"F",c,u)}function YC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ys(n.unaryFilter.field);return Se.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ys(n.unaryFilter.field);return Se.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ys(n.unaryFilter.field);return Se.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ys(n.unaryFilter.field);return Se.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return Se.create(Ys(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Le.create(n.compositeFilter.filters.map(r=>xI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function JC(t){return jC[t]}function XC(t){return $C[t]}function ZC(t){return zC[t]}function Qs(t){return{fieldPath:t.canonicalString()}}function Ys(t){return et.fromServerFormat(t.fieldPath)}function kI(t){return t instanceof Se?function(n){if(n.op==="=="){if(Sg(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NAN"}};if(Rg(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sg(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NOT_NAN"}};if(Rg(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qs(n.field),op:XC(n.op),value:n.value}}}(t):t instanceof Le?function(n){const r=n.getFilters().map(s=>kI(s));return r.length===1?r[0]:{compositeFilter:{op:ZC(n.op),filters:r}}}(t):re()}function e1(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function DI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,n,r,s,i=ce.min(),o=ce.min(),a=dt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new zn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.ct=e}}function t1(t,e){let n;if(e.document)n=HC(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ee.fromSegments(e.noDocument.path),s=Is(e.noDocument.readTime);n=Qe.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return re();{const r=ee.fromSegments(e.unknownDocument.path),s=Is(e.unknownDocument.version);n=Qe.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new tt(s[0],s[1]);return ce.fromTimestamp(i)}(e.readTime)),n}function Kg(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ol(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:sa(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Ei(i,o.version.toTimestamp()),createTime:Ei(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Es(e.version)};else{if(!e.isUnknownDocument())return re();r.unknownDocument={path:n.path.toArray(),version:Es(e.version)}}return r}function ol(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Es(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Is(t){const e=new tt(t.seconds,t.nanoseconds);return ce.fromTimestamp(e)}function ss(t,e){const n=(e.baseMutations||[]).map(i=>Qh(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>Qh(t.ct,i)),s=tt.fromMillis(e.localWriteTimeMs);return new gf(e.batchId,s,n,r)}function Eo(t){const e=Is(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Is(t.lastLimboFreeSnapshotVersion):ce.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return ie(i.documents.length===1),an(Ta(AI(i.documents[0])))}(t.query):function(i){return an(CI(i))}(t.query),new zn(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,dt.fromBase64String(t.resumeToken))}function OI(t,e){const n=Es(e.snapshotVersion),r=Es(e.lastLimboFreeSnapshotVersion);let s;s=sl(e.target)?SI(t.ct,e.target):PI(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vs(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function NI(t){const e=CI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Kh(e,e.limit,"L"):e}function Wu(t,e){return new yf(e.largestBatchId,Qh(t.ct,e.overlayMutation))}function Hg(t,e){const n=e.path.lastSegment();return[t,Lt(e.path.popLast()),n]}function Gg(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Es(r.readTime),documentKey:Lt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{getBundleMetadata(e,n){return Wg(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Is(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return Wg(e).put(function(s){return{bundleId:s.id,createTime:Es(It(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return Qg(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:NI(i.bundledQuery),readTime:Is(i.readTime)}}(r)})}saveNamedQuery(e,n){return Qg(e).put(function(s){return{name:s.name,readTime:Es(It(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function Wg(t){return gt(t,"bundles")}function Qg(t){return gt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Zl(e,r)}getOverlay(e,n){return eo(e).get(Hg(this.userId,n)).next(r=>r?Wu(this.serializer,r):null)}getOverlays(e,n){const r=Rn();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new yf(n,o);s.push(this.ht(e,a))}),O.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Lt(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(eo(e).j("collectionPathOverlayIndex",a))}),O.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Rn(),i=Lt(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return eo(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=Wu(this.serializer,c);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Rn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return eo(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,h)=>{const d=Wu(this.serializer,u);i.size()<s||d.largestBatchId===o?(i.set(d.getKey(),d),o=d.largestBatchId):h.done()}).next(()=>i)}ht(e,n){return eo(e).put(function(s,i,o){const[a,c,u]=Hg(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ia(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function eo(t){return gt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{Pt(e){return gt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?dt.fromUint8Array(r):dt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(We(e.integerValue));else if("doubleValue"in e){const r=We(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Xo(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Jn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Nr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?WE(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Wl(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):re()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(We(a)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),ee.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}is.vt=new is;function s1(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Yg(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=s1(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class i1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=Yg(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=Yg(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class o1{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class a1{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class to{constructor(){this.jt=new i1,this.Ht=new o1(this.jt),this.Jt=new a1(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new os(this.indexId,this.documentKey,this.arrayValue,r)}}function ar(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Jg(t.arrayValue,e.arrayValue),n!==0?n:(n=Jg(t.directionalValue,e.directionalValue),n!==0?n:ee.comparator(t.documentKey,e.documentKey)))}function Jg(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e){this.Xt=new Ue((n,r)=>et.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ie(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Lh(e);if(n!==void 0&&!this.sn(n))return!1;const r=Zr(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const c=r[i];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ue(et.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new kc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new kc(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new kc(r.field,r.dir==="asc"?0:1)));return new nl(nl.UNKNOWN_ID,this.collectionId,n,Jo.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t){var e,n;if(ie(t instanceof Se||t instanceof Le),t instanceof Se){if(t instanceof rI){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>Se.create(t.field,"==",i)))||[];return Le.create(s,"or")}return t}const r=t.filters.map(s=>MI(s));return Le.create(r,t.op)}function c1(t){if(t.getFilters().length===0)return[];const e=Xh(MI(t));return ie(LI(e)),Yh(e)||Jh(e)?[e]:e.getFilters()}function Yh(t){return t instanceof Se}function Jh(t){return t instanceof Le&&ff(t)}function LI(t){return Yh(t)||Jh(t)||function(n){if(n instanceof Le&&jh(n)){for(const r of n.getFilters())if(!Yh(r)&&!Jh(r))return!1;return!0}return!1}(t)}function Xh(t){if(ie(t instanceof Se||t instanceof Le),t instanceof Se)return t;if(t.filters.length===1)return Xh(t.filters[0]);const e=t.filters.map(r=>Xh(r));let n=Le.create(e,t.op);return n=al(n),LI(n)?n:(ie(n instanceof Le),ie(gi(n)),ie(n.filters.length>1),n.filters.reduce((r,s)=>If(r,s)))}function If(t,e){let n;return ie(t instanceof Se||t instanceof Le),ie(e instanceof Se||e instanceof Le),n=t instanceof Se?e instanceof Se?function(s,i){return Le.create([s,i],"and")}(t,e):Zg(t,e):e instanceof Se?Zg(e,t):function(s,i){if(ie(s.filters.length>0&&i.filters.length>0),gi(s)&&gi(i))return eI(s,i.getFilters());const o=jh(s)?s:i,a=jh(s)?i:s,c=o.filters.map(u=>If(u,a));return Le.create(c,"or")}(t,e),al(n)}function Zg(t,e){if(gi(e))return eI(e,t.getFilters());{const n=e.filters.map(r=>If(t,r));return Le.create(n,"or")}}function al(t){if(ie(t instanceof Se||t instanceof Le),t instanceof Se)return t;const e=t.getFilters();if(e.length===1)return al(e[0]);if(XE(t))return t;const n=e.map(s=>al(s)),r=[];return n.forEach(s=>{s instanceof Se?r.push(s):s instanceof Le&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Le.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.un=new wf}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Zt.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Zt.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class wf{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ue(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ue(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Uint8Array(0);class u1{constructor(e,n){this.databaseId=n,this.cn=new wf,this.ln=new Br(r=>vs(r),(r,s)=>Ia(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:Lt(s)};return e_(e).put(i)}return O.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[LE(n),""],!1,!0);return e_(e).U(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(An(o.parent))}return r})}addFieldIndex(e,n){const r=no(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=$s(e);return i.next(a=>{o.put(Gg(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=no(e),s=$s(e),i=js(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=no(e),r=js(e),s=$s(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return O.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new Xg(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=js(e);let s=!0;const i=new Map;return O.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=be();const a=[];return O.forEach(i,(c,u)=>{H("IndexedDbIndexManager",`Using index ${function(x){return`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(L=>`${L.fieldPath}:${L.kind}`).join(",")}`}(c)} to execute ${vs(n)}`);const h=function(x,L){const q=Lh(L);if(q===void 0)return null;for(const G of il(x,q.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(u,c),d=function(x,L){const q=new Map;for(const G of Zr(L))for(const R of il(x,G.fieldPath))switch(R.op){case"==":case"in":q.set(G.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return q.set(G.fieldPath.canonicalString(),R.value),Array.from(q.values())}return null}(u,c),m=function(x,L){const q=[];let G=!0;for(const R of Zr(L)){const _=R.kind===0?Dg(x,R.fieldPath,x.startAt):Vg(x,R.fieldPath,x.startAt);q.push(_.value),G&&(G=_.inclusive)}return new pi(q,G)}(u,c),g=function(x,L){const q=[];let G=!0;for(const R of Zr(L)){const _=R.kind===0?Vg(x,R.fieldPath,x.endAt):Dg(x,R.fieldPath,x.endAt);q.push(_.value),G&&(G=_.inclusive)}return new pi(q,G)}(u,c),E=this.In(c,u,m),b=this.In(c,u,g),C=this.Tn(c,u,d),N=this.En(c.indexId,h,E,m.inclusive,b,g.inclusive,C);return O.forEach(N,V=>r.G(V,n.limit).next(x=>{x.forEach(L=>{const q=ee.fromSegments(L.documentKey);o.has(q)||(o=o.add(q),a.push(q))})}))}).next(()=>a)}return O.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=c1(Le.create(e.filters,"and")).map(r=>zh(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,o,a){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),u=c/(n!=null?n.length:1),h=[];for(let d=0;d<c;++d){const m=n?this.dn(n[d/u]):mc,g=this.An(e,m,r[d%u],s),E=this.Rn(e,m,i[d%u],o),b=a.map(C=>this.An(e,m,C,!0));h.push(...this.createRange(g,E,b))}return h}An(e,n,r,s){const i=new os(e,ee.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new os(e,ee.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new Xg(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.hn(n);return O.forEach(s,i=>this.Pn(e,i).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new Ue(et.comparator),h=!1;for(const d of c.filters)for(const m of d.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:u=u.add(m.field));for(const d of c.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(h?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new to;for(const s of Zr(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);is.vt.It(i,o)}return r.zt()}dn(e){const n=new to;return is.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new to;return is.vt.It(ta(this.databaseId,n),r.Yt(function(i){const o=Zr(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new to);let i=0;for(const o of Zr(e)){const a=r[i++];for(const c of s)if(this.fn(n,o.fieldPath)&&na(a))s=this.gn(s,o,a);else{const u=c.Yt(o.kind);is.vt.It(a,u)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new to;c.seed(a.zt()),is.vt.It(o,c.Yt(n.kind)),i.push(c)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof Se&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=no(e),s=$s(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const o=[];return O.forEach(i,a=>s.get([a.indexId,this.uid]).next(c=>{o.push(function(h,d){const m=d?new Jo(d.sequenceNumber,new Zt(Is(d.readTime),new ee(An(d.documentKey)),d.largestBatchId)):Jo.empty(),g=h.fields.map(([E,b])=>new kc(et.fromServerFormat(E),b));return new nl(h.indexId,h.collectionGroup,g,m)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ve(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=no(e),i=$s(e);return this.yn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,c=>i.put(Gg(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),O.forEach(a,c=>this.wn(e,s,c).next(u=>{const h=this.Sn(i,c);return u.isEqual(h)?O.resolve():this.bn(e,i,c,u,h)}))))})}Dn(e,n,r,s){return js(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return js(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=js(e);let i=new Ue(ar);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{i=i.add(new os(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}Sn(e,n){let r=new Ue(ar);const s=this.Vn(n,e);if(s==null)return r;const i=Lh(n);if(i!=null){const o=e.data.field(i.fieldPath);if(na(o))for(const a of o.arrayValue.values||[])r=r.add(new os(n.indexId,e.key,this.dn(a),s))}else r=r.add(new os(n.indexId,e.key,mc,s));return r}bn(e,n,r,s,i){H("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(c,u,h,d,m){const g=c.getIterator(),E=u.getIterator();let b=Bs(g),C=Bs(E);for(;b||C;){let N=!1,V=!1;if(b&&C){const x=h(b,C);x<0?V=!0:x>0&&(N=!0)}else b!=null?V=!0:N=!0;N?(d(C),C=Bs(E)):V?(m(b),b=Bs(g)):(b=Bs(g),C=Bs(E))}}(s,i,ar,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),O.waitFor(o)}yn(e){let n=1;return $s(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ar(o,a)).filter((o,a,c)=>!a||ar(o,c[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=ar(o,e),c=ar(o,n);if(a===0)s[0]=e.Zt();else if(a>0&&c<0)s.push(o),s.push(o.Zt());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,mc,[]],c=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,mc,[]];i.push(IDBKeyRange.bound(a,c))}return i}Cn(e,n){return ar(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(t_)}getMinOffset(e,n){return O.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||re())).next(t_)}}function e_(t){return gt(t,"collectionParents")}function js(t){return gt(t,"indexEntries")}function no(t){return gt(t,"indexConfiguration")}function $s(t){return gt(t,"indexState")}function t_(t){ie(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;cf(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Zt(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zt(e,zt.DEFAULT_COLLECTION_PERCENTILE,zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.J({range:o},(h,d,m)=>(a++,m.delete()));i.push(c.next(()=>{ie(a===1)}));const u=[];for(const h of n.mutations){const d=$E(e,h.key.path,n.batchId);i.push(s.delete(d)),u.push(h.key)}return O.waitFor(i).next(()=>u)}function cl(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw re();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zt.DEFAULT_COLLECTION_PERCENTILE=10,zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zt.DEFAULT=new zt(41943040,zt.DEFAULT_COLLECTION_PERCENTILE,zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zt.DISABLED=new zt(-1,0,0);class eu{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){ie(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new eu(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cr(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Js(e),o=cr(e);return o.add({}).next(a=>{ie(typeof a=="number");const c=new gf(a,n,r,s),u=function(g,E,b){const C=b.baseMutations.map(V=>ia(g.ct,V)),N=b.mutations.map(V=>ia(g.ct,V));return{userId:E,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:C,mutations:N}}(this.serializer,this.userId,c),h=[];let d=new Ue((m,g)=>ve(m.canonicalString(),g.canonicalString()));for(const m of s){const g=$E(this.userId,m.key.path,a);d=d.add(m.key.path.popLast()),h.push(o.put(u)),h.push(i.put(g,KP))}return d.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),O.waitFor(h).next(()=>c)})}lookupMutationBatch(e,n){return cr(e).get(n).next(r=>r?(ie(r.userId===this.userId),ss(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?O.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return cr(e).J({index:"userMutationsIndex",range:s},(o,a,c)=>{a.userId===this.userId&&(ie(a.batchId>=r),i=ss(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return cr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cr(e).U("userMutationsIndex",n).next(r=>r.map(s=>ss(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Dc(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Js(e).J({range:s},(o,a,c)=>{const[u,h,d]=o,m=An(h);if(u===this.userId&&n.path.isEqual(m))return cr(e).get(d).next(g=>{if(!g)throw re();ie(g.userId===this.userId),i.push(ss(this.serializer,g))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ue(ve);const s=[];return n.forEach(i=>{const o=Dc(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=Js(e).J({range:a},(u,h,d)=>{const[m,g,E]=u,b=An(g);m===this.userId&&i.path.isEqual(b)?r=r.add(E):d.done()});s.push(c)}),O.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Dc(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Ue(ve);return Js(e).J({range:o},(c,u,h)=>{const[d,m,g]=c,E=An(m);d===this.userId&&r.isPrefixOf(E)?E.length===s&&(a=a.add(g)):h.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(cr(e).get(i).next(o=>{if(o===null)throw re();ie(o.userId===this.userId),r.push(ss(this.serializer,o))}))}),O.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return FI(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),O.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Js(e).J({range:r},(i,o,a)=>{if(i[0]===this.userId){const c=An(i[1]);s.push(c)}else a.done()}).next(()=>{ie(s.length===0)})})}containsKey(e,n){return UI(e,this.userId,n)}Nn(e){return BI(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function UI(t,e,n){const r=Dc(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Js(t).J({range:i,H:!0},(a,c,u)=>{const[h,d,m]=a;h===e&&d===s&&(o=!0),u.done()}).next(()=>o)}function cr(t){return gt(t,"mutations")}function Js(t){return gt(t,"documentMutations")}function BI(t){return gt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ws(0)}static kn(){return new ws(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new ws(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ce.fromTimestamp(new tt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>zs(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(ie(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return zs(e).J((o,a)=>{const c=Eo(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))}).next(()=>O.waitFor(i)).next(()=>s)}forEachTarget(e,n){return zs(e).J((r,s)=>{const i=Eo(s);n(i)})}qn(e){return r_(e).get("targetGlobalKey").next(n=>(ie(n!==null),n))}Qn(e,n){return r_(e).put("targetGlobalKey",n)}Kn(e,n){return zs(e).put(OI(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=vs(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return zs(e).J({range:s,index:"queryTargetsIndex"},(o,a,c)=>{const u=Eo(a);Ia(n,u.target)&&(i=u,c.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=pr(e);return n.forEach(o=>{const a=Lt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(s)}removeMatchingKeys(e,n,r){const s=pr(e);return O.forEach(n,i=>{const o=Lt(i.path);return O.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=pr(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=pr(e);let i=be();return s.J({range:r,H:!0},(o,a,c)=>{const u=An(o[1]),h=new ee(u);i=i.add(h)}).next(()=>i)}containsKey(e,n){const r=Lt(n.path),s=IDBKeyRange.bound([r],[LE(r)],!1,!0);let i=0;return pr(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,a],c,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}ot(e,n){return zs(e).get(n).next(r=>r?Eo(r):null)}}function zs(t){return gt(t,"targets")}function r_(t){return gt(t,"targetGlobal")}function pr(t){return gt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_([t,e],[n,r]){const s=ve(t,n);return s===0?ve(e,r):s}class d1{constructor(e){this.Un=e,this.buffer=new Ue(s_),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();s_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class f1{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){H("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ur(n)?H("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ps(n)}await this.Hn(3e5)})}}class m1{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(nn.oe);const r=new d1(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(n_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n_):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(i=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Gs()<=Re.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d})))}}function p1(t,e){return new m1(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n){this.db=e,this.garbageCollector=p1(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return pc(e,r)}removeReference(e,n,r){return pc(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return pc(e,n)}nr(e,n){return function(s,i){let o=!1;return BI(s).Y(a=>UI(s,a,i).next(c=>(c&&(o=!0),O.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(o,a)=>{if(a<=n){const c=this.nr(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ce.min()),pr(e).delete(function(d){return[0,Lt(d.path)]}(o))))});s.push(c)}}).next(()=>O.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return pc(e,n)}tr(e,n){const r=pr(e);let s,i=nn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{o===0?(i!==nn.oe&&n(new ee(An(s)),i),i=u,s=c):i=nn.oe}).next(()=>{i!==nn.oe&&n(new ee(An(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pc(t,e){return pr(t).put(function(r,s){return{targetId:0,path:Lt(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.changes=new Br(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Qr(e).put(r)}removeEntry(e,n,r){return Qr(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ol(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Qe.newInvalidDocument(n);return Qr(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ro(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:Qe.newInvalidDocument(n)};return Qr(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ro(n))},(s,i)=>{r={document:this.ir(n,i),size:cl(i)}}).next(()=>r)}getEntries(e,n){let r=Yt();return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)}).next(()=>r)}ar(e,n){let r=Yt(),s=new Je(ee.comparator);return this._r(e,n,(i,o)=>{const a=this.ir(i,o);r=r.insert(i,a),s=s.insert(i,cl(o))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return O.resolve();let s=new Ue(a_);n.forEach(c=>s=s.add(c));const i=IDBKeyRange.bound(ro(s.first()),ro(s.last())),o=s.getIterator();let a=o.getNext();return Qr(e).J({index:"documentKeyIndex",range:i},(c,u,h)=>{const d=ee.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&a_(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.$(ro(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),ol(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qr(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let h=Yt();for(const d of u){const m=this.ir(ee.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);m.isFoundDocument()&&(ba(n,m)||s.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,s){let i=Yt();const o=o_(n,r),a=o_(n,Zt.max());return Qr(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,h)=>{const d=this.ir(ee.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(d.key,d),i.size===s&&h.done()}).next(()=>i)}newChangeBuffer(e){return new y1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return i_(e).get("remoteDocumentGlobalKey").next(n=>(ie(!!n),n))}rr(e,n){return i_(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=t1(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ce.min())))return r}return Qe.newInvalidDocument(e)}}function $I(t){return new _1(t)}class y1 extends jI{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Br(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Ue((i,o)=>ve(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=Kg(this.cr.serializer,o);s=s.add(i.path.popLast());const u=cl(c);r+=u-a.size,n.push(this.cr.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=Kg(this.cr.serializer,o.convertToNoDocument(ce.min()));n.push(this.cr.addEntry(e,i,c))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function i_(t){return gt(t,"remoteDocumentGlobal")}function Qr(t){return gt(t,"remoteDocumentsV14")}function ro(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function o_(t,e){const n=e.documentKey.path.toArray();return[t,ol(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function a_(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ve(n[i],r[i]),s)return s;return s=ve(n.length,r.length),s||(s=ve(n[n.length-2],r[r.length-2]),s||ve(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Do(r.mutation,s,Kt.empty(),tt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=be()){const s=Rn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=yo();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Rn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,be()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Yt();const o=ko(),a=function(){return ko()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof er)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Do(h.mutation,u,h.mutation.getFieldMask(),tt.now())):o.set(u.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var d;return a.set(u,new v1(h,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ko();let s=new Je((o,a)=>o-a),i=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Kt.empty();h=a.applyToLocalView(u,h),r.set(c,h);const d=(s.get(a.batchId)||be()).add(c);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,d=lI();h.forEach(m=>{if(!i.has(m)){const g=gI(n.get(m),r.get(m));g!==null&&d.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(Rn());let a=-1,c=i;return o.next(u=>O.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,be())).next(h=>({batchId:a,changes:cI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=yo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=yo();return this.indexManager.getCollectionParents(e,i).next(a=>O.forEach(a,c=>{const u=function(d,m){return new wa(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Qe.newInvalidDocument(h)))});let a=yo();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Do(h.mutation,u,Kt.empty(),tt.now()),ba(n,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:It(s.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:NI(s.bundledQuery),readTime:It(s.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(){this.overlays=new Je(ee.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Rn();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=Rn(),i=n.length+1,o=new ee(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Je((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Rn(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Rn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return O.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yf(n,r));let i=this.Ir.get(n);i===void 0&&(i=be(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this.Tr=new Ue(yt.Er),this.dr=new Ue(yt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new yt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new yt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ee(new Ne([])),r=new yt(n,e),s=new yt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ee(new Ne([])),r=new yt(n,e),s=new yt(n,e+1);let i=be();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new yt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||ve(e.wr,n.wr)}static Ar(e,n){return ve(e.wr,n.wr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ue(yt.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gf(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new yt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yt(n,0),s=new yt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ue(ve);return n.forEach(s=>{const i=new yt(s,0),o=new yt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new yt(new ee(i),0);let a=new Ue(ve);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.wr)),!0)},o),O.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,s=>{const i=new yt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new yt(n,0),s=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){this.Mr=e,this.docs=function(){return new Je(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Qe.newInvalidDocument(n))}getEntries(e,n){let r=Yt();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Qe.newInvalidDocument(s))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yt();const o=n.path,a=new ee(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||cf(FE(h),r)<=0||(s.has(h.key)||ba(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new A1(this)}getSize(e){return O.resolve(this.size)}}class A1 extends jI{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.persistence=e,this.Nr=new Br(n=>vs(n),Ia),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Tf,this.targetCount=0,this.kr=ws.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ws(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n){this.qr={},this.overlays={},this.Qr=new nn(0),this.Kr=!1,this.Kr=!0,this.$r=new w1,this.referenceDelegate=e(this),this.Ur=new R1(this),this.indexManager=new l1,this.remoteDocumentCache=function(s){return new b1(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new VI(n),this.Gr=new E1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new I1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new T1(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new S1(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class S1 extends BE{constructor(e){super(),this.currentSequenceNumber=e}}class tu{constructor(e){this.persistence=e,this.Jr=new Tf,this.Yr=null}static Zr(e){return new tu(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{const s=ee.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.serializer=e}O(e,n,r,s){const i=new Gl("createOrUpgrade",n);r<1&&s>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ig,{unique:!0}),c.createObjectStore("documentMutations")}(e),c_(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=O.resolve();return r<3&&s>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),c_(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ce.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ig,{unique:!0});const d=u.store("mutations"),m=h.map(g=>d.put(g));return O.waitFor(m)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ni(i))),r<6&&s>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(o=o.next(()=>this.ii(i))),r<8&&s>=8&&(o=o.next(()=>this.si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.oi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:rC});u.createIndex("collectionPathOverlayIndex",sC,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",iC,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:HP});u.createIndex("documentKeyIndex",GP),u.createIndex("collectionGroupIndex",WP)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ai(e,i))),r<15&&s>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:ZP}).createIndex("sequenceNumberIndex",eC,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:tC}).createIndex("documentKeyIndex",nC,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=cl(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>O.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>O.forEach(a,c=>{ie(c.userId===i.userId);const u=ss(this.serializer,c);return FI(e,i.userId,u).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((o,a)=>{const c=new Ne(o),u=function(d){return[0,Lt(d)]}(c);i.push(n.get(u).next(h=>h?O.resolve():(d=>n.put({targetId:0,path:Lt(d),sequenceNumber:s.highestListenSequenceNumber}))(c)))}).next(()=>O.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:XP});const r=n.store("collectionParents"),s=new wf,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Lt(c)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new Ne(o);return i(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,c],u)=>{const h=An(a);return i(h.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=Eo(s),o=OI(this.serializer,i);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{const a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new ee(Ne.fromString(d.document.name).popFirst(5)):d.noDocument?ee.fromSegments(d.noDocument.path):d.unknownDocument?ee.fromSegments(d.unknownDocument.path):re()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))}).next(()=>O.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=$I(this.serializer),i=new qI(tu.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var u;let h=(u=a.get(c.userId))!==null&&u!==void 0?u:be();ss(this.serializer,c).keys().forEach(d=>h=h.add(d)),a.set(c.userId,h)}),O.forEach(a,(c,u)=>{const h=new Tt(u),d=Zl.lt(this.serializer,h),m=i.getIndexManager(h),g=eu.lt(h,this.serializer,m,i.referenceDelegate);return new zI(s,g,d,m).recalculateAndSaveOverlaysForDocumentKeys(new Fh(n,nn.oe),c).next()})})}}function c_(t){t.createObjectStore("targetDocuments",{keyPath:YP}).createIndex("documentTargetsIndex",JP,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",QP,{unique:!0}),t.createObjectStore("targetGlobal")}const Qu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class bf{constructor(e,n,r,s,i,o,a,c,u,h,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=a,this.ci=u,this.li=h,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!bf.D())throw new Q(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new g1(this,s),this.Ai=n+"main",this.serializer=new VI(c),this.Ri=new Pr(this.Ai,this.hi,new P1(this.serializer)),this.$r=new r1,this.Ur=new h1(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$I(this.serializer),this.Gr=new n1,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Nt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(F.FAILED_PRECONDITION,Qu);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new nn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Ur(e))return H("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return H("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return so(e).get("owner").next(n=>O.resolve(this.vi(n)))}Ci(e){return gc(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=gt(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return O.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?O.resolve(!0):so(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new Q(F.FAILED_PRECONDITION,Qu);return!1}}return!(!this.networkEnabled||!this.inForeground)||gc(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&H("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Fh(e,nn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>gc(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return eu.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new u1(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Zl.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(c){return c===17?cC:c===16?aC:c===15?uf:c===14?KE:c===13?qE:c===12?oC:c===11?zE:void re()}(this.hi);let o;return this.Ri.runTransaction(e,s,i,a=>(o=new Fh(a,this.Qr?this.Qr.next():nn.oe),n==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw Nt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Q(F.FAILED_PRECONDITION,UE);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return so(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Q(F.FAILED_PRECONDITION,Qu)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return so(e).put("owner",n)}static D(){return Pr.D()}bi(e){const n=so(e);return n.get("owner").next(r=>this.vi(r)?(H("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):O.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Nt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;wE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return H("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Nt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Nt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function so(t){return gt(t,"owner")}function gc(t){return gt(t,"clientMetadata")}function C1(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=be(),s=be();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Af(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return wE()?8:jE(pt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new x1;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Gs()<=Re.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Ws(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Gs()<=Re.DEBUG&&H("QueryEngine","Query:",Ws(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Gs()<=Re.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Ws(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,an(n))):O.resolve())}Yi(e,n){if(Og(n))return O.resolve(null);let r=an(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Kh(n,null,"F"),r=an(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=be(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,a);return this.ns(n,u,o,c.readTime)?this.Yi(e,Kh(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,s){return Og(n)||s.isEqual(ce.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?O.resolve(null):(Gs()<=Re.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ws(n)),this.rs(e,o,n,FP(s,-1)).next(a=>a))})}ts(e,n){let r=new Ue(oI(e));return n.forEach((s,i)=>{ba(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Gs()<=Re.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Ws(n)),this.Ji.getDocumentsMatchingQuery(e,n,Zt.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Je(ve),this._s=new Br(i=>vs(i),Ia),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function HI(t,e,n,r){return new k1(t,e,n,r)}async function GI(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=be();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function D1(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){const d=u.batch,m=d.keys();let g=O.resolve();return m.forEach(E=>{g=g.next(()=>h.getEntry(c,E)).next(b=>{const C=u.docVersions.get(E);ie(C!==null),b.version.compareTo(C)<0&&(d.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),h.addEntry(b)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=be();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function WI(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function V1(t,e){const n=ge(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const m=s.get(d);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,d)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(dt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(d,g),function(b,C,N){return b.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(m,g,h)&&a.push(n.Ur.updateTargetData(i,g))});let c=Yt(),u=be();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(O1(i,o,e.documentUpdates).next(h=>{c=h.Ps,u=h.Is})),!r.isEqual(ce.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(d=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.os=s,i))}function O1(t,e,n){let r=be(),s=be();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Yt();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(ce.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function N1(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function M1(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new zn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Zh(t,e,n){const r=ge(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ur(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function l_(t,e,n){const r=ge(t);let s=ce.min(),i=be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const d=ge(c),m=d._s.get(h);return m!==void 0?O.resolve(d.os.get(m)):d.Ur.getTargetData(u,h)}(r,o,an(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:be())).next(a=>(L1(r,TC(e),a),{documents:a,Ts:i})))}function L1(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class u_{constructor(){this.activeTargetIds=CC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QI{constructor(){this.so=new u_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new u_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c=null;function Yu(){return _c===null?_c=function(){return 268435456+Math.round(2147483648*Math.random())}():_c++,"0x"+_c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="WebChannelConnection";class j1 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Yu(),c=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(n,c,u,s).then(h=>(H("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw di("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Di}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=U1[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Yu();return new Promise((o,a)=>{const c=new xE;c.setWithCredentials(!0),c.listenOnce(kE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case xc.NO_ERROR:const h=c.getResponseJson();H(xt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case xc.TIMEOUT:H(xt,`RPC '${e}' ${i} timed out`),a(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case xc.HTTP_ERROR:const d=c.getStatus();if(H(xt,`RPC '${e}' ${i} failed with status:`,d,"response text:",c.getResponseText()),d>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const E=function(C){const N=C.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(N)>=0?N:F.UNKNOWN}(g.status);a(new Q(E,g.message))}else a(new Q(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Q(F.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{H(xt,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);H(xt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const s=Yu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=OE(),a=VE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");H(xt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const d=o.createWebChannel(h,c);let m=!1,g=!1;const E=new B1({Io:C=>{g?H(xt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(m||(H(xt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),H(xt,`RPC '${e}' stream ${s} sending:`,C),d.send(C))},To:()=>d.close()}),b=(C,N,V)=>{C.listen(N,x=>{try{V(x)}catch(L){setTimeout(()=>{throw L},0)}})};return b(d,_o.EventType.OPEN,()=>{g||(H(xt,`RPC '${e}' stream ${s} transport opened.`),E.yo())}),b(d,_o.EventType.CLOSE,()=>{g||(g=!0,H(xt,`RPC '${e}' stream ${s} transport closed`),E.So())}),b(d,_o.EventType.ERROR,C=>{g||(g=!0,di(xt,`RPC '${e}' stream ${s} transport errored:`,C),E.So(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),b(d,_o.EventType.MESSAGE,C=>{var N;if(!g){const V=C.data[0];ie(!!V);const x=V,L=x.error||((N=x[0])===null||N===void 0?void 0:N.error);if(L){H(xt,`RPC '${e}' stream ${s} received error:`,L);const q=L.status;let G=function(v){const w=ht[v];if(w!==void 0)return vI(w)}(q),R=L.message;G===void 0&&(G=F.INTERNAL,R="Unknown error status: "+q+" with message "+L.message),g=!0,E.So(new Q(G,R)),d.close()}else H(xt,`RPC '${e}' stream ${s} received:`,V),E.bo(V)}}),b(a,DE.STAT_EVENT,C=>{C.stat===Mh.PROXY?H(xt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===Mh.NOPROXY&&H(xt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(){return typeof window<"u"?window:null}function Lc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t){return new qC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,r,s,i,o,a,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Rf(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Nt(n.toString()),Nt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class z1 extends YI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=WC(this.serializer,e),r=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?It(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Wh(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=sl(c)?{documents:SI(i,c)}:{query:PI(i,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=wI(i,o.resumeToken);const u=Hh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=Ei(i,o.snapshotVersion.toTimestamp());const u=Hh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=YC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Wh(this.serializer),n.removeTarget=e,this.a_(n)}}class q1 extends YI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ie(!!e.streamToken),this.lastStreamToken=e.streamToken,ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=QC(e.writeResults,e.commitTime),r=It(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Wh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ia(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Gh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Gh(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class H1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Nt(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{xs(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=ge(c);u.L_.add(4),await Sa(u),u.q_.set("Unknown"),u.L_.delete(4),await ru(u)}(this))})}),this.q_=new H1(r,s)}}async function ru(t){if(xs(t))for(const e of t.B_)await e(!0)}async function Sa(t){for(const e of t.B_)await e(!1)}function JI(t,e){const n=ge(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xf(n)?Cf(n):Oi(n).r_()&&Pf(n,e))}function Sf(t,e){const n=ge(t),r=Oi(n);n.N_.delete(e),r.r_()&&XI(n,e),n.N_.size===0&&(r.r_()?r.o_():xs(n)&&n.q_.set("Unknown"))}function Pf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oi(t).A_(e)}function XI(t,e){t.Q_.xe(e),Oi(t).R_(e)}function Cf(t){t.Q_=new BC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Oi(t).start(),t.q_.v_()}function xf(t){return xs(t)&&!Oi(t).n_()&&t.N_.size>0}function xs(t){return ge(t).L_.size===0}function ZI(t){t.Q_=void 0}async function W1(t){t.q_.set("Online")}async function Q1(t){t.N_.forEach((e,n)=>{Pf(t,e)})}async function Y1(t,e){ZI(t),xf(t)?(t.q_.M_(e),Cf(t)):t.q_.set("Unknown")}async function J1(t,e,n){if(t.q_.set("Online"),e instanceof II&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ll(t,r)}else if(e instanceof Mc?t.Q_.Ke(e):e instanceof EI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await WI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.N_.get(u);h&&i.N_.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const h=i.N_.get(c);if(!h)return;i.N_.set(c,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),XI(i,c);const d=new zn(h.target,c,u,h.sequenceNumber);Pf(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await ll(t,r)}}async function ll(t,e,n){if(!Ur(e))throw e;t.L_.add(1),await Sa(t),t.q_.set("Offline"),n||(n=()=>WI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ru(t)})}function ew(t,e){return e().catch(n=>ll(t,n,e))}async function Pa(t){const e=ge(t),n=Lr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;X1(e);)try{const s=await N1(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Z1(e,s)}catch(s){await ll(e,s)}tw(e)&&nw(e)}function X1(t){return xs(t)&&t.O_.length<10}function Z1(t,e){t.O_.push(e);const n=Lr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function tw(t){return xs(t)&&!Lr(t).n_()&&t.O_.length>0}function nw(t){Lr(t).start()}async function ex(t){Lr(t).p_()}async function tx(t){const e=Lr(t);for(const n of t.O_)e.m_(n.mutations)}async function nx(t,e,n){const r=t.O_.shift(),s=_f.from(r,e,n);await ew(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Pa(t)}async function rx(t,e){e&&Lr(t).V_&&await async function(r,s){if(function(o){return yI(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Lr(r).s_(),await ew(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Pa(r)}}(t,e),tw(t)&&nw(t)}async function d_(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=xs(n);n.L_.add(3),await Sa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ru(n)}async function sx(t,e){const n=ge(t);e?(n.L_.delete(2),await ru(n)):e||(n.L_.add(2),await Sa(n),n.q_.set("Unknown"))}function Oi(t){return t.K_||(t.K_=function(n,r,s){const i=ge(n);return i.w_(),new z1(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:W1.bind(null,t),Ro:Q1.bind(null,t),mo:Y1.bind(null,t),d_:J1.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xf(t)?Cf(t):t.q_.set("Unknown")):(await t.K_.stop(),ZI(t))})),t.K_}function Lr(t){return t.U_||(t.U_=function(n,r,s){const i=ge(n);return i.w_(),new q1(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ex.bind(null,t),mo:rx.bind(null,t),f_:tx.bind(null,t),g_:nx.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Pa(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new kf(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Df(t,e){if(Nt("AsyncQueue",`${e}: ${t}`),Ur(t))return new Q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=yo(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new si(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof si)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new si;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.W_=new Je(ee.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ii{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ii(e,n,si.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ql(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class ox{constructor(){this.queries=m_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ge(n),i=s.queries;s.queries=m_(),i.forEach((o,a)=>{for(const c of a.j_)c.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function m_(){return new Br(t=>iI(t),Ql)}async function Vf(t,e){const n=ge(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new ix,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Df(o,`Initialization of query '${Ws(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Nf(n)}async function Of(t,e){const n=ge(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ax(t,e){const n=ge(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Nf(n)}function cx(t,e,n){const r=ge(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Nf(t){t.Y_.forEach(e=>{e.next()})}var ed,p_;(p_=ed||(ed={})).ea="default",p_.Cache="cache";class Mf{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ii(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ii.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ed.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this.key=e}}class sw{constructor(e){this.key=e}}class lx{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=be(),this.mutatedKeys=be(),this.Aa=oI(e),this.Ra=new si(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new f_,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const m=s.get(h),g=ba(this.query,d)?d:null,E=!!m&&this.mutatedKeys.has(m.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;m&&g?m.data.isEqual(g.data)?E!==b&&(r.track({type:3,doc:g}),C=!0):this.ga(m,g)||(r.track({type:2,doc:g}),C=!0,(c&&this.Aa(g,c)>0||u&&this.Aa(g,u)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),C=!0):m&&!g&&(r.track({type:1,doc:m}),C=!0,(c||u)&&(a=!0)),C&&(g?(o=o.add(g),i=b?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,E){const b=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return b(g)-b(E)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Ii(this.query,e.Ra,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new f_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=be(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new sw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new rw(r))}),n}ba(e){this.Ta=e.Ts,this.da=be();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ii.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ux{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hx{constructor(e){this.key=e,this.va=!1}}class dx{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Br(a=>iI(a),Ql),this.Ma=new Map,this.xa=new Set,this.Oa=new Je(ee.comparator),this.Na=new Map,this.La=new Tf,this.Ba={},this.ka=new Map,this.qa=ws.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function fx(t,e,n=!0){const r=uw(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await iw(r,e,n,!0),s}async function mx(t,e){const n=uw(t);await iw(n,e,!0,!1)}async function iw(t,e,n,r){const s=await M1(t.localStore,an(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await px(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&JI(t.remoteStore,s),a}async function px(t,e,n,r,s){t.Ka=(d,m,g)=>async function(b,C,N,V){let x=C.view.ma(N);x.ns&&(x=await l_(b.localStore,C.query,!1).then(({documents:R})=>C.view.ma(R,x)));const L=V&&V.targetChanges.get(C.targetId),q=V&&V.targetMismatches.get(C.targetId)!=null,G=C.view.applyChanges(x,b.isPrimaryClient,L,q);return __(b,C.targetId,G.wa),G.snapshot}(t,d,m,g);const i=await l_(t.localStore,e,!0),o=new lx(e,i.Ts),a=o.ma(i.documents),c=Ra.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);__(t,n,u.wa);const h=new ux(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function gx(t,e,n){const r=ge(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Ql(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Zh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Sf(r.remoteStore,s.targetId),td(r,s.targetId)}).catch(Ps)):(td(r,s.targetId),await Zh(r.localStore,s.targetId,!0))}async function _x(t,e){const n=ge(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sf(n.remoteStore,r.targetId))}async function yx(t,e,n){const r=hw(t);try{const s=await function(o,a){const c=ge(o),u=tt.now(),h=a.reduce((g,E)=>g.add(E.key),be());let d,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=Yt(),b=be();return c.cs.getEntries(g,h).next(C=>{E=C,E.forEach((N,V)=>{V.isValidDocument()||(b=b.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,E)).next(C=>{d=C;const N=[];for(const V of a){const x=MC(V,d.get(V.key).overlayedDocument);x!=null&&N.push(new er(V.key,x,YE(x.value.mapValue),at.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,N,a)}).next(C=>{m=C;const N=C.applyToLocalDocumentSet(d,b);return c.documentOverlayCache.saveOverlays(g,C.batchId,N)})}).then(()=>({batchId:m.batchId,changes:cI(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new Je(ve)),u=u.insert(a,c),o.Ba[o.currentUser.toKey()]=u}(r,s.batchId,n),await Ca(r,s.changes),await Pa(r.remoteStore)}catch(s){const i=Df(s,"Failed to persist write");n.reject(i)}}async function ow(t,e){const n=ge(t);try{const r=await V1(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ie(o.va):s.removedDocuments.size>0&&(ie(o.va),o.va=!1))}),await Ca(n,r,e)}catch(r){await Ps(r)}}function g_(t,e,n){const r=ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=ge(o);c.onlineState=a;let u=!1;c.queries.forEach((h,d)=>{for(const m of d.j_)m.Z_(a)&&(u=!0)}),u&&Nf(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vx(t,e,n){const r=ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Je(ee.comparator);o=o.insert(i,Qe.newNoDocument(i,ce.min()));const a=be().add(i),c=new Xl(ce.min(),new Map,new Je(ve),o,a);await ow(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Lf(r)}else await Zh(r.localStore,e,!1).then(()=>td(r,e,n)).catch(Ps)}async function Ex(t,e){const n=ge(t),r=e.batch.batchId;try{const s=await D1(n.localStore,e);cw(n,r,null),aw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ca(n,s)}catch(s){await Ps(s)}}async function Ix(t,e,n){const r=ge(t);try{const s=await function(o,a){const c=ge(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(ie(d!==null),h=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);cw(r,e,n),aw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ca(r,s)}catch(s){await Ps(s)}}function aw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function cw(t,e,n){const r=ge(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function td(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||lw(t,r)})}function lw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Sf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Lf(t))}function __(t,e,n){for(const r of n)r instanceof rw?(t.La.addReference(r.key,e),wx(t,r)):r instanceof sw?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||lw(t,r.key)):re()}function wx(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),Lf(t))}function Lf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ee(Ne.fromString(e)),r=t.qa.next();t.Na.set(r,new hx(n)),t.Oa=t.Oa.insert(n,r),JI(t.remoteStore,new zn(an(Ta(n.path)),r,"TargetPurposeLimboResolution",nn.oe))}}async function Ca(t,e,n){const r=ge(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){s.push(u);const d=Af.Wi(c.targetId,u);i.push(d)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,u){const h=ge(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>O.forEach(u,m=>O.forEach(m.$i,g=>h.persistence.referenceDelegate.addReference(d,m.targetId,g)).next(()=>O.forEach(m.Ui,g=>h.persistence.referenceDelegate.removeReference(d,m.targetId,g)))))}catch(d){if(!Ur(d))throw d;H("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const g=h.os.get(m),E=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(m,b)}}}(r.localStore,i))}async function Tx(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await GI(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(c=>{c.reject(new Q(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ca(n,r.hs)}}function bx(t,e){const n=ge(t),r=n.Na.get(e);if(r&&r.va)return be().add(r.key);{let s=be();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function uw(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ow.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vx.bind(null,e),e.Ca.d_=ax.bind(null,e.eventManager),e.Ca.$a=cx.bind(null,e.eventManager),e}function hw(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ex.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ix.bind(null,e),e}class oa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return HI(this.persistence,new KI,e.initialUser,this.serializer)}Ga(e){return new qI(tu.Zr,this.serializer)}Wa(e){return new QI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oa.provider={build:()=>new oa};class Ax extends oa{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await hw(this.Ja.syncEngine),await Pa(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return HI(this.persistence,new KI,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new f1(r,e.asyncQueue,n)}Ha(e,n){const r=new $P(n,this.persistence);return new jP(e.asyncQueue,r)}Ga(e){const n=C1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?zt.withCacheSize(this.cacheSizeBytes):zt.DEFAULT;return new bf(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,$1(),Lc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new QI}}class ul{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>g_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tx.bind(null,this.syncEngine),await sx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ox}()}createDatastore(e){const n=nu(e.databaseInfo.databaseId),r=function(i){return new j1(i)}(e.databaseInfo);return function(i,o,a,c){return new K1(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new G1(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>g_(this.syncEngine,n,0),function(){return h_.D()?new h_:new F1}())}createSyncEngine(e,n){return function(s,i,o,a,c,u,h){const d=new dx(s,i,o,a,c,u);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ge(s);H("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Sa(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ul.provider={build:()=>new ul};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Nt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Q(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=ge(s),a={documents:i.map(d=>sa(o.serializer,d))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Ne.emptyPath(),a,i.length),u=new Map;c.forEach(d=>{const m=GC(o.serializer,d);u.set(m.key.toString(),m)});const h=[];return i.forEach(d=>{const m=u.get(d.toString());ie(!!m),h.push(m)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Aa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=ee.fromPath(r);this.mutations.push(new pf(s,this.precondition(s)))}),await async function(r,s){const i=ge(r),o={writes:s.map(a=>ia(i.serializer,a))};await i.Mo("Commit",i.serializer.databaseId,Ne.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw re();n=ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Q(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ce.min())?at.exists(!1):at.updateTime(n):at.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ce.min()))throw new Q(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return at.updateTime(n)}return at.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new Rf(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new Rx(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Ea(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!yI(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Tt.UNAUTHENTICATED,this.clientId=ME.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Df(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ju(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await GI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function y_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Cx(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>d_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>d_(e.remoteStore,s)),t._onlineComponents=e}async function Cx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ju(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;di("Error using user provided cache. Falling back to memory cache: "+n),await Ju(t,new oa)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await Ju(t,new oa);return t._offlineComponents}async function Uf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await y_(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await y_(t,new ul))),t._onlineComponents}function xx(t){return Uf(t).then(e=>e.syncEngine)}function kx(t){return Uf(t).then(e=>e.datastore)}async function hl(t){const e=await Uf(t),n=e.eventManager;return n.onListen=fx.bind(null,e.syncEngine),n.onUnlisten=gx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mx.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_x.bind(null,e.syncEngine),n}function Dx(t,e,n={}){const r=new mn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new Ff({next:m=>{h.Za(),o.enqueueAndForget(()=>Of(i,d));const g=m.docs.has(a);!g&&m.fromCache?u.reject(new Q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new Q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new Mf(Ta(a.path),h,{includeMetadataChanges:!0,_a:!0});return Vf(i,d)}(await hl(t),t.asyncQueue,e,n,r)),r.promise}function Vx(t,e,n={}){const r=new mn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new Ff({next:m=>{h.Za(),o.enqueueAndForget(()=>Of(i,d)),m.fromCache&&c.source==="server"?u.reject(new Q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new Mf(a,h,{includeMetadataChanges:!0,_a:!0});return Vf(i,d)}(await hl(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t,e,n){if(!n)throw new Q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ox(t,e,n,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function E_(t){if(!ee.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function I_(t){if(ee.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function su(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function Ft(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=su(t);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ox("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class iu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new CP;switch(r.type){case"firstParty":return new VP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=v_.get(n);r&&(H("ComponentProvider","Removing Datastore"),v_.delete(n),r.terminate())}(this),Promise.resolve()}}function Nx(t,e,n,r={}){var s;const i=(t=Ft(t,iu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Tt.MOCK_USER;else{a=IE(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Tt(u)}t._authCredentials=new xP(new NE(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ks(this.firestore,e,this._query)}}class Rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}}class Cr extends ks{constructor(e,n,r){super(e,n,Ta(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new ee(e))}withConverter(e){return new Cr(this.firestore,e,this._path)}}function Xu(t,e,...n){if(t=Ye(t),fw("collection","path",e),t instanceof iu){const r=Ne.fromString(e,...n);return I_(r),new Cr(t,null,r)}{if(!(t instanceof Rt||t instanceof Cr))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return I_(r),new Cr(t.firestore,null,r)}}function nd(t,e,...n){if(t=Ye(t),arguments.length===1&&(e=ME.newId()),fw("doc","path",e),t instanceof iu){const r=Ne.fromString(e,...n);return E_(r),new Rt(t,null,new ee(r))}{if(!(t instanceof Rt||t instanceof Cr))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return E_(r),new Rt(t.firestore,t instanceof Cr?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Rf(this,"async_queue_retry"),this.Vu=()=>{const r=Lc();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Lc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Lc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new mn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ur(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Nt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=kf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function b_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Dn extends iu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new T_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new T_(e),this._firestoreClient=void 0,await e}}}function Mx(t,e,n){n||(n="(default)");const r=va(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Wo(i,e))return s;throw new Q(F.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Q(F.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Lx(t,e){const n=typeof t=="object"?t:of(),r=typeof t=="string"?t:e||"(default)",s=va(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=yE("firestore");i&&Nx(s,...i)}return s}function xa(t){if(t._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Fx(t),t._firestoreClient}function Fx(t){var e,n,r;const s=t._freezeSettings(),i=function(a,c,u,h){return new uC(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,dw(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Px(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ts(dt.fromBase64String(e))}catch(n){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ts(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=/^__.*__$/;class Bx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new er(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vi(e,this.data,n,this.fieldTransforms)}}class mw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new er(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class $f{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new $f(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return dl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(pw(this.Cu)&&Ux.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class jx{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nu(e)}Qu(e,n,r,s=!1){return new $f({Cu:e,methodName:n,qu:r,path:et.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Da(t){const e=t._freezeSettings(),n=nu(t._databaseId);return new jx(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zf(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Kf("Data must be an object, but it was:",o,r);const a=yw(r,o);let c,u;if(i.merge)c=new Kt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const m=rd(e,d,n);if(!o.contains(m))throw new Q(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Ew(h,m)||h.push(m)}c=new Kt(h),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new Bx(new At(a),c,u)}class au extends ou{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof au}}class qf extends ou{_toFieldTransform(e){return new pI(e.path,new _i)}isEqual(e){return e instanceof qf}}function gw(t,e,n,r){const s=t.Qu(1,e,n);Kf("Data must be an object, but it was:",s,r);const i=[],o=At.empty();Cs(r,(c,u)=>{const h=Hf(e,c,n);u=Ye(u);const d=s.Nu(h);if(u instanceof au)i.push(h);else{const m=Va(u,d);m!=null&&(i.push(h),o.set(h,m))}});const a=new Kt(i);return new mw(o,a,s.fieldTransforms)}function _w(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[rd(e,r,n)],c=[s];if(i.length%2!=0)throw new Q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(rd(e,i[m])),c.push(i[m+1]);const u=[],h=At.empty();for(let m=a.length-1;m>=0;--m)if(!Ew(u,a[m])){const g=a[m];let E=c[m];E=Ye(E);const b=o.Nu(g);if(E instanceof au)u.push(g);else{const C=Va(E,b);C!=null&&(u.push(g),h.set(g,C))}}const d=new Kt(u);return new mw(h,d,o.fieldTransforms)}function $x(t,e,n,r=!1){return Va(n,t.Qu(r?4:3,e))}function Va(t,e){if(vw(t=Ye(t)))return Kf("Unsupported field value:",e,t),yw(t,e);if(t instanceof ou)return function(r,s){if(!pw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=Va(a,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=tt.fromDate(r);return{timestampValue:Ei(s.serializer,i)}}if(r instanceof tt){const i=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ei(s.serializer,i)}}if(r instanceof Bf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ts)return{bytesValue:wI(s.serializer,r._byteString)};if(r instanceof Rt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ef(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof jf)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return mf(a.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${su(r)}`)}(t,e)}function yw(t,e){const n={};return HE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(t,(r,s)=>{const i=Va(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function vw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof Bf||t instanceof Ts||t instanceof Rt||t instanceof ou||t instanceof jf)}function Kf(t,e,n){if(!vw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=su(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function rd(t,e,n){if((e=Ye(e))instanceof ka)return e._internalPath;if(typeof e=="string")return Hf(t,e);throw dl("Field path arguments must be of type string or ",t,!1,void 0,n)}const zx=new RegExp("[~\\*/\\[\\]]");function Hf(t,e,n){if(e.search(zx)>=0)throw dl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ka(...e.split("."))._internalPath}catch{throw dl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function dl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Q(F.INVALID_ARGUMENT,a+t+c)}function Ew(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qx extends fl{data(){return super.data()}}function Gf(t,e){return typeof e=="string"?Hf(t,e):e instanceof ka?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wf{}class Kx extends Wf{}function Zu(t,e,...n){let r=[];e instanceof Wf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Na).length,a=i.filter(c=>c instanceof Oa).length;if(o>1||o>0&&a>0)throw new Q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Oa extends Kx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Oa(e,n,r)}_apply(e){const n=this._parse(e);return ww(e._query,n),new ks(e.firestore,e.converter,qh(e._query,n))}_parse(e){const n=Da(e.firestore);return function(i,o,a,c,u,h,d){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){R_(d,h);const g=[];for(const E of d)g.push(A_(c,i,E));m={arrayValue:{values:g}}}else m=A_(c,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||R_(d,h),m=$x(a,o,d,h==="in"||h==="not-in");return Se.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function io(t,e,n){const r=e,s=Gf("where",t);return Oa._create(s,r,n)}class Na extends Wf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Na(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Le.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)ww(o,c),o=qh(o,c)}(e._query,n),new ks(e.firestore,e.converter,qh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Hx(...t){return t.forEach(e=>Gx("or",e)),Na._create("or",t)}function A_(t,e,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new Q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sI(e)&&n.indexOf("/")!==-1)throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!ee.isDocumentKey(r))throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ta(t,new ee(r))}if(n instanceof Rt)return ta(t,n._key);throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${su(n)}.`)}function R_(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ww(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Gx(t,e){if(!(e instanceof Oa||e instanceof Na))throw new Q(F.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class Tw{convertValue(e,n="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Cs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>We(o.doubleValue));return new jf(i)}convertGeoPoint(e){return new Bf(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=df(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zo(e));default:return null}}convertTimestamp(e){const n=Jn(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);ie(DI(r));const s=new _s(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||Nt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Wx extends Tw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yf extends fl{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Fc extends Yf{data(e={}){return super.data(e)}}class bw{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Zs(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fc(this._firestore,this._userDataWriter,r.key,r,new Zs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new Fc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Zs(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Fc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Zs(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Qx(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Qx(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(t){t=Ft(t,Rt);const e=Ft(t.firestore,Dn);return Dx(xa(e),t._key).then(n=>Aw(e,t,n))}class cu extends Tw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}function JF(t){t=Ft(t,ks);const e=Ft(t.firestore,Dn),n=xa(e),r=new cu(e);return Iw(t._query),Vx(n,t._query).then(s=>new bw(e,r,t,s))}function XF(t,e,n){t=Ft(t,Rt);const r=Ft(t.firestore,Dn),s=Qf(t.converter,e,n);return lu(r,[zf(Da(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,at.none())])}function Yx(t,e,n,...r){t=Ft(t,Rt);const s=Ft(t.firestore,Dn),i=Da(s);let o;return o=typeof(e=Ye(e))=="string"||e instanceof ka?_w(i,"updateDoc",t._key,e,n,r):gw(i,"updateDoc",t._key,e),lu(s,[o.toMutation(t._key,at.exists(!0))])}function ZF(t){return lu(Ft(t.firestore,Dn),[new Aa(t._key,at.none())])}function e2(t,e){const n=Ft(t.firestore,Dn),r=nd(t),s=Qf(t.converter,e);return lu(n,[zf(Da(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,at.exists(!1))]).then(()=>r)}function yc(t,...e){var n,r,s;t=Ye(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||b_(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(b_(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let c,u,h;if(t instanceof Rt)u=Ft(t.firestore,Dn),h=Ta(t._key.path),c={next:d=>{e[o]&&e[o](Aw(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Ft(t,ks);u=Ft(d.firestore,Dn),h=d._query;const m=new cu(u);c={next:g=>{e[o]&&e[o](new bw(u,m,d,g))},error:e[o+1],complete:e[o+2]},Iw(t._query)}return function(m,g,E,b){const C=new Ff(b),N=new Mf(g,C,E);return m.asyncQueue.enqueueAndForget(async()=>Vf(await hl(m),N)),()=>{C.Za(),m.asyncQueue.enqueueAndForget(async()=>Of(await hl(m),N))}}(xa(u),h,a,c)}function lu(t,e){return function(r,s){const i=new mn;return r.asyncQueue.enqueueAndForget(async()=>yx(await xx(r),s,i)),i.promise}(xa(t),e)}function Aw(t,e,n){const r=n.docs.get(e._key),s=new cu(t);return new Yf(t,s,e._key,r,new Zs(n.hasPendingWrites,n.fromCache),e.converter)}class Jx{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=Rw(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Xx(t){return new Jx(t)}class Zx{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ul.provider,this._offlineComponentProvider={build:n=>new Ax(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function Rw(t){return new Zx(t==null?void 0:t.forceOwnership)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek={maxAttempts:5};function oo(t,e){if((t=Ye(t)).firestore!==e)throw new Q(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Da(n)}get(n){const r=oo(n,this._firestore),s=new Wx(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return re();const o=i[0];if(o.isFoundDocument())return new fl(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new fl(this._firestore,s,r._key,null,r.converter);throw re()})}set(n,r,s){const i=oo(n,this._firestore),o=Qf(i.converter,r,s),a=zf(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=oo(n,this._firestore);let a;return a=typeof(r=Ye(r))=="string"||r instanceof ka?_w(this._dataReader,"Transaction.update",o._key,r,s,i):gw(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=oo(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=oo(e,this._firestore),r=new cu(this._firestore);return super.get(e).then(s=>new Yf(this._firestore,r,n._key,s._document,new Zs(!1,!1),n.converter))}}function n2(t,e,n){t=Ft(t,Dn);const r=Object.assign(Object.assign({},ek),n);return function(i){if(i.maxAttempts<1)throw new Q(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const c=new mn;return i.asyncQueue.enqueueAndForget(async()=>{const u=await kx(i);new Sx(i.asyncQueue,u,a,o,c).au()}),c.promise}(xa(t),s=>e(new tk(t,s)),r)}function r2(){return new qf("serverTimestamp")}(function(e,n=!0){(function(s){Di=s})(Ss),ps(new Or("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Dn(new kP(r.getProvider("auth-internal")),new NP(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _s(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Pn(yg,"4.7.3",e),Pn(yg,"4.7.3","esm2017")})();var nk="firebase",rk="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn(nk,rk,"app");function Jf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Sw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sk=Sw,Pw=new _a("auth","Firebase",Sw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=new rf("@firebase/auth");function ik(t,...e){ml.logLevel<=Re.WARN&&ml.warn(`Auth (${Ss}): ${t}`,...e)}function Uc(t,...e){ml.logLevel<=Re.ERROR&&ml.error(`Auth (${Ss}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t,...e){throw Xf(t,...e)}function Cn(t,...e){return Xf(t,...e)}function Cw(t,e,n){const r=Object.assign(Object.assign({},sk()),{[e]:n});return new _a("auth","Firebase",r).create(e,{appName:t.name})}function xr(t){return Cw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Pw.create(t,...e)}function me(t,e,...n){if(!t)throw Xf(e,...n)}function qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Uc(e),new Error(e)}function Xn(t,e){t||qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ok(){return S_()==="http:"||S_()==="https:"}function S_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ok()||hS()||"connection"in navigator)?navigator.onLine:!0}function ck(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=cS()||dS()}get(){return ak()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=new Ma(3e4,6e4);function Ds(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function jr(t,e,n,r,s={}){return kw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ya(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return uS()||(u.referrerPolicy="no-referrer"),xw.fetch()(Dw(t,t.config.apiHost,n,a),u)})}async function kw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},lk),e);try{const s=new dk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw vc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw vc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw vc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw vc(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Cw(t,h,u);gn(t,h)}}catch(s){if(s instanceof On)throw s;gn(t,"network-request-failed",{message:String(s)})}}async function uu(t,e,n,r,s={}){const i=await jr(t,e,n,r,s);return"mfaPendingCredential"in i&&gn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Dw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Zf(t.config,s):`${t.config.apiScheme}://${s}`}function hk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cn(this.auth,"network-request-failed")),uk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Cn(t,e,r);return s.customData._tokenResponse=n,s}function P_(t){return t!==void 0&&t.enterprise!==void 0}class fk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function mk(t,e){return jr(t,"GET","/v2/recaptchaConfig",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pk(t,e){return jr(t,"POST","/v1/accounts:delete",e)}async function Vw(t,e){return jr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gk(t,e=!1){const n=Ye(t),r=await n.getIdToken(e),s=em(r);me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Vo(eh(s.auth_time)),issuedAtTime:Vo(eh(s.iat)),expirationTime:Vo(eh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function eh(t){return Number(t)*1e3}function em(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Uc("JWT malformed, contained fewer than 3 sections"),null;try{const s=gE(n);return s?JSON.parse(s):(Uc("Failed to decode base64 JWT payload"),null)}catch(s){return Uc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function C_(t){const e=em(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof On&&_k(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _k({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vo(this.lastLoginAt),this.creationTime=Vo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await aa(t,Vw(n,{idToken:r}));me(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Ow(i.providerUserInfo):[],a=Ek(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=c?u:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new id(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function vk(t){const e=Ye(t);await pl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ek(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ow(t){return t.map(e=>{var{providerId:n}=e,r=Jf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ik(t,e){const n=await kw(t,{},async()=>{const r=ya({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Dw(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",xw.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wk(t,e){return jr(t,"POST","/v2/accounts:revokeToken",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):C_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=C_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Ik(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ii;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(me(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(me(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ii,this.toJSON())}_performRefresh(){return qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Kn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Jf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new id(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await aa(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gk(this,e)}reload(){return vk(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Kn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await pl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(xr(this.auth));const e=await this.getIdToken();return await aa(this,pk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,c,u,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,N=(u=n.createdAt)!==null&&u!==void 0?u:void 0,V=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:L,isAnonymous:q,providerData:G,stsTokenManager:R}=n;me(x&&R,e,"internal-error");const _=ii.fromJSON(this.name,R);me(typeof x=="string",e,"internal-error"),lr(d,e.name),lr(m,e.name),me(typeof L=="boolean",e,"internal-error"),me(typeof q=="boolean",e,"internal-error"),lr(g,e.name),lr(E,e.name),lr(b,e.name),lr(C,e.name),lr(N,e.name),lr(V,e.name);const v=new Kn({uid:x,auth:e,email:m,emailVerified:L,displayName:d,isAnonymous:q,photoURL:E,phoneNumber:g,tenantId:b,stsTokenManager:_,createdAt:N,lastLoginAt:V});return G&&Array.isArray(G)&&(v.providerData=G.map(w=>Object.assign({},w))),C&&(v._redirectEventId=C),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new ii;s.updateFromServerResponse(n);const i=new Kn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await pl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];me(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ow(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new ii;a.updateFromIdToken(r);const c=new Kn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new id(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=new Map;function Hn(t){Xn(t instanceof Function,"Expected a class definition");let e=x_.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,x_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Nw.type="NONE";const k_=Nw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t,e,n){return`firebase:${t}:${e}:${n}`}class oi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Bc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Bc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Kn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new oi(Hn(k_),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Hn(k_);const o=Bc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const d=Kn._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new oi(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new oi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Uw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jw(e))return"Blackberry";if($w(e))return"Webos";if(Lw(e))return"Safari";if((e.includes("chrome/")||Fw(e))&&!e.includes("edge/"))return"Chrome";if(Bw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Mw(t=pt()){return/firefox\//i.test(t)}function Lw(t=pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fw(t=pt()){return/crios\//i.test(t)}function Uw(t=pt()){return/iemobile/i.test(t)}function Bw(t=pt()){return/android/i.test(t)}function jw(t=pt()){return/blackberry/i.test(t)}function $w(t=pt()){return/webos/i.test(t)}function tm(t=pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Tk(t=pt()){var e;return tm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bk(){return fS()&&document.documentMode===10}function zw(t=pt()){return tm(t)||Bw(t)||$w(t)||jw(t)||/windows phone/i.test(t)||Uw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t,e=[]){let n;switch(t){case"Browser":n=D_(pt());break;case"Worker":n=`${D_(pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ss}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(t,e={}){return jr(t,"GET","/v2/passwordPolicy",Ds(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=6;class Pk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Sk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new V_(this),this.idTokenSubscription=new V_(this),this.beforeStateQueue=new Ak(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await oi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Vw(this,{idToken:e}),r=await Kn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if($n(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ck()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($n(this.app))return Promise.reject(xr(this));const n=e?Ye(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $n(this.app)?Promise.reject(xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Rk(this),n=new Pk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _a("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await wk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hn(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await oi.create(this,[Hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ik(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ni(t){return Ye(t)}class V_{constructor(e){this.auth=e,this.observer=null,this.addObserver=vS(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xk(t){hu=t}function Kw(t){return hu.loadJS(t)}function kk(){return hu.recaptchaEnterpriseScript}function Dk(){return hu.gapiScript}function Vk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Ok="recaptcha-enterprise",Nk="NO_RECAPTCHA";class Mk{constructor(e){this.type=Ok,this.auth=Ni(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{mk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new fk(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){const c=window.grecaptcha;P_(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Nk)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&P_(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=kk();c.length!==0&&(c+=a),Kw(c).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function O_(t,e,n,r=!1){const s=new Mk(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function N_(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await O_(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await O_(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t,e){const n=va(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Wo(i,e??{}))return s;gn(s,"already-initialized")}return n.initialize({options:e})}function Fk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Uk(t,e,n){const r=Ni(t);me(r._canInitEmulator,r,"emulator-config-failed"),me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Hw(e),{host:o,port:a}=Bk(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||jk()}function Hw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Bk(t){const e=Hw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:M_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:M_(o)}}}function M_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qn("not implemented")}_getIdTokenResponse(e){return qn("not implemented")}_linkToIdToken(e,n){return qn("not implemented")}_getReauthenticationResolver(e){return qn("not implemented")}}async function $k(t,e){return jr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(t,e){return uu(t,"POST","/v1/accounts:signInWithPassword",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(t,e){return uu(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}async function Kk(t,e){return uu(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends nm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ca(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ca(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return N_(e,n,"signInWithPassword",zk);case"emailLink":return qk(e,{email:this._email,oobCode:this._password});default:gn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return N_(e,r,"signUpPassword",$k);case"emailLink":return Kk(e,{idToken:n,email:this._email,oobCode:this._password});default:gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ai(t,e){return uu(t,"POST","/v1/accounts:signInWithIdp",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk="http://localhost";class bs extends nm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):gn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Jf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new bs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ai(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ai(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ai(e,n)}buildRequest(){const e={requestUri:Hk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ya(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Wk(t){const e=po(go(t)).link,n=e?po(go(e)).deep_link_id:null,r=po(go(t)).deep_link_id;return(r?po(go(r)).link:null)||r||n||e||t}class rm{constructor(e){var n,r,s,i,o,a;const c=po(go(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,d=Gk((s=c.mode)!==null&&s!==void 0?s:null);me(u&&h&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=Wk(e);try{return new rm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(){this.providerId=Mi.PROVIDER_ID}static credential(e,n){return ca._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=rm.parseLink(n);return me(r,"argument-error"),ca._fromEmailAndCode(e,r.code,r.tenantId)}}Mi.PROVIDER_ID="password";Mi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends Gw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends La{constructor(){super("facebook.com")}static credential(e){return bs._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends La{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bs._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return _r.credential(n,r)}catch{return null}}}_r.GOOGLE_SIGN_IN_METHOD="google.com";_r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends La{constructor(){super("github.com")}static credential(e){return bs._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends La{constructor(){super("twitter.com")}static credential(e,n){return bs._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.TWITTER_SIGN_IN_METHOD="twitter.com";vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Kn._fromIdTokenResponse(e,r,s),o=L_(r);return new wi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=L_(r);return new wi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function L_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends On{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,gl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new gl(e,n,r,s)}}function Ww(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?gl._fromErrorAndOperation(t,i,e,r):i})}async function Qk(t,e,n=!1){const r=await aa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yk(t,e,n=!1){const{auth:r}=t;if($n(r.app))return Promise.reject(xr(r));const s="reauthenticate";try{const i=await aa(t,Ww(r,s,e,t),n);me(i.idToken,r,"internal-error");const o=em(i.idToken);me(o,r,"internal-error");const{sub:a}=o;return me(t.uid===a,r,"user-mismatch"),wi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&gn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qw(t,e,n=!1){if($n(t.app))return Promise.reject(xr(t));const r="signIn",s=await Ww(t,r,e),i=await wi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Jk(t,e){return Qw(Ni(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(t){const e=Ni(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function s2(t,e,n){return $n(t.app)?Promise.reject(xr(t)):Jk(Ye(t),Mi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Xk(t),r})}function Zk(t,e,n,r){return Ye(t).onIdTokenChanged(e,n,r)}function eD(t,e,n){return Ye(t).beforeAuthStateChanged(e,n)}function i2(t){return Ye(t).signOut()}const _l="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_l,"1"),this.storage.removeItem(_l),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=1e3,nD=10;class Jw extends Yw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);bk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,nD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},tD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jw.type="LOCAL";const rD=Jw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw extends Yw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Xw.type="SESSION";const Zw=Xw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new du(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await sD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}du.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=sm("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const m=d;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return window}function oD(t){xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}async function aD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function lD(){return eT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="firebaseLocalStorageDb",uD=1,yl="firebaseLocalStorage",nT="fbase_key";class Fa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fu(t,e){return t.transaction([yl],e?"readwrite":"readonly").objectStore(yl)}function hD(){const t=indexedDB.deleteDatabase(tT);return new Fa(t).toPromise()}function od(){const t=indexedDB.open(tT,uD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(yl,{keyPath:nT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(yl)?e(r):(r.close(),await hD(),e(await od()))})})}async function F_(t,e,n){const r=fu(t,!0).put({[nT]:e,value:n});return new Fa(r).toPromise()}async function dD(t,e){const n=fu(t,!1).get(e),r=await new Fa(n).toPromise();return r===void 0?null:r.value}function U_(t,e){const n=fu(t,!0).delete(e);return new Fa(n).toPromise()}const fD=800,mD=3;class rT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await od(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=du._getInstance(lD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await aD(),!this.activeServiceWorker)return;this.sender=new iD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await od();return await F_(e,_l,"1"),await U_(e,_l),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>F_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>dD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>U_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=fu(s,!1).getAll();return new Fa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rT.type="LOCAL";const pD=rT;new Ma(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t,e){return e?Hn(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im extends nm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ai(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ai(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ai(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _D(t){return Qw(t.auth,new im(t),t.bypassAuthState)}function yD(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),Yk(n,new im(t),t.bypassAuthState)}async function vD(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),Qk(n,new im(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _D;case"linkViaPopup":case"linkViaRedirect":return vD;case"reauthViaPopup":case"reauthViaRedirect":return yD;default:gn(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=new Ma(2e3,1e4);class ei extends sT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ei.currentPopupAction&&ei.currentPopupAction.cancel(),ei.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=sm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ei.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ED.get())};e()}}ei.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID="pendingRedirect",jc=new Map;class wD extends sT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=jc.get(this.auth._key());if(!e){try{const r=await TD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}jc.set(this.auth._key(),e)}return this.bypassAuthState||jc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TD(t,e){const n=RD(e),r=AD(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function bD(t,e){jc.set(t._key(),e)}function AD(t){return Hn(t._redirectPersistence)}function RD(t){return Bc(ID,t.config.apiKey,t.name)}async function SD(t,e,n=!1){if($n(t.app))return Promise.reject(xr(t));const r=Ni(t),s=gD(r,e),o=await new wD(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=10*60*1e3;class CD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!iT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Cn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PD&&this.cachedEventUids.clear(),this.cachedEventUids.has(B_(e))}saveEventToCache(e){this.cachedEventUids.add(B_(e)),this.lastProcessedEventTime=Date.now()}}function B_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(t,e={}){return jr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VD=/^https?/;async function OD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kD(t);for(const n of e)try{if(ND(n))return}catch{}gn(t,"unauthorized-domain")}function ND(t){const e=sd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!VD.test(n))return!1;if(DD.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=new Ma(3e4,6e4);function j_(){const t=xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LD(t){return new Promise((e,n)=>{var r,s,i;function o(){j_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j_(),n(Cn(t,"network-request-failed"))},timeout:MD.get()})}if(!((s=(r=xn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=xn().gapi)===null||i===void 0)&&i.load)o();else{const a=Vk("iframefcb");return xn()[a]=()=>{gapi.load?o():n(Cn(t,"network-request-failed"))},Kw(`${Dk()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw $c=null,e})}let $c=null;function FD(t){return $c=$c||LD(t),$c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=new Ma(5e3,15e3),BD="__/auth/iframe",jD="emulator/auth/iframe",$D={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qD(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zf(e,jD):`https://${t.config.authDomain}/${BD}`,r={apiKey:e.apiKey,appName:t.name,v:Ss},s=zD.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ya(r).slice(1)}`}async function KD(t){const e=await FD(t),n=xn().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:qD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$D,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Cn(t,"network-request-failed"),a=xn().setTimeout(()=>{i(o)},UD.get());function c(){xn().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GD=500,WD=600,QD="_blank",YD="http://localhost";class $_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JD(t,e,n,r=GD,s=WD){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},HD),{width:r.toString(),height:s.toString(),top:i,left:o}),u=pt().toLowerCase();n&&(a=Fw(u)?QD:n),Mw(u)&&(e=e||YD,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[g,E])=>`${m}${g}=${E},`,"");if(Tk(u)&&a!=="_self")return XD(e||"",a),new $_(null);const d=window.open(e||"",a,h);me(d,t,"popup-blocked");try{d.focus()}catch{}return new $_(d)}function XD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="__/auth/handler",eV="emulator/auth/handler",tV=encodeURIComponent("fac");async function z_(t,e,n,r,s,i){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ss,eventId:s};if(e instanceof Gw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",yS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(i||{}))o[h]=d}if(e instanceof La){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),u=c?`#${tV}=${encodeURIComponent(c)}`:"";return`${nV(t)}?${ya(a).slice(1)}${u}`}function nV({config:t}){return t.emulator?Zf(t,eV):`https://${t.authDomain}/${ZD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="webStorageSupport";class rV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zw,this._completeRedirectFn=SD,this._overrideRedirectResult=bD}async _openPopup(e,n,r,s){var i;Xn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await z_(e,n,r,sd(),s);return JD(e,o,sm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await z_(e,n,r,sd(),s);return oD(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Xn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await KD(e),r=new CD(e);return n.register("authEvent",s=>(me(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(th,{type:th},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[th];o!==void 0&&n(!!o),gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zw()||Lw()||tm()}}const sV=rV;var q_="@firebase/auth",K_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aV(t){ps(new Or("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qw(t)},u=new Ck(r,s,i,c);return Fk(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ps(new Or("auth-internal",e=>{const n=Ni(e.getProvider("auth").getImmediate());return(r=>new iV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pn(q_,K_,oV(t)),Pn(q_,K_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=5*60,lV=EE("authIdTokenMaxAge")||cV;let H_=null;const uV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lV)return;const s=n==null?void 0:n.token;H_!==s&&(H_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function hV(t=of()){const e=va(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Lk(t,{popupRedirectResolver:sV,persistence:[pD,rD,Zw]}),r=EE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=uV(i.toString());eD(n,o,()=>o(n.currentUser)),Zk(n,a=>o(a))}}const s=_E("auth");return s&&Uk(n,`http://${s}`),n}function dV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}xk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Cn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",dV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aV("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="firebasestorage.googleapis.com",aT="storageBucket",fV=2*60*1e3,mV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot extends On{constructor(e,n,r=0){super(nh(e),`Firebase Storage: ${n} (${nh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var it;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(it||(it={}));function nh(t){return"storage/"+t}function om(){const t="An unknown error occurred, please check the error payload for server response.";return new ot(it.UNKNOWN,t)}function pV(t){return new ot(it.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function gV(t){return new ot(it.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _V(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ot(it.UNAUTHENTICATED,t)}function yV(){return new ot(it.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function vV(t){return new ot(it.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function EV(){return new ot(it.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function IV(){return new ot(it.CANCELED,"User canceled the upload/download.")}function wV(t){return new ot(it.INVALID_URL,"Invalid URL '"+t+"'.")}function TV(t){return new ot(it.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function bV(){return new ot(it.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+aT+"' property when initializing the app?")}function AV(){return new ot(it.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function RV(){return new ot(it.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function SV(t){return new ot(it.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ad(t){return new ot(it.INVALID_ARGUMENT,t)}function cT(){return new ot(it.APP_DELETED,"The Firebase app was deleted.")}function PV(t){return new ot(it.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Oo(t,e){return new ot(it.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ao(t){throw new ot(it.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Jt.makeFromUrl(e,n)}catch{return new Jt(e,"")}if(r.path==="")return r;throw TV(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(L){L.path_=decodeURIComponent(L.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${s}/o${m}`,"i"),E={bucket:1,path:3},b=n===oT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",N=new RegExp(`^https?://${b}/${s}/${C}`,"i"),x=[{regex:a,indices:c,postModify:i},{regex:g,indices:E,postModify:u},{regex:N,indices:{bucket:1,path:2},postModify:u}];for(let L=0;L<x.length;L++){const q=x[L],G=q.regex.exec(e);if(G){const R=G[q.indices.bucket];let _=G[q.indices.path];_||(_=""),r=new Jt(R,_),q.postModify(r);break}}if(r==null)throw wV(e);return r}}class CV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function c(){return a===2}let u=!1;function h(...C){u||(u=!0,e.apply(null,C))}function d(C){s=setTimeout(()=>{s=null,t(g,c())},C)}function m(){i&&clearTimeout(i)}function g(C,...N){if(u){m();return}if(C){m(),h.call(null,C,...N);return}if(c()||o){m(),h.call(null,C,...N);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,d(x)}let E=!1;function b(C){E||(E=!0,m(),!u&&(s!==null?(C||(a=2),clearTimeout(s),d(0)):C||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,b(!0)},n),b}function kV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(t){return t!==void 0}function VV(t){return typeof t=="object"&&!Array.isArray(t)}function am(t){return typeof t=="string"||t instanceof String}function G_(t){return cm()&&t instanceof Blob}function cm(){return typeof Blob<"u"}function W_(t,e,n,r){if(r<e)throw ad(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ad(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function lT(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var hs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(hs||(hs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,n,r,s,i,o,a,c,u,h,d,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,E)=>{this.resolve_=g,this.reject_=E,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ec(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===hs.NO_ERROR,c=i.getStatus();if(!a||OV(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===hs.ABORT;r(!1,new Ec(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new Ec(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());DV(c)?i(c):i()}catch(c){o(c)}else if(a!==null){const c=om();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(s.canceled){const c=this.appDelete_?cT():IV();o(c)}else{const c=EV();o(c)}};this.canceled_?n(!1,new Ec(!1,null,!0)):this.backoffId_=xV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ec{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function MV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function LV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function FV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function UV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function BV(t,e,n,r,s,i,o=!0){const a=lT(t.urlParams),c=t.url+a,u=Object.assign({},t.headers);return FV(u,e),MV(u,n),LV(u,i),UV(u,r),new NV(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $V(...t){const e=jV();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(cm())return new Blob(t);throw new ot(it.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function zV(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t){if(typeof atob>"u")throw SV("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rh{constructor(e,n){this.data=e,this.contentType=n||null}}function KV(t,e){switch(t){case Sn.RAW:return new rh(uT(e));case Sn.BASE64:case Sn.BASE64URL:return new rh(hT(t,e));case Sn.DATA_URL:return new rh(GV(e),WV(e))}throw om()}function uT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function HV(t){let e;try{e=decodeURIComponent(t)}catch{throw Oo(Sn.DATA_URL,"Malformed data URL.")}return uT(e)}function hT(t,e){switch(t){case Sn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Oo(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Sn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Oo(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=qV(e)}catch(s){throw s.message.includes("polyfill")?s:Oo(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class dT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Oo(Sn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=QV(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function GV(t){const e=new dT(t);return e.base64?hT(Sn.BASE64,e.rest):HV(e.rest)}function WV(t){return new dT(t).contentType}function QV(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n){let r=0,s="";G_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(G_(this.data_)){const r=this.data_,s=zV(r,e,n);return s===null?null:new Er(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Er(r,!0)}}static getBlob(...e){if(cm()){const n=e.map(r=>r instanceof Er?r.data_:r);return new Er($V.apply(null,n))}else{const n=e.map(o=>am(o)?KV(Sn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Er(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){let e;try{e=JSON.parse(t)}catch{return null}return VV(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function JV(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function mT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(t,e){return e}class Vt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||XV}}let Ic=null;function ZV(t){return!am(t)||t.length<2?t:mT(t)}function pT(){if(Ic)return Ic;const t=[];t.push(new Vt("bucket")),t.push(new Vt("generation")),t.push(new Vt("metageneration")),t.push(new Vt("name","fullPath",!0));function e(i,o){return ZV(o)}const n=new Vt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Vt("size");return s.xform=r,t.push(s),t.push(new Vt("timeCreated")),t.push(new Vt("updated")),t.push(new Vt("md5Hash",null,!0)),t.push(new Vt("cacheControl",null,!0)),t.push(new Vt("contentDisposition",null,!0)),t.push(new Vt("contentEncoding",null,!0)),t.push(new Vt("contentLanguage",null,!0)),t.push(new Vt("contentType",null,!0)),t.push(new Vt("metadata","customMetadata",!0)),Ic=t,Ic}function eO(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Jt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function tO(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return eO(r,t),r}function gT(t,e,n){const r=fT(e);return r===null?null:tO(t,r,n)}function nO(t,e,n,r){const s=fT(e);if(s===null||!am(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const h=t.bucket,d=t.fullPath,m="/b/"+o(h)+"/o/"+o(d),g=lm(m,n,r),E=lT({alt:"media",token:u});return g+E})[0]}function rO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class _T{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(t){if(!t)throw om()}function sO(t,e){function n(r,s){const i=gT(t,s,e);return yT(i!==null),i}return n}function iO(t,e){function n(r,s){const i=gT(t,s,e);return yT(i!==null),nO(i,s,t.host,t._protocol)}return n}function vT(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=yV():s=_V():n.getStatus()===402?s=gV(t.bucket):n.getStatus()===403?s=vV(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function oO(t){const e=vT(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=pV(t.path)),i.serverResponse=s.serverResponse,i}return n}function aO(t,e,n){const r=e.fullServerUrl(),s=lm(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new _T(s,i,iO(t,n),o);return a.errorHandler=oO(e),a}function cO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function lO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=cO(null,e)),r}function uO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let L=0;L<2;L++)x=x+Math.random().toString().slice(2);return x}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const u=lO(e,r,s),h=rO(u,n),d="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+c+"--",g=Er.getBlob(d,r,m);if(g===null)throw AV();const E={name:u.fullPath},b=lm(i,t.host,t._protocol),C="POST",N=t.maxUploadRetryTime,V=new _T(b,C,sO(t,n),N);return V.urlParams=E,V.headers=o,V.body=g.uploadData(),V.errorHandler=vT(e),V}class hO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw ao("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ao("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ao("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ao("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ao("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class dO extends hO{initXhr(){this.xhr_.responseType="text"}}function ET(){return new dO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n){this._service=e,n instanceof Jt?this._location=n:this._location=Jt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new As(e,n)}get root(){const e=new Jt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mT(this._location.path)}get storage(){return this._service}get parent(){const e=YV(this._location.path);if(e===null)return null;const n=new Jt(this._location.bucket,e);return new As(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw PV(e)}}function fO(t,e,n){t._throwIfRoot("uploadBytes");const r=uO(t.storage,t._location,pT(),new Er(e,!0),n);return t.storage.makeRequestWithTokens(r,ET).then(s=>({metadata:s,ref:t}))}function mO(t){t._throwIfRoot("getDownloadURL");const e=aO(t.storage,t._location,pT());return t.storage.makeRequestWithTokens(e,ET).then(n=>{if(n===null)throw RV();return n})}function pO(t,e){const n=JV(t._location.path,e),r=new Jt(t._location.bucket,n);return new As(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t){return/^[A-Za-z]+:\/\//.test(t)}function _O(t,e){return new As(t,e)}function IT(t,e){if(t instanceof um){const n=t;if(n._bucket==null)throw bV();const r=new As(n,n._bucket);return e!=null?IT(r,e):r}else return e!==void 0?pO(t,e):t}function yO(t,e){if(e&&gO(e)){if(t instanceof um)return _O(t,e);throw ad("To use ref(service, url), the first argument must be a Storage instance.")}else return IT(t,e)}function Q_(t,e){const n=e==null?void 0:e[aT];return n==null?null:Jt.makeFromBucketSpec(n,t)}function vO(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:IE(s,t.app.options.projectId))}class um{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=oT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fV,this._maxUploadRetryTime=mV,this._requests=new Set,s!=null?this._bucket=Jt.makeFromBucketSpec(s,this._host):this._bucket=Q_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jt.makeFromBucketSpec(this._url,e):this._bucket=Q_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){W_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){W_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new As(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new CV(cT());{const o=BV(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Y_="@firebase/storage",J_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="storage";function o2(t,e,n){return t=Ye(t),fO(t,e,n)}function a2(t){return t=Ye(t),mO(t)}function c2(t,e){return t=Ye(t),yO(t,e)}function EO(t=of(),e){t=Ye(t);const r=va(t,wT).getImmediate({identifier:e}),s=yE("storage");return s&&IO(r,...s),r}function IO(t,e,n,r={}){vO(t,e,n,r)}function wO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new um(n,r,s,e,Ss)}function TO(){ps(new Or(wT,wO,"PUBLIC").setMultipleInstances(!0)),Pn(Y_,J_,""),Pn(Y_,J_,"esm2017")}TO();const bO={apiKey:"AIzaSyBX3pGNFs0PIRbC-6Y-xNOd4nSk00W4WdQ",authDomain:"sgm-pentecostal.firebaseapp.com",projectId:"sgm-pentecostal",storageBucket:"sgm-pentecostal.firebasestorage.app",messagingSenderId:"940394996461",appId:"1:940394996461:web:b341efd6e9bdd831e7e2e4"},mu=RE(bO);Mx(mu,{localCache:Xx({tabManager:Rw()})});const vl=hV(mu),co=Lx(mu),l2=EO(mu),AO=XR("app",{state:()=>({drawerDisplay:!1,formMiembros:{display:!1,mode:"add",id:""},viewRegistro:{display:!1,id:""},formAmigos:{display:!1,mode:"add",id:""},selectImg:{display:!1,img:null,urlImg:ZR},tomarFoto:!1,progre:!1,data:null,miembros:[],amigos:[],birthday:[],solicitudes:[],notificaciones:{value:0,solicitudes:0,informacion:0}}),actions:{async getDataUser(){if(this.data!==null)return;const t=await vl.currentUser;yc(nd(co,"Users",t.email),e=>{this.data=e.data(),e.data().rol!="admin"&&(this.getMiembros(t.email),this.getAmigos(t.email),this.getSolicitudes(t.email))})},async getMiembros(t){const e=Zu(Xu(co,"Membresia"),io("sede","==",t),io("estado","==","Activo"));yc(e,n=>{const r=[],s=[];n.forEach(a=>{const c=a.data();s.push({nombre:c.nombre+" "+c.apellido,fechaNacimiento:c.fechaNacimiento,id:a.id,sexo:c.sexo}),r.push(c)}),this.miembros=r,this.birthday=s;var i=[];for(const a in r)i.push({n:r[a].nombre+" "+r[a].apellido,f:r[a].fechaNacimiento});const o=JSON.stringify(i);auxPersonas=o})},async getAmigos(t){const e=Zu(Xu(co,"Amigos"),io("sede","==",t));yc(e,n=>{const r=[];n.forEach(s=>{const i=s.data();r.push(i)}),this.amigos=r})},async getSolicitudes(t){const e=Zu(Xu(co,"Solicitudes"),Hx(io("userEmisor","==",t),io("userReceptor","==",t)));yc(e,n=>{const r=[];this.notificaciones.solicitudes=0,n.forEach(s=>{r.push(s.data()),s.data().userEmisor!==vl.currentUser.email&&this.notificaciones.solicitudes++}),this.notificaciones.value=this.notificaciones.solicitudes+this.notificaciones.informacion,this.solicitudes=r})},async actualizar(t,e){const n=nd(co,"Membresia",t);await Yx(n,{sede:e})}}});const RO=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};function xe(t,e){return n=>Object.keys(t).reduce((r,s)=>{const o=typeof t[s]=="object"&&t[s]!=null&&!Array.isArray(t[s])?t[s]:{type:t[s]};return n&&s in n?r[s]={...o,default:n[s]}:r[s]=o,e&&!r[s].source&&(r[s].source=e),r},{})}const vn=xe({class:[String,Array],style:{type:[String,Array,Object],default:null}},"component"),rt=typeof window<"u",hm=rt&&"IntersectionObserver"in window,SO=rt&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);function X_(t,e,n){PO(t,e),e.set(t,n)}function PO(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function CO(t,e,n){var r=TT(t,e,"set");return xO(t,r,n),n}function xO(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function Yr(t,e){var n=TT(t,e,"get");return kO(t,n)}function TT(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function kO(t,e){return e.get?e.get.call(t):e.value}function bT(t,e,n){const r=e.length-1;if(r<0)return t===void 0?n:t;for(let s=0;s<r;s++){if(t==null)return n;t=t[e[s]]}return t==null||t[e[r]]===void 0?n:t[e[r]]}function DO(t,e){if(t===e)return!0;if(t instanceof Date&&e instanceof Date&&t.getTime()!==e.getTime()||t!==Object(t)||e!==Object(e))return!1;const n=Object.keys(t);return n.length!==Object.keys(e).length?!1:n.every(r=>DO(t[r],e[r]))}function cd(t,e,n){return t==null||!e||typeof e!="string"?n:t[e]!==void 0?t[e]:(e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,""),bT(t,e.split("."),n))}function u2(t,e,n){if(e==null)return t===void 0?n:t;if(t!==Object(t)){if(typeof e!="function")return n;const s=e(t,n);return typeof s>"u"?n:s}if(typeof e=="string")return cd(t,e,n);if(Array.isArray(e))return bT(t,e,n);if(typeof e!="function")return n;const r=e(t,n);return typeof r>"u"?n:r}function AT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:t},(n,r)=>e+r)}function Oe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(t==null||t===""))return isNaN(+t)?String(t):isFinite(+t)?`${Number(t)}${e}`:void 0}function ld(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function ud(t){return t&&"$el"in t?t.$el:t}const Z_=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16}),h2=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function d2(t){return Object.keys(t)}function sh(t,e){return e.every(n=>t.hasOwnProperty(n))}function hd(t,e,n){const r=Object.create(null),s=Object.create(null);for(const i in t)e.some(o=>o instanceof RegExp?o.test(i):o===i)&&!(n!=null&&n.some(o=>o===i))?r[i]=t[i]:s[i]=t[i];return[r,s]}function VO(t,e){const n={...t};return e.forEach(r=>delete n[r]),n}const RT=/^on[^a-z]/,ST=t=>RT.test(t),OO=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"];function f2(t){const[e,n]=hd(t,[RT]),r=VO(e,OO),[s,i]=hd(n,["class","style","id",/^data-/]);return Object.assign(s,e),Object.assign(i,r),[s,i]}function m2(t){return t==null?[]:Array.isArray(t)?t:[t]}function dd(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(e,Math.min(n,t))}function ey(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return t+n.repeat(Math.max(0,e-t.length))}function NO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let r=0;for(;r<t.length;)n.push(t.substr(r,e)),r+=e;return n}function p2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(t<e)return`${t} B`;const n=e===1024?["Ki","Mi","Gi"]:["k","M","G"];let r=-1;for(;Math.abs(t)>=e&&r<n.length-1;)t/=e,++r;return`${t.toFixed(1)} ${n[r]}B`}function rn(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r={};for(const s in t)r[s]=t[s];for(const s in e){const i=t[s],o=e[s];if(ld(i)&&ld(o)){r[s]=rn(i,o,n);continue}if(Array.isArray(i)&&Array.isArray(o)&&n){r[s]=n(i,o);continue}r[s]=o}return r}function PT(t){return t.map(e=>e.type===vt?PT(e.children):e).flat()}function ds(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(ds.cache.has(t))return ds.cache.get(t);const e=t.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return ds.cache.set(t,e),e}ds.cache=new Map;function ih(t,e){if(!e||typeof e!="object")return[];if(Array.isArray(e))return e.map(n=>ih(t,n)).flat(1);if(Array.isArray(e.children))return e.children.map(n=>ih(t,n)).flat(1);if(e.component){if(Object.getOwnPropertySymbols(e.component.provides).includes(t))return[e.component];if(e.component.subTree)return ih(t,e.component.subTree).flat(1)}return[]}var wc=new WeakMap,qs=new WeakMap;class g2{constructor(e){X_(this,wc,{writable:!0,value:[]}),X_(this,qs,{writable:!0,value:0}),this.size=e}push(e){Yr(this,wc)[Yr(this,qs)]=e,CO(this,qs,(Yr(this,qs)+1)%this.size)}values(){return Yr(this,wc).slice(Yr(this,qs)).concat(Yr(this,wc).slice(0,Yr(this,qs)))}}function dm(t){const e=Vn({}),n=Y(t);return Fr(()=>{for(const r in n.value)e[r]=n.value[r]},{flush:"sync"}),Ol(e)}function El(t,e){return t.includes(e)}function CT(t){return t[2].toLowerCase()+t.slice(3)}const _2=()=>[Function,Array];function ty(t,e){return e="on"+Pi(e),!!(t[e]||t[`${e}Once`]||t[`${e}Capture`]||t[`${e}OnceCapture`]||t[`${e}CaptureOnce`])}function y2(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(Array.isArray(t))for(const s of t)s(...n);else typeof t=="function"&&t(...n)}function xT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(r=>`${r}${e?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...t.querySelectorAll(n)]}function MO(t,e,n){let r,s=t.indexOf(document.activeElement);const i=e==="next"?1:-1;do s+=i,r=t[s];while((!r||r.offsetParent==null||!((n==null?void 0:n(r))??!0))&&s<t.length&&s>=0);return r}function LO(t,e){var r,s,i,o;const n=xT(t);if(!e)(t===document.activeElement||!t.contains(document.activeElement))&&((r=n[0])==null||r.focus());else if(e==="first")(s=n[0])==null||s.focus();else if(e==="last")(i=n.at(-1))==null||i.focus();else if(typeof e=="number")(o=n[e])==null||o.focus();else{const a=MO(n,e);a?a.focus():LO(t,e==="next"?"first":"last")}}function FO(t,e){if(!(rt&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${e})`)))return null;try{return!!t&&t.matches(e)}catch{return null}}const kT=["top","bottom"],UO=["start","end","left","right"];function fd(t,e){let[n,r]=t.split(" ");return r||(r=El(kT,n)?"start":El(UO,n)?"top":"center"),{side:ny(n,e),align:ny(r,e)}}function ny(t,e){return t==="start"?e?"right":"left":t==="end"?e?"left":"right":t}function oh(t){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.side],align:t.align}}function ah(t){return{side:t.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.align]}}function ry(t){return{side:t.align,align:t.side}}function sy(t){return El(kT,t.side)?"y":"x"}class ci{constructor(e){let{x:n,y:r,width:s,height:i}=e;this.x=n,this.y=r,this.width=s,this.height=i}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function iy(t,e){return{x:{before:Math.max(0,e.left-t.left),after:Math.max(0,t.right-e.right)},y:{before:Math.max(0,e.top-t.top),after:Math.max(0,t.bottom-e.bottom)}}}function DT(t){const e=t.getBoundingClientRect(),n=getComputedStyle(t),r=n.transform;if(r){let s,i,o,a,c;if(r.startsWith("matrix3d("))s=r.slice(9,-1).split(/, /),i=+s[0],o=+s[5],a=+s[12],c=+s[13];else if(r.startsWith("matrix("))s=r.slice(7,-1).split(/, /),i=+s[0],o=+s[3],a=+s[4],c=+s[5];else return new ci(e);const u=n.transformOrigin,h=e.x-a-(1-i)*parseFloat(u),d=e.y-c-(1-o)*parseFloat(u.slice(u.indexOf(" ")+1)),m=i?e.width/i:t.offsetWidth+1,g=o?e.height/o:t.offsetHeight+1;return new ci({x:h,y:d,width:m,height:g})}else return new ci(e)}function Io(t,e,n){if(typeof t.animate>"u")return{finished:Promise.resolve()};let r;try{r=t.animate(e,n)}catch{return{finished:Promise.resolve()}}return typeof r.finished>"u"&&(r.finished=new Promise(s=>{r.onfinish=()=>{s(r)}})),r}const zc=new WeakMap;function BO(t,e){Object.keys(e).forEach(n=>{if(ST(n)){const r=CT(n),s=zc.get(t);if(e[n]==null)s==null||s.forEach(i=>{const[o,a]=i;o===r&&(t.removeEventListener(r,a),s.delete(i))});else if(!s||![...s].some(i=>i[0]===r&&i[1]===e[n])){t.addEventListener(r,e[n]);const i=s||new Set;i.add([r,e[n]]),zc.has(t)||zc.set(t,i)}}else e[n]==null?t.removeAttribute(n):t.setAttribute(n,e[n])})}function jO(t,e){Object.keys(e).forEach(n=>{if(ST(n)){const r=CT(n),s=zc.get(t);s==null||s.forEach(i=>{const[o,a]=i;o===r&&(t.removeEventListener(r,a),s.delete(i))})}else t.removeAttribute(n)})}const Ks=2.4,oy=.2126729,ay=.7151522,cy=.072175,$O=.55,zO=.58,qO=.57,KO=.62,Tc=.03,ly=1.45,HO=5e-4,GO=1.25,WO=1.25,uy=.078,hy=12.82051282051282,bc=.06,dy=.001;function fy(t,e){const n=(t.r/255)**Ks,r=(t.g/255)**Ks,s=(t.b/255)**Ks,i=(e.r/255)**Ks,o=(e.g/255)**Ks,a=(e.b/255)**Ks;let c=n*oy+r*ay+s*cy,u=i*oy+o*ay+a*cy;if(c<=Tc&&(c+=(Tc-c)**ly),u<=Tc&&(u+=(Tc-u)**ly),Math.abs(u-c)<HO)return 0;let h;if(u>c){const d=(u**$O-c**zO)*GO;h=d<dy?0:d<uy?d-d*hy*bc:d-bc}else{const d=(u**KO-c**qO)*WO;h=d>-dy?0:d>-uy?d-d*hy*bc:d+bc}return h*100}function v2(t,e){e=Array.isArray(e)?e.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${e.at(-1)}'`:`'${e}'`}const Il=.20689655172413793,QO=t=>t>Il**3?Math.cbrt(t):t/(3*Il**2)+4/29,YO=t=>t>Il?t**3:3*Il**2*(t-4/29);function VT(t){const e=QO,n=e(t[1]);return[116*n-16,500*(e(t[0]/.95047)-n),200*(n-e(t[2]/1.08883))]}function OT(t){const e=YO,n=(t[0]+16)/116;return[e(n+t[1]/500)*.95047,e(n),e(n-t[2]/200)*1.08883]}const JO=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],XO=t=>t<=.0031308?t*12.92:1.055*t**(1/2.4)-.055,ZO=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],eN=t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4;function NT(t){const e=Array(3),n=XO,r=JO;for(let s=0;s<3;++s)e[s]=Math.round(dd(n(r[s][0]*t[0]+r[s][1]*t[1]+r[s][2]*t[2]))*255);return{r:e[0],g:e[1],b:e[2]}}function fm(t){let{r:e,g:n,b:r}=t;const s=[0,0,0],i=eN,o=ZO;e=i(e/255),n=i(n/255),r=i(r/255);for(let a=0;a<3;++a)s[a]=o[a][0]*e+o[a][1]*n+o[a][2]*r;return s}function my(t){return!!t&&/^(#|var\(--|(rgb|hsl)a?\()/.test(t)}const py=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,tN={rgb:(t,e,n,r)=>({r:t,g:e,b:n,a:r}),rgba:(t,e,n,r)=>({r:t,g:e,b:n,a:r}),hsl:(t,e,n,r)=>gy({h:t,s:e,l:n,a:r}),hsla:(t,e,n,r)=>gy({h:t,s:e,l:n,a:r}),hsv:(t,e,n,r)=>la({h:t,s:e,v:n,a:r}),hsva:(t,e,n,r)=>la({h:t,s:e,v:n,a:r})};function Gn(t){if(typeof t=="number")return{r:(t&16711680)>>16,g:(t&65280)>>8,b:t&255};if(typeof t=="string"&&py.test(t)){const{groups:e}=t.match(py),{fn:n,values:r}=e,s=r.split(/,\s*/).map(i=>i.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(i)/100:parseFloat(i));return tN[n](...s)}else if(typeof t=="string"){let e=t.startsWith("#")?t.slice(1):t;return[3,4].includes(e.length)?e=e.split("").map(n=>n+n).join(""):[6,8].includes(e.length),rN(e)}else if(typeof t=="object"){if(sh(t,["r","g","b"]))return t;if(sh(t,["h","s","l"]))return la(MT(t));if(sh(t,["h","s","v"]))return la(t)}throw new TypeError(`Invalid color: ${t==null?t:String(t)||t.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function la(t){const{h:e,s:n,v:r,a:s}=t,i=a=>{const c=(a+e/60)%6;return r-r*n*Math.max(Math.min(c,4-c,1),0)},o=[i(5),i(3),i(1)].map(a=>Math.round(a*255));return{r:o[0],g:o[1],b:o[2],a:s}}function gy(t){return la(MT(t))}function MT(t){const{h:e,s:n,l:r,a:s}=t,i=r+n*Math.min(r,1-r),o=i===0?0:2-2*r/i;return{h:e,s:o,v:i,a:s}}function Ac(t){const e=Math.round(t).toString(16);return("00".substr(0,2-e.length)+e).toUpperCase()}function nN(t){let{r:e,g:n,b:r,a:s}=t;return`#${[Ac(e),Ac(n),Ac(r),s!==void 0?Ac(Math.round(s*255)):""].join("")}`}function rN(t){t=sN(t);let[e,n,r,s]=NO(t,2).map(i=>parseInt(i,16));return s=s===void 0?s:s/255,{r:e,g:n,b:r,a:s}}function sN(t){return t.startsWith("#")&&(t=t.slice(1)),t=t.replace(/([^0-9a-f])/gi,"F"),(t.length===3||t.length===4)&&(t=t.split("").map(e=>e+e).join("")),t.length!==6&&(t=ey(ey(t,6),8,"F")),t}function iN(t,e){const n=VT(fm(t));return n[0]=n[0]+e*10,NT(OT(n))}function oN(t,e){const n=VT(fm(t));return n[0]=n[0]-e*10,NT(OT(n))}function aN(t){const e=Gn(t);return fm(e)[1]}function LT(t){const e=Math.abs(fy(Gn(0),Gn(t)));return Math.abs(fy(Gn(16777215),Gn(t)))>Math.min(e,50)?"#fff":"#000"}function Ua(t){if(t._setup=t._setup??t.setup,!t.name)return t;if(t._setup){t.props=xe(t.props??{},t.name)();const e=Object.keys(t.props);t.filterProps=function(r){return hd(r,e,["class","style"])},t.props._as=String,t.setup=function(r,s){const i=gm();if(!i.value)return t._setup(r,s);const{props:o,provideSubDefaults:a}=gN(r,r._as??t.name,i),c=t._setup(o,s);return a(),c}}return t}function Ut(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e=>(t?Ua:Kd)(e)}function mm(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return Ut()({name:n??Pi(pn(t.replace(/__/g,"-"))),props:{tag:{type:String,default:e},...vn()},setup(r,s){let{slots:i}=s;return()=>{var o;return ki(r.tag,{class:[t,r.class],style:r.style},(o=i.default)==null?void 0:o.call(i))}}})}function FT(t){if(typeof t.getRootNode!="function"){for(;t.parentNode;)t=t.parentNode;return t!==document?null:document}const e=t.getRootNode();return e!==document&&e.getRootNode({composed:!0})!==document?null:e}const md="cubic-bezier(0.4, 0, 0.2, 1)",cN="cubic-bezier(0.0, 0, 0.2, 1)",lN="cubic-bezier(0.4, 0, 1, 1)";function cn(t,e){const n=tf();if(!n)throw new Error(`[Vuetify] ${t} ${e||"must be called from inside a setup function"}`);return n}function Vs(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const e=cn(t).type;return ds((e==null?void 0:e.aliasName)||(e==null?void 0:e.name))}let UT=0,qc=new WeakMap;function BT(){const t=cn("getUid");if(qc.has(t))return qc.get(t);{const e=UT++;return qc.set(t,e),e}}BT.reset=()=>{UT=0,qc=new WeakMap};function uN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;t;){if(e?hN(t):pm(t))return t;t=t.parentElement}return document.scrollingElement}function wl(t,e){const n=[];if(e&&t&&!e.contains(t))return n;for(;t&&(pm(t)&&n.push(t),t!==e);)t=t.parentElement;return n}function pm(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return e.overflowY==="scroll"||e.overflowY==="auto"&&t.scrollHeight>t.clientHeight}function hN(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return["scroll","auto"].includes(e.overflowY)}function dN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cn("injectSelf");const{provides:n}=e;if(n&&t in n)return n[t]}function fN(t){for(;t;){if(window.getComputedStyle(t).position==="fixed")return!0;t=t.offsetParent}return!1}function En(t){const e=cn("useRender");e.render=t}const Ti=Symbol.for("vuetify:defaults");function mN(t){return ze(t)}function gm(){const t=ct(Ti);if(!t)throw new Error("[Vuetify] Could not find defaults instance");return t}function jT(t,e){const n=gm(),r=ze(t),s=Y(()=>{if(Mt(e==null?void 0:e.disabled))return n.value;const o=Mt(e==null?void 0:e.scoped),a=Mt(e==null?void 0:e.reset),c=Mt(e==null?void 0:e.root);if(r.value==null&&!(o||a||c))return n.value;let u=rn(r.value,{prev:n.value});if(o)return u;if(a||c){const h=Number(a||1/0);for(let d=0;d<=h&&!(!u||!("prev"in u));d++)u=u.prev;return u&&typeof c=="string"&&c in u&&(u=rn(rn(u,{prev:u}),u[c])),u}return u.prev?rn(u.prev,u):u});return Ar(Ti,s),s}function pN(t,e){var n,r;return typeof((n=t.props)==null?void 0:n[e])<"u"||typeof((r=t.props)==null?void 0:r[ds(e)])<"u"}function gN(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gm();const r=cn("useDefaults");if(e=e??r.type.name??r.type.__name,!e)throw new Error("[Vuetify] Could not determine component name");const s=Y(()=>{var c;return(c=n.value)==null?void 0:c[t._as??e]}),i=new Proxy(t,{get(c,u){var d,m,g,E;const h=Reflect.get(c,u);return u==="class"||u==="style"?[(d=s.value)==null?void 0:d[u],h].filter(b=>b!=null):typeof u=="string"&&!pN(r.vnode,u)?((m=s.value)==null?void 0:m[u])??((E=(g=n.value)==null?void 0:g.global)==null?void 0:E[u])??h:h}}),o=ft();Fr(()=>{if(s.value){const c=Object.entries(s.value).filter(u=>{let[h]=u;return h.startsWith(h[0].toUpperCase())});o.value=c.length?Object.fromEntries(c):void 0}else o.value=void 0});function a(){const c=dN(Ti,r);Ar(Ti,Y(()=>o.value?rn((c==null?void 0:c.value)??{},o.value):c==null?void 0:c.value))}return{props:i,provideSubDefaults:a}}const _N=Ut()({name:"VCardActions",props:vn(),setup(t,e){let{slots:n}=e;return jT({VBtn:{variant:"text"}}),En(()=>{var r;return $("div",{class:["v-card-actions",t.class],style:t.style},[(r=n.default)==null?void 0:r.call(n)])}),{}}}),yN=mm("v-card-subtitle"),vN=mm("v-card-title");function _m(t){return dm(()=>{const e=[],n={};if(t.value.background)if(my(t.value.background)){if(n.backgroundColor=t.value.background,!t.value.text){const r=LT(n.backgroundColor);n.color=r,n.caretColor=r}}else e.push(`bg-${t.value.background}`);return t.value.text&&(my(t.value.text)?(n.color=t.value.text,n.caretColor=t.value.text):e.push(`text-${t.value.text}`)),{colorClasses:e,colorStyles:n}})}function Tl(t,e){const n=Y(()=>({text:$e(t)?t.value:e?t[e]:null})),{colorClasses:r,colorStyles:s}=_m(n);return{textColorClasses:r,textColorStyles:s}}function pd(t,e){const n=Y(()=>({background:$e(t)?t.value:e?t[e]:null})),{colorClasses:r,colorStyles:s}=_m(n);return{backgroundColorClasses:r,backgroundColorStyles:s}}const EN={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar"},IN={component:t=>ki(zT,{...t,class:"mdi"})},Rs=[String,Function,Object,Array],gd=Symbol.for("vuetify:icons"),pu=xe({icon:{type:Rs},tag:{type:String,required:!0}},"icon"),_y=Ut()({name:"VComponentIcon",props:pu(),setup(t,e){let{slots:n}=e;return()=>{const r=t.icon;return $(t.tag,null,{default:()=>{var s;return[t.icon?$(r,null,null):(s=n.default)==null?void 0:s.call(n)]}})}}}),$T=Ua({name:"VSvgIcon",inheritAttrs:!1,props:pu(),setup(t,e){let{attrs:n}=e;return()=>$(t.tag,qt(n,{style:null}),{default:()=>[$("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(t.icon)?t.icon.map(r=>Array.isArray(r)?$("path",{d:r[0],"fill-opacity":r[1]},null):$("path",{d:r},null)):$("path",{d:t.icon},null)])]})}});Ua({name:"VLigatureIcon",props:pu(),setup(t){return()=>$(t.tag,null,{default:()=>[t.icon]})}});const zT=Ua({name:"VClassIcon",props:pu(),setup(t){return()=>$(t.tag,{class:t.icon},null)}}),wN={svg:{component:$T},class:{component:zT}};function TN(t){return rn({defaultSet:"mdi",sets:{...wN,mdi:IN},aliases:{...EN,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z"}},t)}const bN=t=>{const e=ct(gd);if(!e)throw new Error("Missing Vuetify Icons provide!");return{iconData:Y(()=>{var c;const r=Mt(t);if(!r)return{component:_y};let s=r;if(typeof s=="string"&&(s=s.trim(),s.startsWith("$")&&(s=(c=e.aliases)==null?void 0:c[s.slice(1)])),!s)throw new Error(`Could not find aliased icon "${r}"`);if(Array.isArray(s))return{component:$T,icon:s};if(typeof s!="string")return{component:_y,icon:s};const i=Object.keys(e.sets).find(u=>typeof s=="string"&&s.startsWith(`${u}:`)),o=i?s.slice(i.length+1):s;return{component:e.sets[i??e.defaultSet].component,icon:o}})}},AN=["x-small","small","default","large","x-large"],ym=xe({size:{type:[String,Number],default:"default"}},"size");function vm(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vs();return dm(()=>{let n,r;return El(AN,t.size)?n=`${e}--size-${t.size}`:t.size&&(r={width:Oe(t.size),height:Oe(t.size)}),{sizeClasses:n,sizeStyles:r}})}const Ba=xe({tag:{type:String,default:"div"}},"tag"),ua=Symbol.for("vuetify:theme"),Li=xe({theme:String},"theme"),lo={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-variant":"#a3a3a3","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function RN(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:lo;if(!t)return{...lo,isDisabled:!0};const e={};for(const[s,i]of Object.entries(t.themes??{})){const o=i.dark||s==="dark"?(n=lo.themes)==null?void 0:n.dark:(r=lo.themes)==null?void 0:r.light;e[s]=rn(o,i)}return rn(lo,{...t,themes:e})}function SN(t){const e=RN(t),n=ze(e.defaultTheme),r=ze(e.themes),s=Y(()=>{const h={};for(const[d,m]of Object.entries(r.value)){const g=h[d]={...m,colors:{...m.colors}};if(e.variations)for(const E of e.variations.colors){const b=g.colors[E];if(b)for(const C of["lighten","darken"]){const N=C==="lighten"?iN:oN;for(const V of AT(e.variations[C],1))g.colors[`${E}-${C}-${V}`]=nN(N(Gn(b),V))}}for(const E of Object.keys(g.colors)){if(/^on-[a-z]/.test(E)||g.colors[`on-${E}`])continue;const b=`on-${E}`,C=Gn(g.colors[E]);g.colors[b]=LT(C)}}return h}),i=Y(()=>s.value[n.value]),o=Y(()=>{const h=[];i.value.dark&&Jr(h,":root",["color-scheme: dark"]),Jr(h,":root",yy(i.value));for(const[E,b]of Object.entries(s.value))Jr(h,`.v-theme--${E}`,[`color-scheme: ${b.dark?"dark":"normal"}`,...yy(b)]);const d=[],m=[],g=new Set(Object.values(s.value).flatMap(E=>Object.keys(E.colors)));for(const E of g)/^on-[a-z]/.test(E)?Jr(m,`.${E}`,[`color: rgb(var(--v-theme-${E})) !important`]):(Jr(d,`.bg-${E}`,[`--v-theme-overlay-multiplier: var(--v-theme-${E}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${E})) !important`,`color: rgb(var(--v-theme-on-${E})) !important`]),Jr(m,`.text-${E}`,[`color: rgb(var(--v-theme-${E})) !important`]),Jr(m,`.border-${E}`,[`--v-border-color: var(--v-theme-${E})`]));return h.push(...d,...m),h.map((E,b)=>b===0?E:`    ${E}`).join("")});function a(){return{style:[{children:o.value,id:"vuetify-theme-stylesheet",nonce:e.cspNonce||!1}]}}function c(h){if(e.isDisabled)return;const d=h._context.provides.usehead;if(d)if(d.push){const m=d.push(a);rt&&Fe(o,()=>{m.patch(a)})}else rt?(d.addHeadObjs(Y(a)),Fr(()=>d.updateDOM())):d.addHeadObjs(a());else{let g=function(){if(typeof document<"u"&&!m){const E=document.createElement("style");E.type="text/css",E.id="vuetify-theme-stylesheet",e.cspNonce&&E.setAttribute("nonce",e.cspNonce),m=E,document.head.appendChild(m)}m&&(m.innerHTML=o.value)},m=rt?document.getElementById("vuetify-theme-stylesheet"):null;rt?Fe(o,g,{immediate:!0}):g()}}const u=Y(()=>e.isDisabled?void 0:`v-theme--${n.value}`);return{install:c,isDisabled:e.isDisabled,name:n,themes:r,current:i,computedThemes:s,themeClasses:u,styles:o,global:{name:n,current:i}}}function Fi(t){cn("provideTheme");const e=ct(ua,null);if(!e)throw new Error("Could not find Vuetify theme injection");const n=Y(()=>t.theme??e.name.value),r=Y(()=>e.themes.value[n.value]),s=Y(()=>e.isDisabled?void 0:`v-theme--${n.value}`),i={...e,name:n,current:r,themeClasses:s};return Ar(ua,i),i}function E2(){cn("useTheme");const t=ct(ua,null);if(!t)throw new Error("Could not find Vuetify theme injection");return t}function Jr(t,e,n){t.push(`${e} {
`,...n.map(r=>`  ${r};
`),`}
`)}function yy(t){const e=t.dark?2:1,n=t.dark?1:2,r=[];for(const[s,i]of Object.entries(t.colors)){const o=Gn(i);r.push(`--v-theme-${s}: ${o.r},${o.g},${o.b}`),s.startsWith("on-")||r.push(`--v-theme-${s}-overlay-multiplier: ${aN(i)>.18?e:n}`)}for(const[s,i]of Object.entries(t.variables)){const o=typeof i=="string"&&i.startsWith("#")?Gn(i):void 0,a=o?`${o.r}, ${o.g}, ${o.b}`:void 0;r.push(`--v-${s}: ${a??i}`)}return r}const PN=xe({color:String,start:Boolean,end:Boolean,icon:Rs,...vn(),...ym(),...Ba({tag:"i"}),...Li()},"VIcon"),CN=Ut()({name:"VIcon",props:PN(),setup(t,e){let{attrs:n,slots:r}=e;const s=ze(),{themeClasses:i}=Fi(t),{iconData:o}=bN(Y(()=>s.value||t.icon)),{sizeClasses:a}=vm(t),{textColorClasses:c,textColorStyles:u}=Tl(Bo(t,"color"));return En(()=>{var d,m;const h=(d=r.default)==null?void 0:d.call(r);return h&&(s.value=(m=PT(h).filter(g=>g.type===ga&&g.children&&typeof g.children=="string")[0])==null?void 0:m.children),$(o.value.component,{tag:t.tag,icon:o.value.icon,class:["v-icon","notranslate",i.value,a.value,c.value,{"v-icon--clickable":!!n.onClick,"v-icon--start":t.start,"v-icon--end":t.end},t.class],style:[a.value?void 0:{fontSize:Oe(t.size),height:Oe(t.size),width:Oe(t.size)},u.value,t.style],role:n.onClick?"button":void 0,"aria-hidden":!n.onClick},{default:()=>[h]})}),{}}});const Em=xe({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Im(t){return{dimensionStyles:Y(()=>({height:Oe(t.height),maxHeight:Oe(t.maxHeight),maxWidth:Oe(t.maxWidth),minHeight:Oe(t.minHeight),minWidth:Oe(t.minWidth),width:Oe(t.width)}))}}function xN(t){return{aspectStyles:Y(()=>{const e=Number(t.aspectRatio);return e?{paddingBottom:String(1/e*100)+"%"}:void 0})}}const qT=xe({aspectRatio:[String,Number],contentClass:String,inline:Boolean,...vn(),...Em()},"VResponsive"),vy=Ut()({name:"VResponsive",props:qT(),setup(t,e){let{slots:n}=e;const{aspectStyles:r}=xN(t),{dimensionStyles:s}=Im(t);return En(()=>{var i;return $("div",{class:["v-responsive",{"v-responsive--inline":t.inline},t.class],style:[s.value,t.style]},[$("div",{class:"v-responsive__sizer",style:r.value},null),(i=n.additional)==null?void 0:i.call(n),n.default&&$("div",{class:["v-responsive__content",t.contentClass]},[n.default()])])}),{}}}),KT=xe({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:t=>t!==!0}},"transition"),wo=(t,e)=>{let{slots:n}=e;const{transition:r,disabled:s,...i}=t,{component:o=ms,...a}=typeof r=="object"?r:{};return ki(o,qt(typeof r=="string"?{name:s?"":r}:a,i,{disabled:s}),n)};function kN(t,e){if(!hm)return;const n=e.modifiers||{},r=e.value,{handler:s,options:i}=typeof r=="object"?r:{handler:r,options:{}},o=new IntersectionObserver(function(){var d;let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1?arguments[1]:void 0;const u=(d=t._observe)==null?void 0:d[e.instance.$.uid];if(!u)return;const h=a.some(m=>m.isIntersecting);s&&(!n.quiet||u.init)&&(!n.once||h||u.init)&&s(h,a,c),h&&n.once?HT(t,e):u.init=!0},i);t._observe=Object(t._observe),t._observe[e.instance.$.uid]={init:!1,observer:o},o.observe(t)}function HT(t,e){var r;const n=(r=t._observe)==null?void 0:r[e.instance.$.uid];n&&(n.observer.unobserve(t),delete t._observe[e.instance.$.uid])}const DN={mounted:kN,unmounted:HT},VN=DN,ON=xe({alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,...qT(),...vn(),...KT()},"VImg"),GT=Ut()({name:"VImg",directives:{intersect:VN},props:ON(),emits:{loadstart:t=>!0,load:t=>!0,error:t=>!0},setup(t,e){let{emit:n,slots:r}=e;const s=ft(""),i=ze(),o=ft(t.eager?"loading":"idle"),a=ft(),c=ft(),u=Y(()=>t.src&&typeof t.src=="object"?{src:t.src.src,srcset:t.srcset||t.src.srcset,lazySrc:t.lazySrc||t.src.lazySrc,aspect:Number(t.aspectRatio||t.src.aspect||0)}:{src:t.src,srcset:t.srcset,lazySrc:t.lazySrc,aspect:Number(t.aspectRatio||0)}),h=Y(()=>u.value.aspect||a.value/c.value||0);Fe(()=>t.src,()=>{d(o.value!=="idle")}),Fe(h,(_,v)=>{!_&&v&&i.value&&C(i.value)}),Fv(()=>d());function d(_){if(!(t.eager&&_)&&!(hm&&!_&&!t.eager)){if(o.value="loading",u.value.lazySrc){const v=new Image;v.src=u.value.lazySrc,C(v,null)}u.value.src&&yn(()=>{var v,w;if(n("loadstart",((v=i.value)==null?void 0:v.currentSrc)||u.value.src),(w=i.value)!=null&&w.complete){if(i.value.naturalWidth||g(),o.value==="error")return;h.value||C(i.value,null),m()}else h.value||C(i.value),E()})}}function m(){var _;E(),o.value="loaded",n("load",((_=i.value)==null?void 0:_.currentSrc)||u.value.src)}function g(){var _;o.value="error",n("error",((_=i.value)==null?void 0:_.currentSrc)||u.value.src)}function E(){const _=i.value;_&&(s.value=_.currentSrc||_.src)}let b=-1;function C(_){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const w=()=>{clearTimeout(b);const{naturalHeight:S,naturalWidth:T}=_;S||T?(a.value=T,c.value=S):!_.complete&&o.value==="loading"&&v!=null?b=window.setTimeout(w,v):(_.currentSrc.endsWith(".svg")||_.currentSrc.startsWith("data:image/svg+xml"))&&(a.value=1,c.value=1)};w()}const N=Y(()=>({"v-img__img--cover":t.cover,"v-img__img--contain":!t.cover})),V=()=>{var w;if(!u.value.src||o.value==="idle")return null;const _=$("img",{class:["v-img__img",N.value],src:u.value.src,srcset:u.value.srcset,alt:t.alt,sizes:t.sizes,ref:i,onLoad:m,onError:g},null),v=(w=r.sources)==null?void 0:w.call(r);return $(wo,{transition:t.transition,appear:!0},{default:()=>[Jc(v?$("picture",{class:"v-img__picture"},[v,_]):_,[[lE,o.value==="loaded"]])]})},x=()=>$(wo,{transition:t.transition},{default:()=>[u.value.lazySrc&&o.value!=="loaded"&&$("img",{class:["v-img__img","v-img__img--preload",N.value],src:u.value.lazySrc,alt:t.alt},null)]}),L=()=>r.placeholder?$(wo,{transition:t.transition,appear:!0},{default:()=>[(o.value==="loading"||o.value==="error"&&!r.error)&&$("div",{class:"v-img__placeholder"},[r.placeholder()])]}):null,q=()=>r.error?$(wo,{transition:t.transition,appear:!0},{default:()=>[o.value==="error"&&$("div",{class:"v-img__error"},[r.error()])]}):null,G=()=>t.gradient?$("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${t.gradient})`}},null):null,R=ft(!1);{const _=Fe(h,v=>{v&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{R.value=!0})}),_())})}return En(()=>{const[_]=vy.filterProps(t);return Jc($(vy,qt({class:["v-img",{"v-img--booting":!R.value},t.class],style:[{width:Oe(t.width==="auto"?a.value:t.width)},t.style]},_,{aspectRatio:h.value,"aria-label":t.alt,role:t.alt?"img":void 0}),{additional:()=>$(vt,null,[$(V,null,null),$(x,null,null),$(G,null,null),$(L,null,null),$(q,null,null)]),default:r.default}),[[Wd("intersect"),{handler:d,options:t.options},null,{once:!0}]])}),{currentSrc:s,image:i,state:o,naturalWidth:a,naturalHeight:c}}}),NN=[null,"default","comfortable","compact"],wm=xe({density:{type:String,default:"default",validator:t=>NN.includes(t)}},"density");function WT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vs();return{densityClasses:Y(()=>`${e}--density-${t.density}`)}}const Tm=xe({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function bm(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vs();return{roundedClasses:Y(()=>{const r=$e(t)?t.value:t.rounded,s=[];if(r===!0||r==="")s.push(`${e}--rounded`);else if(typeof r=="string"||r===0)for(const i of String(r).split(" "))s.push(`rounded-${i}`);return s})}}const MN=["elevated","flat","tonal","outlined","text","plain"];function QT(t,e){return $(vt,null,[t&&$("span",{key:"overlay",class:`${e}__overlay`},null),$("span",{key:"underlay",class:`${e}__underlay`},null)])}const YT=xe({color:String,variant:{type:String,default:"elevated",validator:t=>MN.includes(t)}},"variant");function JT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vs();const n=Y(()=>{const{variant:i}=Mt(t);return`${e}--variant-${i}`}),{colorClasses:r,colorStyles:s}=_m(Y(()=>{const{variant:i,color:o}=Mt(t);return{[["elevated","flat"].includes(i)?"background":"text"]:o}}));return{colorClasses:r,colorStyles:s,variantClasses:n}}const LN=xe({start:Boolean,end:Boolean,icon:Rs,image:String,...vn(),...wm(),...Tm(),...ym(),...Ba(),...Li(),...YT({variant:"flat"})},"VAvatar"),Ey=Ut()({name:"VAvatar",props:LN(),setup(t,e){let{slots:n}=e;const{themeClasses:r}=Fi(t),{colorClasses:s,colorStyles:i,variantClasses:o}=JT(t),{densityClasses:a}=WT(t),{roundedClasses:c}=bm(t),{sizeClasses:u,sizeStyles:h}=vm(t);return En(()=>$(t.tag,{class:["v-avatar",{"v-avatar--start":t.start,"v-avatar--end":t.end},r.value,s.value,a.value,c.value,u.value,o.value,t.class],style:[i.value,h.value,t.style]},{default:()=>{var d;return[t.image?$(GT,{key:"image",src:t.image,alt:"",cover:!0},null):t.icon?$(CN,{key:"icon",icon:t.icon},null):(d=n.default)==null?void 0:d.call(n),QT(!1,"v-avatar")]}})),{}}}),FN=xe({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),bl=Ut(!1)({name:"VDefaultsProvider",props:FN(),setup(t,e){let{slots:n}=e;const{defaults:r,disabled:s,reset:i,root:o,scoped:a}=Ol(t);return jT(r,{reset:i,root:o,scoped:a,disabled:s}),()=>{var c;return(c=n.default)==null?void 0:c.call(n)}}}),UN=xe({appendAvatar:String,appendIcon:Rs,prependAvatar:String,prependIcon:Rs,subtitle:String,title:String,...vn(),...wm()},"VCardItem"),BN=Ut()({name:"VCardItem",props:UN(),setup(t,e){let{slots:n}=e;return En(()=>{var u;const r=!!(t.prependAvatar||t.prependIcon),s=!!(r||n.prepend),i=!!(t.appendAvatar||t.appendIcon),o=!!(i||n.append),a=!!(t.title||n.title),c=!!(t.subtitle||n.subtitle);return $("div",{class:["v-card-item",t.class],style:t.style},[s&&$("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?$(bl,{key:"prepend-defaults",disabled:!r,defaults:{VAvatar:{density:t.density,icon:t.prependIcon,image:t.prependAvatar}}},n.prepend):r&&$(Ey,{key:"prepend-avatar",density:t.density,icon:t.prependIcon,image:t.prependAvatar},null)]),$("div",{class:"v-card-item__content"},[a&&$(vN,{key:"title"},{default:()=>{var h;return[((h=n.title)==null?void 0:h.call(n))??t.title]}}),c&&$(yN,{key:"subtitle"},{default:()=>{var h;return[((h=n.subtitle)==null?void 0:h.call(n))??t.subtitle]}}),(u=n.default)==null?void 0:u.call(n)]),o&&$("div",{key:"append",class:"v-card-item__append"},[n.append?$(bl,{key:"append-defaults",disabled:!i,defaults:{VAvatar:{density:t.density,icon:t.appendIcon,image:t.appendAvatar}}},n.append):i&&$(Ey,{key:"append-avatar",density:t.density,icon:t.appendIcon,image:t.appendAvatar},null)])])}),{}}}),XT=mm("v-card-text"),jN=xe({border:[Boolean,Number,String]},"border");function $N(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vs();return{borderClasses:Y(()=>{const r=$e(t)?t.value:t.border,s=[];if(r===!0||r==="")s.push(`${e}--border`);else if(typeof r=="string"||r===0)for(const i of String(r).split(" "))s.push(`border-${i}`);return s})}}const zN=xe({elevation:{type:[Number,String],validator(t){const e=parseInt(t);return!isNaN(e)&&e>=0&&e<=24}}},"elevation");function qN(t){return{elevationClasses:Y(()=>{const n=$e(t)?t.value:t.elevation,r=[];return n==null||r.push(`elevation-${n}`),r})}}function ZT(t,e){const n=ze(),r=ft(!1);if(hm){const s=new IntersectionObserver(i=>{t==null||t(i,s),r.value=!!i.find(o=>o.isIntersecting)},e);Bl(()=>{s.disconnect()}),Fe(n,(i,o)=>{o&&(s.unobserve(o),r.value=!1),i&&s.observe(i)},{flush:"post"})}return{intersectionRef:n,isIntersecting:r}}const KN={badge:"Badge",open:"Open",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{ok:"OK",cancel:"Cancel",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},HN={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1};function gu(t,e){let n;function r(){n=pa(),n.run(()=>e.length?e(()=>{n==null||n.stop(),r()}):e())}Fe(t,s=>{s&&!n?r():s||(n==null||n.stop(),n=void 0)},{immediate:!0}),Xt(()=>{n==null||n.stop()})}function _u(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:d=>d,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:d=>d;const i=cn("useProxiedModel"),o=ze(t[e]!==void 0?t[e]:n),a=ds(e),u=Y(a!==e?()=>{var d,m,g,E;return t[e],!!(((d=i.vnode.props)!=null&&d.hasOwnProperty(e)||(m=i.vnode.props)!=null&&m.hasOwnProperty(a))&&((g=i.vnode.props)!=null&&g.hasOwnProperty(`onUpdate:${e}`)||(E=i.vnode.props)!=null&&E.hasOwnProperty(`onUpdate:${a}`)))}:()=>{var d,m;return t[e],!!((d=i.vnode.props)!=null&&d.hasOwnProperty(e)&&((m=i.vnode.props)!=null&&m.hasOwnProperty(`onUpdate:${e}`)))});gu(()=>!u.value,()=>{Fe(()=>t[e],d=>{o.value=d})});const h=Y({get(){const d=t[e];return r(u.value?d:o.value)},set(d){const m=s(d),g=Ae(u.value?t[e]:o.value);g===m||r(g)===d||(o.value=m,i==null||i.emit(`update:${e}`,m))}});return Object.defineProperty(h,"externalValue",{get:()=>u.value?t[e]:o.value}),h}const Iy="$vuetify.",wy=(t,e)=>t.replace(/\{(\d+)\}/g,(n,r)=>String(e[+r])),eb=(t,e,n)=>function(r){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];if(!r.startsWith(Iy))return wy(r,i);const a=r.replace(Iy,""),c=t.value&&n.value[t.value],u=e.value&&n.value[e.value];let h=cd(c,a,null);return h||(`${r}${t.value}`,h=cd(u,a,null)),h||(h=r),typeof h!="string"&&(h=r),wy(h,i)};function tb(t,e){return(n,r)=>new Intl.NumberFormat([t.value,e.value],r).format(n)}function ch(t,e,n){const r=_u(t,e,t[e]??n.value);return r.value=t[e]??n.value,Fe(n,s=>{t[e]==null&&(r.value=n.value)}),r}function nb(t){return e=>{const n=ch(e,"locale",t.current),r=ch(e,"fallback",t.fallback),s=ch(e,"messages",t.messages);return{name:"vuetify",current:n,fallback:r,messages:s,t:eb(n,r,s),n:tb(n,r),provide:nb({current:n,fallback:r,messages:s})}}}function GN(t){const e=ft((t==null?void 0:t.locale)??"en"),n=ft((t==null?void 0:t.fallback)??"en"),r=ze({en:KN,...t==null?void 0:t.messages});return{name:"vuetify",current:e,fallback:n,messages:r,t:eb(e,n,r),n:tb(e,n),provide:nb({current:e,fallback:n,messages:r})}}const Al=Symbol.for("vuetify:locale");function WN(t){return t.name!=null}function QN(t){const e=t!=null&&t.adapter&&WN(t==null?void 0:t.adapter)?t==null?void 0:t.adapter:GN(t),n=YN(e,t);return{...e,...n}}function I2(){const t=ct(Al);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");return t}function YN(t,e){const n=ze((e==null?void 0:e.rtl)??HN),r=Y(()=>n.value[t.current.value]??!1);return{isRtl:r,rtl:n,rtlClasses:Y(()=>`v-locale--is-${r.value?"rtl":"ltr"}`)}}function Am(){const t=ct(Al);if(!t)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:t.isRtl,rtlClasses:t.rtlClasses}}const Ty={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},rb=xe({location:String},"location");function sb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:r}=Am();return{locationStyles:Y(()=>{if(!t.location)return{};const{side:i,align:o}=fd(t.location.split(" ").length>1?t.location:`${t.location} center`,r.value);function a(u){return n?n(u):0}const c={};return i!=="center"&&(e?c[Ty[i]]=`calc(100% - ${a(i)}px)`:c[i]=0),o!=="center"?e?c[Ty[o]]=`calc(100% - ${a(o)}px)`:c[o]=0:(i==="center"?c.top=c.left="50%":c[{top:"left",bottom:"left",left:"top",right:"top"}[i]]="50%",c.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[i]),c})}}const JN=xe({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...vn(),...rb({location:"top"}),...Tm(),...Ba(),...Li()},"VProgressLinear"),XN=Ut()({name:"VProgressLinear",props:JN(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=_u(t,"modelValue"),{isRtl:s,rtlClasses:i}=Am(),{themeClasses:o}=Fi(t),{locationStyles:a}=sb(t),{textColorClasses:c,textColorStyles:u}=Tl(t,"color"),{backgroundColorClasses:h,backgroundColorStyles:d}=pd(Y(()=>t.bgColor||t.color)),{backgroundColorClasses:m,backgroundColorStyles:g}=pd(t,"color"),{roundedClasses:E}=bm(t),{intersectionRef:b,isIntersecting:C}=ZT(),N=Y(()=>parseInt(t.max,10)),V=Y(()=>parseInt(t.height,10)),x=Y(()=>parseFloat(t.bufferValue)/N.value*100),L=Y(()=>parseFloat(r.value)/N.value*100),q=Y(()=>s.value!==t.reverse),G=Y(()=>t.indeterminate?"fade-transition":"slide-x-transition"),R=Y(()=>t.bgOpacity==null?t.bgOpacity:parseFloat(t.bgOpacity));function _(v){if(!b.value)return;const{left:w,right:S,width:T}=b.value.getBoundingClientRect(),I=q.value?T-v.clientX+(S-T):v.clientX-w;r.value=Math.round(I/T*N.value)}return En(()=>$(t.tag,{ref:b,class:["v-progress-linear",{"v-progress-linear--absolute":t.absolute,"v-progress-linear--active":t.active&&C.value,"v-progress-linear--reverse":q.value,"v-progress-linear--rounded":t.rounded,"v-progress-linear--rounded-bar":t.roundedBar,"v-progress-linear--striped":t.striped},E.value,o.value,i.value,t.class],style:[{bottom:t.location==="bottom"?0:void 0,top:t.location==="top"?0:void 0,height:t.active?Oe(V.value):0,"--v-progress-linear-height":Oe(V.value),...a.value},t.style],role:"progressbar","aria-hidden":t.active?"false":"true","aria-valuemin":"0","aria-valuemax":t.max,"aria-valuenow":t.indeterminate?void 0:L.value,onClick:t.clickable&&_},{default:()=>[t.stream&&$("div",{key:"stream",class:["v-progress-linear__stream",c.value],style:{...u.value,[q.value?"left":"right"]:Oe(-V.value),borderTop:`${Oe(V.value/2)} dotted`,opacity:R.value,top:`calc(50% - ${Oe(V.value/4)})`,width:Oe(100-x.value,"%"),"--v-progress-linear-stream-to":Oe(V.value*(q.value?1:-1))}},null),$("div",{class:["v-progress-linear__background",h.value],style:[d.value,{opacity:R.value,width:Oe(t.stream?x.value:100,"%")}]},null),$(ms,{name:G.value},{default:()=>[t.indeterminate?$("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(v=>$("div",{key:v,class:["v-progress-linear__indeterminate",v,m.value],style:g.value},null))]):$("div",{class:["v-progress-linear__determinate",m.value],style:[g.value,{width:Oe(L.value,"%")}]},null)]}),n.default&&$("div",{class:"v-progress-linear__content"},[n.default({value:L.value,buffer:x.value})])]})),{}}}),ZN=xe({loading:[Boolean,String]},"loader");function eM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vs();return{loaderClasses:Y(()=>({[`${e}--loading`]:t.loading}))}}function tM(t,e){var r;let{slots:n}=e;return $("div",{class:`${t.name}__loader`},[((r=n.default)==null?void 0:r.call(n,{color:t.color,isActive:t.active}))||$(XN,{active:t.active,color:t.color,height:"2",indeterminate:!0},null)])}const nM=["static","relative","fixed","absolute","sticky"],rM=xe({position:{type:String,validator:t=>nM.includes(t)}},"position");function sM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vs();return{positionClasses:Y(()=>t.position?`${e}--${t.position}`:void 0)}}function iM(){var t,e;return(e=(t=cn("useRouter"))==null?void 0:t.proxy)==null?void 0:e.$router}function oM(t,e){const n=AA("RouterLink"),r=Y(()=>!!(t.href||t.to)),s=Y(()=>(r==null?void 0:r.value)||ty(e,"click")||ty(t,"click"));if(typeof n=="string")return{isLink:r,isClickable:s,href:Bo(t,"href")};const i=t.to?n.useLink(t):void 0;return{isLink:r,isClickable:s,route:i==null?void 0:i.route,navigate:i==null?void 0:i.navigate,isActive:i&&Y(()=>{var o,a;return t.exact?(o=i.isExactActive)==null?void 0:o.value:(a=i.isActive)==null?void 0:a.value}),href:Y(()=>t.to?i==null?void 0:i.route.value.href:t.href)}}const aM=xe({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let lh=!1;function cM(t,e){let n=!1,r,s;rt&&(yn(()=>{window.addEventListener("popstate",i),r=t==null?void 0:t.beforeEach((o,a,c)=>{lh?n?e(c):c():setTimeout(()=>n?e(c):c()),lh=!0}),s=t==null?void 0:t.afterEach(()=>{lh=!1})}),Xt(()=>{window.removeEventListener("popstate",i),r==null||r(),s==null||s()}));function i(o){var a;(a=o.state)!=null&&a.replaced||(n=!0,setTimeout(()=>n=!1))}}const _d=Symbol("rippleStop"),lM=80;function by(t,e){t.style.transform=e,t.style.webkitTransform=e}function yd(t){return t.constructor.name==="TouchEvent"}function ib(t){return t.constructor.name==="KeyboardEvent"}const uM=function(t,e){var d;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=0,s=0;if(!ib(t)){const m=e.getBoundingClientRect(),g=yd(t)?t.touches[t.touches.length-1]:t;r=g.clientX-m.left,s=g.clientY-m.top}let i=0,o=.3;(d=e._ripple)!=null&&d.circle?(o=.15,i=e.clientWidth/2,i=n.center?i:i+Math.sqrt((r-i)**2+(s-i)**2)/4):i=Math.sqrt(e.clientWidth**2+e.clientHeight**2)/2;const a=`${(e.clientWidth-i*2)/2}px`,c=`${(e.clientHeight-i*2)/2}px`,u=n.center?a:`${r-i}px`,h=n.center?c:`${s-i}px`;return{radius:i,scale:o,x:u,y:h,centerX:a,centerY:c}},Rl={show(t,e){var g;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((g=e==null?void 0:e._ripple)!=null&&g.enabled))return;const r=document.createElement("span"),s=document.createElement("span");r.appendChild(s),r.className="v-ripple__container",n.class&&(r.className+=` ${n.class}`);const{radius:i,scale:o,x:a,y:c,centerX:u,centerY:h}=uM(t,e,n),d=`${i*2}px`;s.className="v-ripple__animation",s.style.width=d,s.style.height=d,e.appendChild(r);const m=window.getComputedStyle(e);m&&m.position==="static"&&(e.style.position="relative",e.dataset.previousPosition="static"),s.classList.add("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--visible"),by(s,`translate(${a}, ${c}) scale3d(${o},${o},${o})`),s.dataset.activated=String(performance.now()),setTimeout(()=>{s.classList.remove("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--in"),by(s,`translate(${u}, ${h}) scale3d(1,1,1)`)},0)},hide(t){var i;if(!((i=t==null?void 0:t._ripple)!=null&&i.enabled))return;const e=t.getElementsByClassName("v-ripple__animation");if(e.length===0)return;const n=e[e.length-1];if(n.dataset.isHiding)return;n.dataset.isHiding="true";const r=performance.now()-Number(n.dataset.activated),s=Math.max(250-r,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{var a;t.getElementsByClassName("v-ripple__animation").length===1&&t.dataset.previousPosition&&(t.style.position=t.dataset.previousPosition,delete t.dataset.previousPosition),((a=n.parentNode)==null?void 0:a.parentNode)===t&&t.removeChild(n.parentNode)},300)},s)}};function ob(t){return typeof t>"u"||!!t}function ha(t){const e={},n=t.currentTarget;if(!(!(n!=null&&n._ripple)||n._ripple.touched||t[_d])){if(t[_d]=!0,yd(t))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(e.center=n._ripple.centered||ib(t),n._ripple.class&&(e.class=n._ripple.class),yd(t)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{Rl.show(t,n,e)},n._ripple.showTimer=window.setTimeout(()=>{var r;(r=n==null?void 0:n._ripple)!=null&&r.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},lM)}else Rl.show(t,n,e)}}function Ay(t){t[_d]=!0}function Qt(t){const e=t.currentTarget;if(e!=null&&e._ripple){if(window.clearTimeout(e._ripple.showTimer),t.type==="touchend"&&e._ripple.showTimerCommit){e._ripple.showTimerCommit(),e._ripple.showTimerCommit=null,e._ripple.showTimer=window.setTimeout(()=>{Qt(t)});return}window.setTimeout(()=>{e._ripple&&(e._ripple.touched=!1)}),Rl.hide(e)}}function ab(t){const e=t.currentTarget;e!=null&&e._ripple&&(e._ripple.showTimerCommit&&(e._ripple.showTimerCommit=null),window.clearTimeout(e._ripple.showTimer))}let da=!1;function cb(t){!da&&(t.keyCode===Z_.enter||t.keyCode===Z_.space)&&(da=!0,ha(t))}function lb(t){da=!1,Qt(t)}function ub(t){da&&(da=!1,Qt(t))}function hb(t,e,n){const{value:r,modifiers:s}=e,i=ob(r);if(i||Rl.hide(t),t._ripple=t._ripple??{},t._ripple.enabled=i,t._ripple.centered=s.center,t._ripple.circle=s.circle,ld(r)&&r.class&&(t._ripple.class=r.class),i&&!n){if(s.stop){t.addEventListener("touchstart",Ay,{passive:!0}),t.addEventListener("mousedown",Ay);return}t.addEventListener("touchstart",ha,{passive:!0}),t.addEventListener("touchend",Qt,{passive:!0}),t.addEventListener("touchmove",ab,{passive:!0}),t.addEventListener("touchcancel",Qt),t.addEventListener("mousedown",ha),t.addEventListener("mouseup",Qt),t.addEventListener("mouseleave",Qt),t.addEventListener("keydown",cb),t.addEventListener("keyup",lb),t.addEventListener("blur",ub),t.addEventListener("dragstart",Qt,{passive:!0})}else!i&&n&&db(t)}function db(t){t.removeEventListener("mousedown",ha),t.removeEventListener("touchstart",ha),t.removeEventListener("touchend",Qt),t.removeEventListener("touchmove",ab),t.removeEventListener("touchcancel",Qt),t.removeEventListener("mouseup",Qt),t.removeEventListener("mouseleave",Qt),t.removeEventListener("keydown",cb),t.removeEventListener("keyup",lb),t.removeEventListener("dragstart",Qt),t.removeEventListener("blur",ub)}function hM(t,e){hb(t,e,!1)}function dM(t){delete t._ripple,db(t)}function fM(t,e){if(e.value===e.oldValue)return;const n=ob(e.oldValue);hb(t,e,n)}const mM={mounted:hM,unmounted:dM,updated:fM},pM=xe({appendAvatar:String,appendIcon:Rs,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:Rs,ripple:{type:[Boolean,Object],default:!0},subtitle:String,text:String,title:String,...jN(),...vn(),...wm(),...Em(),...zN(),...ZN(),...rb(),...rM(),...Tm(),...aM(),...Ba(),...Li(),...YT({variant:"elevated"})},"VCard"),gM=Ut()({name:"VCard",directives:{Ripple:mM},props:pM(),setup(t,e){let{attrs:n,slots:r}=e;const{themeClasses:s}=Fi(t),{borderClasses:i}=$N(t),{colorClasses:o,colorStyles:a,variantClasses:c}=JT(t),{densityClasses:u}=WT(t),{dimensionStyles:h}=Im(t),{elevationClasses:d}=qN(t),{loaderClasses:m}=eM(t),{locationStyles:g}=sb(t),{positionClasses:E}=sM(t),{roundedClasses:b}=bm(t),C=oM(t,n),N=Y(()=>t.link!==!1&&C.isLink.value),V=Y(()=>!t.disabled&&t.link!==!1&&(t.link||C.isClickable.value));return En(()=>{const x=N.value?"a":t.tag,L=!!(r.title||t.title),q=!!(r.subtitle||t.subtitle),G=L||q,R=!!(r.append||t.appendAvatar||t.appendIcon),_=!!(r.prepend||t.prependAvatar||t.prependIcon),v=!!(r.image||t.image),w=G||_||R,S=!!(r.text||t.text);return Jc($(x,{class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":V.value},s.value,i.value,o.value,u.value,d.value,m.value,E.value,b.value,c.value,t.class],style:[a.value,h.value,g.value,t.style],href:C.href.value,onClick:V.value&&C.navigate,tabindex:t.disabled?-1:void 0},{default:()=>{var T;return[v&&$("div",{key:"image",class:"v-card__image"},[r.image?$(bl,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},r.image):$(GT,{key:"image-img",cover:!0,src:t.image},null)]),$(tM,{name:"v-card",active:!!t.loading,color:typeof t.loading=="boolean"?void 0:t.loading},{default:r.loader}),w&&$(BN,{key:"item",prependAvatar:t.prependAvatar,prependIcon:t.prependIcon,title:t.title,subtitle:t.subtitle,appendAvatar:t.appendAvatar,appendIcon:t.appendIcon},{default:r.item,prepend:r.prepend,title:r.title,subtitle:r.subtitle,append:r.append}),S&&$(XT,{key:"text"},{default:()=>{var I;return[((I=r.text)==null?void 0:I.call(r))??t.text]}}),(T=r.default)==null?void 0:T.call(r),r.actions&&$(_N,null,{default:r.actions}),QT(V.value,"v-card")]}}),[[Wd("ripple"),V.value&&t.ripple]])}),{}}});const _M=xe({target:Object},"v-dialog-transition"),yM=Ut()({name:"VDialogTransition",props:_M(),setup(t,e){let{slots:n}=e;const r={onBeforeEnter(s){s.style.pointerEvents="none",s.style.visibility="hidden"},async onEnter(s,i){var m;await new Promise(g=>requestAnimationFrame(g)),await new Promise(g=>requestAnimationFrame(g)),s.style.visibility="";const{x:o,y:a,sx:c,sy:u,speed:h}=Sy(t.target,s),d=Io(s,[{transform:`translate(${o}px, ${a}px) scale(${c}, ${u})`,opacity:0},{}],{duration:225*h,easing:cN});(m=Ry(s))==null||m.forEach(g=>{Io(g,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*h,easing:md})}),d.finished.then(()=>i())},onAfterEnter(s){s.style.removeProperty("pointer-events")},onBeforeLeave(s){s.style.pointerEvents="none"},async onLeave(s,i){var m;await new Promise(g=>requestAnimationFrame(g));const{x:o,y:a,sx:c,sy:u,speed:h}=Sy(t.target,s);Io(s,[{},{transform:`translate(${o}px, ${a}px) scale(${c}, ${u})`,opacity:0}],{duration:125*h,easing:lN}).finished.then(()=>i()),(m=Ry(s))==null||m.forEach(g=>{Io(g,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*h,easing:md})})},onAfterLeave(s){s.style.removeProperty("pointer-events")}};return()=>t.target?$(ms,qt({name:"dialog-transition"},r,{css:!1}),n):$(ms,{name:"dialog-transition"},n)}});function Ry(t){var n;const e=(n=t.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return e&&[...e]}function Sy(t,e){const n=t.getBoundingClientRect(),r=DT(e),[s,i]=getComputedStyle(e).transformOrigin.split(" ").map(N=>parseFloat(N)),[o,a]=getComputedStyle(e).getPropertyValue("--v-overlay-anchor-origin").split(" ");let c=n.left+n.width/2;o==="left"||a==="left"?c-=n.width/2:(o==="right"||a==="right")&&(c+=n.width/2);let u=n.top+n.height/2;o==="top"||a==="top"?u-=n.height/2:(o==="bottom"||a==="bottom")&&(u+=n.height/2);const h=n.width/r.width,d=n.height/r.height,m=Math.max(1,h,d),g=h/m||0,E=d/m||0,b=r.width*r.height/(window.innerWidth*window.innerHeight),C=b>.12?Math.min(1.5,(b-.12)*10+1):1;return{x:c-(s+r.left),y:u-(i+r.top),sx:g,sy:E,speed:C}}function uh(t,e){return{x:t.x+e.x,y:t.y+e.y}}function vM(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Py(t,e){if(t.side==="top"||t.side==="bottom"){const{side:n,align:r}=t,s=r==="left"?0:r==="center"?e.width/2:r==="right"?e.width:r,i=n==="top"?0:n==="bottom"?e.height:n;return uh({x:s,y:i},e)}else if(t.side==="left"||t.side==="right"){const{side:n,align:r}=t,s=n==="left"?0:n==="right"?e.width:n,i=r==="top"?0:r==="center"?e.height/2:r==="bottom"?e.height:r;return uh({x:s,y:i},e)}return uh({x:e.width/2,y:e.height/2},e)}const fb={static:wM,connected:bM},EM=xe({locationStrategy:{type:[String,Function],default:"static",validator:t=>typeof t=="function"||t in fb},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function IM(t,e){const n=ze({}),r=ze();rt&&(gu(()=>!!(e.isActive.value&&t.locationStrategy),i=>{var o,a;Fe(()=>t.locationStrategy,i),Xt(()=>{r.value=void 0}),typeof t.locationStrategy=="function"?r.value=(o=t.locationStrategy(e,t,n))==null?void 0:o.updateLocation:r.value=(a=fb[t.locationStrategy](e,t,n))==null?void 0:a.updateLocation}),window.addEventListener("resize",s,{passive:!0}),Xt(()=>{window.removeEventListener("resize",s),r.value=void 0}));function s(i){var o;(o=r.value)==null||o.call(r,i)}return{contentStyles:n,updateLocation:r}}function wM(){}function TM(t,e){e?t.style.removeProperty("left"):t.style.removeProperty("right");const n=DT(t);return e?n.x+=parseFloat(t.style.right||0):n.x-=parseFloat(t.style.left||0),n.y-=parseFloat(t.style.top||0),n}function bM(t,e,n){fN(t.activatorEl.value)&&Object.assign(n.value,{position:"fixed",top:0,[t.isRtl.value?"right":"left"]:0});const{preferredAnchor:s,preferredOrigin:i}=dm(()=>{const E=fd(e.location,t.isRtl.value),b=e.origin==="overlap"?E:e.origin==="auto"?oh(E):fd(e.origin,t.isRtl.value);return E.side===b.side&&E.align===ah(b).align?{preferredAnchor:ry(E),preferredOrigin:ry(b)}:{preferredAnchor:E,preferredOrigin:b}}),[o,a,c,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(E=>Y(()=>{const b=parseFloat(e[E]);return isNaN(b)?1/0:b})),h=Y(()=>{if(Array.isArray(e.offset))return e.offset;if(typeof e.offset=="string"){const E=e.offset.split(" ").map(parseFloat);return E.length<2&&E.push(0),E}return typeof e.offset=="number"?[e.offset,0]:[0,0]});let d=!1;const m=new ResizeObserver(()=>{d&&g()});Fe([t.activatorEl,t.contentEl],(E,b)=>{let[C,N]=E,[V,x]=b;V&&m.unobserve(V),C&&m.observe(C),x&&m.unobserve(x),N&&m.observe(N)},{immediate:!0}),Xt(()=>{m.disconnect()});function g(){if(d=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>d=!0)}),!t.activatorEl.value||!t.contentEl.value)return;const E=t.activatorEl.value.getBoundingClientRect(),b=TM(t.contentEl.value,t.isRtl.value),C=wl(t.contentEl.value),N=12;C.length||(C.push(document.documentElement),t.contentEl.value.style.top&&t.contentEl.value.style.left||(b.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),b.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const V=C.reduce((S,T)=>{const I=T.getBoundingClientRect(),de=new ci({x:T===document.documentElement?0:I.x,y:T===document.documentElement?0:I.y,width:T.clientWidth,height:T.clientHeight});return S?new ci({x:Math.max(S.left,de.left),y:Math.max(S.top,de.top),width:Math.min(S.right,de.right)-Math.max(S.left,de.left),height:Math.min(S.bottom,de.bottom)-Math.max(S.top,de.top)}):de},void 0);V.x+=N,V.y+=N,V.width-=N*2,V.height-=N*2;let x={anchor:s.value,origin:i.value};function L(S){const T=new ci(b),I=Py(S.anchor,E),de=Py(S.origin,T);let{x:ke,y:pe}=vM(I,de);switch(S.anchor.side){case"top":pe-=h.value[0];break;case"bottom":pe+=h.value[0];break;case"left":ke-=h.value[0];break;case"right":ke+=h.value[0];break}switch(S.anchor.align){case"top":pe-=h.value[1];break;case"bottom":pe+=h.value[1];break;case"left":ke-=h.value[1];break;case"right":ke+=h.value[1];break}return T.x+=ke,T.y+=pe,T.width=Math.min(T.width,c.value),T.height=Math.min(T.height,u.value),{overflows:iy(T,V),x:ke,y:pe}}let q=0,G=0;const R={x:0,y:0},_={x:!1,y:!1};let v=-1;for(;!(v++>10);){const{x:S,y:T,overflows:I}=L(x);q+=S,G+=T,b.x+=S,b.y+=T;{const de=sy(x.anchor),ke=I.x.before||I.x.after,pe=I.y.before||I.y.after;let Ie=!1;if(["x","y"].forEach(he=>{if(he==="x"&&ke&&!_.x||he==="y"&&pe&&!_.y){const Te={anchor:{...x.anchor},origin:{...x.origin}},Ge=he==="x"?de==="y"?ah:oh:de==="y"?oh:ah;Te.anchor=Ge(Te.anchor),Te.origin=Ge(Te.origin);const{overflows:ut}=L(Te);(ut[he].before<=I[he].before&&ut[he].after<=I[he].after||ut[he].before+ut[he].after<(I[he].before+I[he].after)/2)&&(x=Te,Ie=_[he]=!0)}}),Ie)continue}I.x.before&&(q+=I.x.before,b.x+=I.x.before),I.x.after&&(q-=I.x.after,b.x-=I.x.after),I.y.before&&(G+=I.y.before,b.y+=I.y.before),I.y.after&&(G-=I.y.after,b.y-=I.y.after);{const de=iy(b,V);R.x=V.width-de.x.before-de.x.after,R.y=V.height-de.y.before-de.y.after,q+=de.x.before,b.x+=de.x.before,G+=de.y.before,b.y+=de.y.before}break}const w=sy(x.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${x.anchor.side} ${x.anchor.align}`,transformOrigin:`${x.origin.side} ${x.origin.align}`,top:Oe(hh(G)),left:t.isRtl.value?void 0:Oe(hh(q)),right:t.isRtl.value?Oe(hh(-q)):void 0,minWidth:Oe(w==="y"?Math.min(o.value,E.width):o.value),maxWidth:Oe(Cy(dd(R.x,o.value===1/0?0:o.value,c.value))),maxHeight:Oe(Cy(dd(R.y,a.value===1/0?0:a.value,u.value)))}),{available:R,contentBox:b}}return Fe(()=>[s.value,i.value,e.offset,e.minWidth,e.minHeight,e.maxWidth,e.maxHeight],()=>g()),yn(()=>{const E=g();if(!E)return;const{available:b,contentBox:C}=E;C.height>b.y&&requestAnimationFrame(()=>{g(),requestAnimationFrame(()=>{g()})})}),{updateLocation:g}}function hh(t){return Math.round(t*devicePixelRatio)/devicePixelRatio}function Cy(t){return Math.ceil(t*devicePixelRatio)/devicePixelRatio}let vd=!0;const Sl=[];function AM(t){!vd||Sl.length?(Sl.push(t),Ed()):(vd=!1,t(),Ed())}let xy=-1;function Ed(){cancelAnimationFrame(xy),xy=requestAnimationFrame(()=>{const t=Sl.shift();t&&t(),Sl.length?Ed():vd=!0})}const Kc={none:null,close:PM,block:CM,reposition:xM},RM=xe({scrollStrategy:{type:[String,Function],default:"block",validator:t=>typeof t=="function"||t in Kc}},"VOverlay-scroll-strategies");function SM(t,e){if(!rt)return;let n;Fr(async()=>{n==null||n.stop(),e.isActive.value&&t.scrollStrategy&&(n=pa(),await yn(),n.active&&n.run(()=>{var r;typeof t.scrollStrategy=="function"?t.scrollStrategy(e,t,n):(r=Kc[t.scrollStrategy])==null||r.call(Kc,e,t,n)}))}),Xt(()=>{n==null||n.stop()})}function PM(t){function e(n){t.isActive.value=!1}mb(t.activatorEl.value??t.contentEl.value,e)}function CM(t,e){var o;const n=(o=t.root.value)==null?void 0:o.offsetParent,r=[...new Set([...wl(t.activatorEl.value,e.contained?n:void 0),...wl(t.contentEl.value,e.contained?n:void 0)])].filter(a=>!a.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,i=(a=>pm(a)&&a)(n||document.documentElement);i&&t.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((a,c)=>{a.style.setProperty("--v-body-scroll-x",Oe(-a.scrollLeft)),a.style.setProperty("--v-body-scroll-y",Oe(-a.scrollTop)),a!==document.documentElement&&a.style.setProperty("--v-scrollbar-offset",Oe(s)),a.classList.add("v-overlay-scroll-blocked")}),Xt(()=>{r.forEach((a,c)=>{const u=parseFloat(a.style.getPropertyValue("--v-body-scroll-x")),h=parseFloat(a.style.getPropertyValue("--v-body-scroll-y"));a.style.removeProperty("--v-body-scroll-x"),a.style.removeProperty("--v-body-scroll-y"),a.style.removeProperty("--v-scrollbar-offset"),a.classList.remove("v-overlay-scroll-blocked"),a.scrollLeft=-u,a.scrollTop=-h}),i&&t.root.value.classList.remove("v-overlay--scroll-blocked")})}function xM(t,e,n){let r=!1,s=-1,i=-1;function o(a){AM(()=>{var h,d;const c=performance.now();(d=(h=t.updateLocation).value)==null||d.call(h,a),r=(performance.now()-c)/(1e3/60)>2})}i=(typeof requestIdleCallback>"u"?a=>a():requestIdleCallback)(()=>{n.run(()=>{mb(t.activatorEl.value??t.contentEl.value,a=>{r?(cancelAnimationFrame(s),s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{o(a)})})):o(a)})})}),Xt(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(i),cancelAnimationFrame(s)})}function mb(t,e){const n=[document,...wl(t)];n.forEach(r=>{r.addEventListener("scroll",e,{passive:!0})}),Xt(()=>{n.forEach(r=>{r.removeEventListener("scroll",e)})})}const kM=Symbol.for("vuetify:v-menu"),DM=xe({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function VM(t,e){const n={},r=s=>()=>{if(!rt)return Promise.resolve(!0);const i=s==="openDelay";return n.closeDelay&&window.clearTimeout(n.closeDelay),delete n.closeDelay,n.openDelay&&window.clearTimeout(n.openDelay),delete n.openDelay,new Promise(o=>{const a=parseInt(t[s]??0,10);n[s]=window.setTimeout(()=>{e==null||e(i),o(i)},a)})};return{runCloseDelay:r("closeDelay"),runOpenDelay:r("openDelay")}}const OM=xe({activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...DM()},"VOverlay-activator");function NM(t,e){let{isActive:n,isTop:r}=e;const s=ze();let i=!1,o=!1,a=!0;const c=Y(()=>t.openOnFocus||t.openOnFocus==null&&t.openOnHover),u=Y(()=>t.openOnClick||t.openOnClick==null&&!t.openOnHover&&!c.value),{runOpenDelay:h,runCloseDelay:d}=VM(t,x=>{x===(t.openOnHover&&i||c.value&&o)&&!(t.openOnHover&&n.value&&!r.value)&&(n.value!==x&&(a=!0),n.value=x)}),m={onClick:x=>{x.stopPropagation(),s.value=x.currentTarget||x.target,n.value=!n.value},onMouseenter:x=>{var L;(L=x.sourceCapabilities)!=null&&L.firesTouchEvents||(i=!0,s.value=x.currentTarget||x.target,h())},onMouseleave:x=>{i=!1,d()},onFocus:x=>{FO(x.target,":focus-visible")!==!1&&(o=!0,x.stopPropagation(),s.value=x.currentTarget||x.target,h())},onBlur:x=>{o=!1,x.stopPropagation(),d()}},g=Y(()=>{const x={};return u.value&&(x.onClick=m.onClick),t.openOnHover&&(x.onMouseenter=m.onMouseenter,x.onMouseleave=m.onMouseleave),c.value&&(x.onFocus=m.onFocus,x.onBlur=m.onBlur),x}),E=Y(()=>{const x={};if(t.openOnHover&&(x.onMouseenter=()=>{i=!0,h()},x.onMouseleave=()=>{i=!1,d()}),c.value&&(x.onFocusin=()=>{o=!0,h()},x.onFocusout=()=>{o=!1,d()}),t.closeOnContentClick){const L=ct(kM,null);x.onClick=()=>{n.value=!1,L==null||L.closeParents()}}return x}),b=Y(()=>{const x={};return t.openOnHover&&(x.onMouseenter=()=>{a&&(i=!0,a=!1,h())},x.onMouseleave=()=>{i=!1,d()}),x});Fe(r,x=>{x&&(t.openOnHover&&!i&&(!c.value||!o)||c.value&&!o&&(!t.openOnHover||!i))&&(n.value=!1)});const C=ze();Fr(()=>{C.value&&yn(()=>{s.value=ud(C.value)})});const N=cn("useActivator");let V;return Fe(()=>!!t.activator,x=>{x&&rt?(V=pa(),V.run(()=>{MM(t,N,{activatorEl:s,activatorEvents:g})})):V&&V.stop()},{flush:"post",immediate:!0}),Xt(()=>{V==null||V.stop()}),{activatorEl:s,activatorRef:C,activatorEvents:g,contentEvents:E,scrimEvents:b}}function MM(t,e,n){let{activatorEl:r,activatorEvents:s}=n;Fe(()=>t.activator,(c,u)=>{if(u&&c!==u){const h=a(u);h&&o(h)}c&&yn(()=>i())},{immediate:!0}),Fe(()=>t.activatorProps,()=>{i()}),Xt(()=>{o()});function i(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;c&&BO(c,qt(s.value,u))}function o(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;c&&jO(c,qt(s.value,u))}function a(){var h,d;let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.activator,u;if(c)if(c==="parent"){let m=(d=(h=e==null?void 0:e.proxy)==null?void 0:h.$el)==null?void 0:d.parentNode;for(;m!=null&&m.hasAttribute("data-no-activator");)m=m.parentNode;u=m}else typeof c=="string"?u=document.querySelector(c):"$el"in c?u=c.$el:u=c;return r.value=(u==null?void 0:u.nodeType)===Node.ELEMENT_NODE?u:null,r.value}}const w2=["sm","md","lg","xl","xxl"],Id=Symbol.for("vuetify:display"),ky={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},LM=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ky;return rn(ky,t)};function Dy(t){return rt&&!t?window.innerWidth:typeof t=="object"&&t.clientWidth||0}function Vy(t){return rt&&!t?window.innerHeight:typeof t=="object"&&t.clientHeight||0}function Oy(t){const e=rt&&!t?window.navigator.userAgent:"ssr";function n(E){return!!e.match(E)}const r=n(/android/i),s=n(/iphone|ipad|ipod/i),i=n(/cordova/i),o=n(/electron/i),a=n(/chrome/i),c=n(/edge/i),u=n(/firefox/i),h=n(/opera/i),d=n(/win/i),m=n(/mac/i),g=n(/linux/i);return{android:r,ios:s,cordova:i,electron:o,chrome:a,edge:c,firefox:u,opera:h,win:d,mac:m,linux:g,touch:SO,ssr:e==="ssr"}}function FM(t,e){const{thresholds:n,mobileBreakpoint:r}=LM(t),s=ft(Vy(e)),i=ft(Oy(e)),o=Vn({}),a=ft(Dy(e));function c(){s.value=Vy(),a.value=Dy()}function u(){c(),i.value=Oy()}return Fr(()=>{const h=a.value<n.sm,d=a.value<n.md&&!h,m=a.value<n.lg&&!(d||h),g=a.value<n.xl&&!(m||d||h),E=a.value<n.xxl&&!(g||m||d||h),b=a.value>=n.xxl,C=h?"xs":d?"sm":m?"md":g?"lg":E?"xl":"xxl",N=typeof r=="number"?r:n[r],V=a.value<N;o.xs=h,o.sm=d,o.md=m,o.lg=g,o.xl=E,o.xxl=b,o.smAndUp=!h,o.mdAndUp=!(h||d),o.lgAndUp=!(h||d||m),o.xlAndUp=!(h||d||m||g),o.smAndDown=!(m||g||E||b),o.mdAndDown=!(g||E||b),o.lgAndDown=!(E||b),o.xlAndDown=!b,o.name=C,o.height=s.value,o.width=a.value,o.mobile=V,o.mobileBreakpoint=r,o.platform=i.value,o.thresholds=n}),rt&&window.addEventListener("resize",c,{passive:!0}),{...Ol(o),update:u,ssr:!!e}}function UM(){const t=ct(Id);if(!t)throw new Error("Could not find Vuetify display injection");return t}function BM(){if(!rt)return ft(!1);const{ssr:t}=UM();if(t){const e=ft(!1);return Hd(()=>{e.value=!0}),e}else return ft(!0)}const jM=xe({eager:Boolean},"lazy");function $M(t,e){const n=ft(!1),r=Y(()=>n.value||t.eager||e.value);Fe(e,()=>n.value=!0);function s(){t.eager||(n.value=!1)}return{isBooted:n,hasContent:r,onAfterLeave:s}}function pb(){const e=cn("useScopeId").vnode.scopeId;return{scopeId:e?{[e]:""}:void 0}}const Ny=Symbol.for("vuetify:stack"),uo=Vn([]);function zM(t,e,n){const r=cn("useStack"),s=!n,i=ct(Ny,void 0),o=Vn({activeChildren:new Set});Ar(Ny,o);const a=ft(+e.value);gu(t,()=>{var d;const h=(d=uo.at(-1))==null?void 0:d[1];a.value=h?h+10:+e.value,s&&uo.push([r.uid,a.value]),i==null||i.activeChildren.add(r.uid),Xt(()=>{if(s){const m=Ae(uo).findIndex(g=>g[0]===r.uid);uo.splice(m,1)}i==null||i.activeChildren.delete(r.uid)})});const c=ft(!0);s&&Fr(()=>{var d;const h=((d=uo.at(-1))==null?void 0:d[0])===r.uid;setTimeout(()=>c.value=h)});const u=Y(()=>!o.activeChildren.size);return{globalTop:Dl(c),localTop:u,stackStyles:Y(()=>({zIndex:a.value}))}}function qM(t){return{teleportTarget:Y(()=>{const n=t.value;if(n===!0||!rt)return;const r=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(r==null)return;let s=r.querySelector(":scope > .v-overlay-container");return s||(s=document.createElement("div"),s.className="v-overlay-container",r.appendChild(s)),s})}}function KM(){return!0}function gb(t,e,n){if(!t||_b(t,n)===!1)return!1;const r=FT(e);if(typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&r.host===t.target)return!1;const s=(typeof n.value=="object"&&n.value.include||(()=>[]))();return s.push(e),!s.some(i=>i==null?void 0:i.contains(t.target))}function _b(t,e){return(typeof e.value=="object"&&e.value.closeConditional||KM)(t)}function HM(t,e,n){const r=typeof n.value=="function"?n.value:n.value.handler;e._clickOutside.lastMousedownWasOutside&&gb(t,e,n)&&setTimeout(()=>{_b(t,n)&&r&&r(t)},0)}function My(t,e){const n=FT(t);e(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&e(n)}const GM={mounted(t,e){const n=s=>HM(s,t,e),r=s=>{t._clickOutside.lastMousedownWasOutside=gb(s,t,e)};My(t,s=>{s.addEventListener("click",n,!0),s.addEventListener("mousedown",r,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!1}),t._clickOutside[e.instance.$.uid]={onClick:n,onMousedown:r}},unmounted(t,e){t._clickOutside&&(My(t,n=>{var i;if(!n||!((i=t._clickOutside)!=null&&i[e.instance.$.uid]))return;const{onClick:r,onMousedown:s}=t._clickOutside[e.instance.$.uid];n.removeEventListener("click",r,!0),n.removeEventListener("mousedown",s,!0)}),delete t._clickOutside[e.instance.$.uid])}};function WM(t){const{modelValue:e,color:n,...r}=t;return $(ms,{name:"fade-transition",appear:!0},{default:()=>[t.modelValue&&$("div",qt({class:["v-overlay__scrim",t.color.backgroundColorClasses.value],style:t.color.backgroundColorStyles.value},r),null)]})}const yb=xe({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...OM(),...vn(),...Em(),...jM(),...EM(),...RM(),...Li(),...KT()},"VOverlay"),Ly=Ut()({name:"VOverlay",directives:{ClickOutside:GM},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...yb()},emits:{"click:outside":t=>!0,"update:modelValue":t=>!0,afterLeave:()=>!0},setup(t,e){let{slots:n,attrs:r,emit:s}=e;const i=_u(t,"modelValue"),o=Y({get:()=>i.value,set:Te=>{Te&&t.disabled||(i.value=Te)}}),{teleportTarget:a}=qM(Y(()=>t.attach||t.contained)),{themeClasses:c}=Fi(t),{rtlClasses:u,isRtl:h}=Am(),{hasContent:d,onAfterLeave:m}=$M(t,o),g=pd(Y(()=>typeof t.scrim=="string"?t.scrim:null)),{globalTop:E,localTop:b,stackStyles:C}=zM(o,Bo(t,"zIndex"),t._disableGlobalStack),{activatorEl:N,activatorRef:V,activatorEvents:x,contentEvents:L,scrimEvents:q}=NM(t,{isActive:o,isTop:b}),{dimensionStyles:G}=Im(t),R=BM(),{scopeId:_}=pb();Fe(()=>t.disabled,Te=>{Te&&(o.value=!1)});const v=ze(),w=ze(),{contentStyles:S,updateLocation:T}=IM(t,{isRtl:h,contentEl:w,activatorEl:N,isActive:o});SM(t,{root:v,contentEl:w,activatorEl:N,isActive:o,updateLocation:T});function I(Te){s("click:outside",Te),t.persistent?he():o.value=!1}function de(){return o.value&&E.value}rt&&Fe(o,Te=>{Te?window.addEventListener("keydown",ke):window.removeEventListener("keydown",ke)},{immediate:!0});function ke(Te){var Ge,ut;Te.key==="Escape"&&E.value&&(t.persistent?he():(o.value=!1,(Ge=w.value)!=null&&Ge.contains(document.activeElement)&&((ut=N.value)==null||ut.focus())))}const pe=iM();gu(()=>t.closeOnBack,()=>{cM(pe,Te=>{E.value&&o.value?(Te(!1),t.persistent?he():o.value=!1):Te()})});const Ie=ze();Fe(()=>o.value&&(t.absolute||t.contained)&&a.value==null,Te=>{if(Te){const Ge=uN(v.value);Ge&&Ge!==document.scrollingElement&&(Ie.value=Ge.scrollTop)}});function he(){t.noClickAnimation||w.value&&Io(w.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:md})}return En(()=>{var Te;return $(vt,null,[(Te=n.activator)==null?void 0:Te.call(n,{isActive:o.value,props:qt({ref:V},x.value,t.activatorProps)}),R.value&&d.value&&$(HA,{disabled:!a.value,to:a.value},{default:()=>[$("div",qt({class:["v-overlay",{"v-overlay--absolute":t.absolute||t.contained,"v-overlay--active":o.value,"v-overlay--contained":t.contained},c.value,u.value,t.class],style:[C.value,{top:Oe(Ie.value)},t.style],ref:v},_,r),[$(WM,qt({color:g,modelValue:o.value&&!!t.scrim},q.value),null),$(wo,{appear:!0,persisted:!0,transition:t.transition,target:N.value,onAfterLeave:()=>{m(),s("afterLeave")}},{default:()=>{var Ge;return[Jc($("div",qt({ref:w,class:["v-overlay__content",t.contentClass],style:[G.value,S.value]},L.value,t.contentProps),[(Ge=n.default)==null?void 0:Ge.call(n,{isActive:o})]),[[lE,o.value],[Wd("click-outside"),{handler:I,closeConditional:de,include:()=>[N.value]}]])]}})])]})])}),{activatorEl:N,animateClick:he,contentEl:w,globalTop:E,localTop:b,updateLocation:T}}}),dh=Symbol("Forwarded refs");function fh(t,e){let n=t;for(;n;){const r=Reflect.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function QM(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t[dh]=n,new Proxy(t,{get(s,i){if(Reflect.has(s,i))return Reflect.get(s,i);if(!(typeof i=="symbol"||i.startsWith("__"))){for(const o of n)if(o.value&&Reflect.has(o.value,i)){const a=Reflect.get(o.value,i);return typeof a=="function"?a.bind(o.value):a}}},has(s,i){if(Reflect.has(s,i))return!0;if(typeof i=="symbol"||i.startsWith("__"))return!1;for(const o of n)if(o.value&&Reflect.has(o.value,i))return!0;return!1},set(s,i,o){if(Reflect.has(s,i))return Reflect.set(s,i,o);if(typeof i=="symbol"||i.startsWith("__"))return!1;for(const a of n)if(a.value&&Reflect.has(a.value,i))return Reflect.set(a.value,i,o);return!1},getOwnPropertyDescriptor(s,i){var a;const o=Reflect.getOwnPropertyDescriptor(s,i);if(o)return o;if(!(typeof i=="symbol"||i.startsWith("__"))){for(const c of n){if(!c.value)continue;const u=fh(c.value,i)??("_"in c.value?fh((a=c.value._)==null?void 0:a.setupState,i):void 0);if(u)return u}for(const c of n){const u=c.value&&c.value[dh];if(!u)continue;const h=u.slice();for(;h.length;){const d=h.shift(),m=fh(d.value,i);if(m)return m;const g=d.value&&d.value[dh];g&&h.push(...g)}}}}})}const YM=xe({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...yb({origin:"center center",scrollStrategy:"block",transition:{component:yM},zIndex:2400})},"VDialog"),JM=Ut()({name:"VDialog",props:YM(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=_u(t,"modelValue"),{scopeId:s}=pb(),i=ze();function o(c){var d,m;const u=c.relatedTarget,h=c.target;if(u!==h&&((d=i.value)!=null&&d.contentEl)&&((m=i.value)!=null&&m.globalTop)&&![document,i.value.contentEl].includes(h)&&!i.value.contentEl.contains(h)){const g=xT(i.value.contentEl);if(!g.length)return;const E=g[0],b=g[g.length-1];u===E?b.focus():E.focus()}}rt&&Fe(()=>r.value&&t.retainFocus,c=>{c?document.addEventListener("focusin",o):document.removeEventListener("focusin",o)},{immediate:!0}),Fe(r,async c=>{var u,h;await yn(),c?(u=i.value.contentEl)==null||u.focus({preventScroll:!0}):(h=i.value.activatorEl)==null||h.focus({preventScroll:!0})});const a=Y(()=>qt({"aria-haspopup":"dialog","aria-expanded":String(r.value)},t.activatorProps));return En(()=>{const[c]=Ly.filterProps(t);return $(Ly,qt({ref:i,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable},t.class],style:t.style},c,{modelValue:r.value,"onUpdate:modelValue":u=>r.value=u,"aria-modal":"true",activatorProps:a.value,role:"dialog"},s),{activator:n.activator,default:function(){for(var u=arguments.length,h=new Array(u),d=0;d<u;d++)h[d]=arguments[d];return $(bl,{root:"VDialog"},{default:()=>{var m;return[(m=n.default)==null?void 0:m.call(n,...h)]}})}})}),QM({},i)}});function XM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=ze(),r=ze();if(rt){const s=new ResizeObserver(i=>{t==null||t(i,s),i.length&&(e==="content"?r.value=i[0].contentRect:r.value=i[0].target.getBoundingClientRect())});Bl(()=>{s.disconnect()}),Fe(n,(i,o)=>{o&&(s.unobserve(ud(o)),r.value=void 0),i&&s.observe(ud(i))},{flush:"post"})}return{resizeRef:n,contentRect:Dl(r)}}const ZM=xe({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...vn(),...ym(),...Ba({tag:"div"}),...Li()},"VProgressCircular"),eL=Ut()({name:"VProgressCircular",props:ZM(),setup(t,e){let{slots:n}=e;const r=20,s=2*Math.PI*r,i=ze(),{themeClasses:o}=Fi(t),{sizeClasses:a,sizeStyles:c}=vm(t),{textColorClasses:u,textColorStyles:h}=Tl(Bo(t,"color")),{textColorClasses:d,textColorStyles:m}=Tl(Bo(t,"bgColor")),{intersectionRef:g,isIntersecting:E}=ZT(),{resizeRef:b,contentRect:C}=XM(),N=Y(()=>Math.max(0,Math.min(100,parseFloat(t.modelValue)))),V=Y(()=>Number(t.width)),x=Y(()=>c.value?Number(t.size):C.value?C.value.width:Math.max(V.value,32)),L=Y(()=>r/(1-V.value/x.value)*2),q=Y(()=>V.value/x.value*L.value),G=Y(()=>Oe((100-N.value)/100*s));return Fr(()=>{g.value=i.value,b.value=i.value}),En(()=>$(t.tag,{ref:i,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!t.indeterminate,"v-progress-circular--visible":E.value,"v-progress-circular--disable-shrink":t.indeterminate==="disable-shrink"},o.value,a.value,u.value,t.class],style:[c.value,h.value,t.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":t.indeterminate?void 0:N.value},{default:()=>[$("svg",{style:{transform:`rotate(calc(-90deg + ${Number(t.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${L.value} ${L.value}`},[$("circle",{class:["v-progress-circular__underlay",d.value],style:m.value,fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":q.value,"stroke-dasharray":s,"stroke-dashoffset":0},null),$("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":q.value,"stroke-dasharray":s,"stroke-dashoffset":G.value},null)]),n.default&&$("div",{class:"v-progress-circular__content"},[n.default({value:N.value})])]})),{}}}),tL=t=>(sA("data-v-eafe6126"),t=t(),iA(),t),nL={class:"loading-overlay"},rL=tL(()=>zl("span",null," Cargando...",-1)),sL={__name:"progre",setup(t){const e=AO();return ze(!0),(n,r)=>(jl(),Zd(JM,{modelValue:Mt(e).progre,"onUpdate:modelValue":r[0]||(r[0]=s=>Mt(e).progre=s),persistent:"","max-width":"200","max-height":"80"},{default:Pc(()=>[zl("div",nL,[$(gM,null,{default:Pc(()=>[$(XT,null,{default:Pc(()=>[$(eL,{color:"deep-orange-lighten-2",indeterminate:"",width:2}),rL]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}},iL=RO(sL,[["__scopeId","data-v-eafe6126"]]),oL={__name:"App",setup(t){return(e,n)=>{const r=bA("router-view");return jl(),WA(vt,null,[$(iL),$(r)],64)}}},aL="modulepreload",cL=function(t){return"/"+t},Fy={},tn=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=cL(i),i in Fy)return;Fy[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const d=s[h];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":aL,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};async function lL(){(await tn(()=>import("./webfontloader-caa8e892.js").then(e=>e.w),["assets/webfontloader-caa8e892.js","assets/_commonjsHelpers-725317a4.js"])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const wd={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function uL(t,e){const n=[];let r=[];const s=vb(t),i=Eb(t),o=s.getDay()-wd[e.slice(-2).toUpperCase()],a=i.getDay()-wd[e.slice(-2).toUpperCase()];for(let c=0;c<o;c++){const u=new Date(s);u.setDate(u.getDate()-(o-c)),r.push(u)}for(let c=1;c<=i.getDate();c++){const u=new Date(t.getFullYear(),t.getMonth(),c);r.push(u),r.length===7&&(n.push(r),r=[])}for(let c=1;c<7-a;c++){const u=new Date(i);u.setDate(u.getDate()+c),r.push(u)}return n.push(r),n}function vb(t){return new Date(t.getFullYear(),t.getMonth(),1)}function Eb(t){return new Date(t.getFullYear(),t.getMonth()+1,0)}function hL(t){const e=t.split("-").map(Number);return new Date(e[0],e[1]-1,e[2])}const dL=/([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))/;function fL(t){if(t==null)return new Date;if(t instanceof Date)return t;if(typeof t=="string"){let e;if(dL.test(t))return hL(t);if(e=Date.parse(t),!isNaN(e))return new Date(e)}return null}const Uy=new Date(2e3,0,2);function mL(t){const e=wd[t.slice(-2).toUpperCase()];return AT(7).map(n=>{const r=new Date(Uy);return r.setDate(Uy.getDate()+e+n),new Intl.DateTimeFormat(t,{weekday:"narrow"}).format(r)})}function pL(t,e,n){const r=new Date(t);let s={};switch(e){case"fullDateWithWeekday":s={weekday:"long",day:"numeric",month:"long",year:"numeric"};break;case"normalDateWithWeekday":s={weekday:"short",day:"numeric",month:"short"};break;case"keyboardDate":s={};break;case"monthAndDate":s={month:"long",day:"numeric"};break;case"monthAndYear":s={month:"long",year:"numeric"};break;case"dayOfMonth":s={day:"numeric"};break;default:s={timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,s).format(r)}function gL(t,e){const n=new Date(t);return n.setDate(n.getDate()+e),n}function _L(t,e){const n=new Date(t);return n.setMonth(n.getMonth()+e),n}function yL(t){return t.getFullYear()}function vL(t){return t.getMonth()}function EL(t){return new Date(t.getFullYear(),0,1)}function IL(t){return new Date(t.getFullYear(),11,31)}function wL(t,e){return Td(t,e[0])&&bL(t,e[1])}function TL(t){const e=new Date(t);return e instanceof Date&&!isNaN(e.getTime())}function Td(t,e){return t.getTime()>e.getTime()}function bL(t,e){return t.getTime()<e.getTime()}function By(t,e){return t.getTime()===e.getTime()}function AL(t,e){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function RL(t,e){return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function SL(t,e,n){const r=new Date(t),s=new Date(e);return n==="month"?r.getMonth()-s.getMonth()+(r.getFullYear()-s.getFullYear())*12:Math.floor((r.getTime()-s.getTime())/(1e3*60*60*24))}function PL(t,e){const n=new Date(t);return n.setFullYear(e),n}class CL{constructor(e){this.locale=e.locale}date(e){return fL(e)}toJsDate(e){return e}addDays(e,n){return gL(e,n)}addMonths(e,n){return _L(e,n)}getWeekArray(e){return uL(e,this.locale)}startOfMonth(e){return vb(e)}endOfMonth(e){return Eb(e)}format(e,n){return pL(e,n,this.locale)}isEqual(e,n){return By(e,n)}isValid(e){return TL(e)}isWithinRange(e,n){return wL(e,n)}isAfter(e,n){return Td(e,n)}isBefore(e,n){return!Td(e,n)&&!By(e,n)}isSameDay(e,n){return AL(e,n)}isSameMonth(e,n){return RL(e,n)}setYear(e,n){return PL(e,n)}getDiff(e,n,r){return SL(e,n,r)}getWeekdays(){return mL(this.locale)}getYear(e){return yL(e)}getMonth(e){return vL(e)}startOfYear(e){return EL(e)}endOfYear(e){return IL(e)}}const jy=Symbol.for("vuetify:date-adapter");function xL(t){return rn({adapter:CL,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"nn-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},t)}function Ib(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:e,...n}=t,r=rn(e,n),{aliases:s={},components:i={},directives:o={}}=r,a=mN(r.defaults),c=FM(r.display,r.ssr),u=SN(r.theme),h=TN(r.icons),d=QN(r.locale),m=xL(r.date);return{install:E=>{for(const b in o)E.directive(b,o[b]);for(const b in i)E.component(b,i[b]);for(const b in s)E.component(b,Ua({...s[b],name:b,aliasName:s[b].name}));if(u.install(E),E.provide(Ti,a),E.provide(Id,c),E.provide(ua,u),E.provide(gd,h),E.provide(Al,d),E.provide(jy,m),rt&&r.ssr)if(E.$nuxt)E.$nuxt.hook("app:suspense:resolve",()=>{c.update()});else{const{mount:b}=E;E.mount=function(){const C=b(...arguments);return yn(()=>c.update()),E.mount=b,C}}BT.reset(),E.mixin({computed:{$vuetify(){return Vn({defaults:Hs.call(this,Ti),display:Hs.call(this,Id),theme:Hs.call(this,ua),icons:Hs.call(this,gd),locale:Hs.call(this,Al),date:Hs.call(this,jy)})}}})},defaults:a,display:c,theme:u,icons:h,locale:d,date:m}}const kL="3.3.15";Ib.version=kL;function Hs(t){var r,s;const e=this.$,n=((r=e.parent)==null?void 0:r.provides)??((s=e.vnode.appContext)==null?void 0:s.provides);if(n&&t in n)return n[t]}const DL=Ib({theme:{themes:{light:{colors:{primary:"#1867C0",secondary:"#5CBBF6"}}}}}),VL=HR();/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Xs=typeof window<"u";function OL(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Me=Object.assign;function mh(t,e){const n={};for(const r in e){const s=e[r];n[r]=_n(s)?s.map(t):t(s)}return n}const No=()=>{},_n=Array.isArray,NL=/\/$/,ML=t=>t.replace(NL,"");function ph(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=BL(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function LL(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function $y(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function FL(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&bi(e.matched[r],n.matched[s])&&wb(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function bi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function wb(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!UL(t[n],e[n]))return!1;return!0}function UL(t,e){return _n(t)?zy(t,e):_n(e)?zy(e,t):t===e}function zy(t,e){return _n(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function BL(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var fa;(function(t){t.pop="pop",t.push="push"})(fa||(fa={}));var Mo;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Mo||(Mo={}));function jL(t){if(!t)if(Xs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),ML(t)}const $L=/^[^#]+#/;function zL(t,e){return t.replace($L,"#")+e}function qL(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const yu=()=>({left:window.pageXOffset,top:window.pageYOffset});function KL(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=qL(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function qy(t,e){return(history.state?history.state.position-e:-1)+t}const bd=new Map;function HL(t,e){bd.set(t,e)}function GL(t){const e=bd.get(t);return bd.delete(t),e}let WL=()=>location.protocol+"//"+location.host;function Tb(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),$y(c,"")}return $y(n,t)+r+s}function QL(t,e,n,r){let s=[],i=[],o=null;const a=({state:m})=>{const g=Tb(t,location),E=n.value,b=e.value;let C=0;if(m){if(n.value=g,e.value=m,o&&o===E){o=null;return}C=b?m.position-b.position:0}else r(g);s.forEach(N=>{N(n.value,E,{delta:C,type:fa.pop,direction:C?C>0?Mo.forward:Mo.back:Mo.unknown})})};function c(){o=n.value}function u(m){s.push(m);const g=()=>{const E=s.indexOf(m);E>-1&&s.splice(E,1)};return i.push(g),g}function h(){const{history:m}=window;m.state&&m.replaceState(Me({},m.state,{scroll:yu()}),"")}function d(){for(const m of i)m();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:d}}function Ky(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?yu():null}}function YL(t){const{history:e,location:n}=window,r={value:Tb(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const d=t.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+c:WL()+t+c;try{e[h?"replaceState":"pushState"](u,"",m),s.value=u}catch(g){console.error(g),n[h?"replace":"assign"](m)}}function o(c,u){const h=Me({},e.state,Ky(s.value.back,c,s.value.forward,!0),u,{position:s.value.position});i(c,h,!0),r.value=c}function a(c,u){const h=Me({},s.value,e.state,{forward:c,scroll:yu()});i(h.current,h,!0);const d=Me({},Ky(r.value,c,null),{position:h.position+1},u);i(c,d,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function JL(t){t=jL(t);const e=YL(t),n=QL(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Me({location:"",base:t,go:r,createHref:zL.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function XL(t){return typeof t=="string"||t&&typeof t=="object"}function bb(t){return typeof t=="string"||typeof t=="symbol"}const ur={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ab=Symbol("");var Hy;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Hy||(Hy={}));function Ai(t,e){return Me(new Error,{type:t,[Ab]:!0},e)}function Fn(t,e){return t instanceof Error&&Ab in t&&(e==null||!!(t.type&e))}const Gy="[^/]+?",ZL={sensitive:!1,strict:!1,start:!0,end:!0},eF=/[.+*?^${}()[\]/\\]/g;function tF(t,e){const n=Me({},ZL,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const m=u[d];let g=40+(n.sensitive?.25:0);if(m.type===0)d||(s+="/"),s+=m.value.replace(eF,"\\$&"),g+=40;else if(m.type===1){const{value:E,repeatable:b,optional:C,regexp:N}=m;i.push({name:E,repeatable:b,optional:C});const V=N||Gy;if(V!==Gy){g+=10;try{new RegExp(`(${V})`)}catch(L){throw new Error(`Invalid custom RegExp for param "${E}" (${V}): `+L.message)}}let x=b?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;d||(x=C&&u.length<2?`(?:/${x})`:"/"+x),C&&(x+="?"),s+=x,g+=20,C&&(g+=-8),b&&(g+=-20),V===".*"&&(g+=-50)}h.push(g)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let m=1;m<h.length;m++){const g=h[m]||"",E=i[m-1];d[E.name]=g&&E.repeatable?g.split("/"):g}return d}function c(u){let h="",d=!1;for(const m of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const g of m)if(g.type===0)h+=g.value;else if(g.type===1){const{value:E,repeatable:b,optional:C}=g,N=E in u?u[E]:"";if(_n(N)&&!b)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const V=_n(N)?N.join("/"):N;if(!V)if(C)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${E}"`);h+=V}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function nF(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function rF(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=nF(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Wy(r))return 1;if(Wy(s))return-1}return s.length-r.length}function Wy(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const sF={type:0,value:""},iF=/[a-zA-Z0-9_]/;function oF(t){if(!t)return[[]];if(t==="/")return[[sF]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(u&&d(),o()):c===":"?(d(),n=1):m();break;case 4:m(),n=r;break;case 1:c==="("?n=2:iF.test(c)?m():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=3:h+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}function aF(t,e,n){const r=tF(oF(t.path),n),s=Me(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function cF(t,e){const n=[],r=new Map;e=Jy({strict:!1,end:!0,sensitive:!1},e);function s(h){return r.get(h)}function i(h,d,m){const g=!m,E=lF(h);E.aliasOf=m&&m.record;const b=Jy(e,h),C=[E];if("alias"in h){const x=typeof h.alias=="string"?[h.alias]:h.alias;for(const L of x)C.push(Me({},E,{components:m?m.record.components:E.components,path:L,aliasOf:m?m.record:E}))}let N,V;for(const x of C){const{path:L}=x;if(d&&L[0]!=="/"){const q=d.record.path,G=q[q.length-1]==="/"?"":"/";x.path=d.record.path+(L&&G+L)}if(N=aF(x,d,b),m?m.alias.push(N):(V=V||N,V!==N&&V.alias.push(N),g&&h.name&&!Yy(N)&&o(h.name)),E.children){const q=E.children;for(let G=0;G<q.length;G++)i(q[G],N,m&&m.children[G])}m=m||N,(N.record.components&&Object.keys(N.record.components).length||N.record.name||N.record.redirect)&&c(N)}return V?()=>{o(V)}:No}function o(h){if(bb(h)){const d=r.get(h);d&&(r.delete(h),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(h);d>-1&&(n.splice(d,1),h.record.name&&r.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function c(h){let d=0;for(;d<n.length&&rF(h,n[d])>=0&&(h.record.path!==n[d].record.path||!Rb(h,n[d]));)d++;n.splice(d,0,h),h.record.name&&!Yy(h)&&r.set(h.record.name,h)}function u(h,d){let m,g={},E,b;if("name"in h&&h.name){if(m=r.get(h.name),!m)throw Ai(1,{location:h});b=m.record.name,g=Me(Qy(d.params,m.keys.filter(V=>!V.optional).map(V=>V.name)),h.params&&Qy(h.params,m.keys.map(V=>V.name))),E=m.stringify(g)}else if("path"in h)E=h.path,m=n.find(V=>V.re.test(E)),m&&(g=m.parse(E),b=m.record.name);else{if(m=d.name?r.get(d.name):n.find(V=>V.re.test(d.path)),!m)throw Ai(1,{location:h,currentLocation:d});b=m.record.name,g=Me({},d.params,h.params),E=m.stringify(g)}const C=[];let N=m;for(;N;)C.unshift(N.record),N=N.parent;return{name:b,path:E,params:g,matched:C,meta:hF(C)}}return t.forEach(h=>i(h)),{addRoute:i,resolve:u,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Qy(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function lF(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:uF(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function uF(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Yy(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function hF(t){return t.reduce((e,n)=>Me(e,n.meta),{})}function Jy(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Rb(t,e){return e.children.some(n=>n===t||Rb(t,n))}const Sb=/#/g,dF=/&/g,fF=/\//g,mF=/=/g,pF=/\?/g,Pb=/\+/g,gF=/%5B/g,_F=/%5D/g,Cb=/%5E/g,yF=/%60/g,xb=/%7B/g,vF=/%7C/g,kb=/%7D/g,EF=/%20/g;function Rm(t){return encodeURI(""+t).replace(vF,"|").replace(gF,"[").replace(_F,"]")}function IF(t){return Rm(t).replace(xb,"{").replace(kb,"}").replace(Cb,"^")}function Ad(t){return Rm(t).replace(Pb,"%2B").replace(EF,"+").replace(Sb,"%23").replace(dF,"%26").replace(yF,"`").replace(xb,"{").replace(kb,"}").replace(Cb,"^")}function wF(t){return Ad(t).replace(mF,"%3D")}function TF(t){return Rm(t).replace(Sb,"%23").replace(pF,"%3F")}function bF(t){return t==null?"":TF(t).replace(fF,"%2F")}function Pl(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function AF(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Pb," "),o=i.indexOf("="),a=Pl(o<0?i:i.slice(0,o)),c=o<0?null:Pl(i.slice(o+1));if(a in e){let u=e[a];_n(u)||(u=e[a]=[u]),u.push(c)}else e[a]=c}return e}function Xy(t){let e="";for(let n in t){const r=t[n];if(n=wF(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(_n(r)?r.map(i=>i&&Ad(i)):[r&&Ad(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function RF(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=_n(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const SF=Symbol(""),Zy=Symbol(""),vu=Symbol(""),Sm=Symbol(""),Rd=Symbol("");function ho(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function mr(t,e,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const c=d=>{d===!1?a(Ai(4,{from:n,to:e})):d instanceof Error?a(d):XL(d)?a(Ai(2,{from:e,to:d})):(i&&r.enterCallbacks[s]===i&&typeof d=="function"&&i.push(d),o())},u=t.call(r&&r.instances[s],e,n,c);let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(d=>a(d))})}function gh(t,e,n,r){const s=[];for(const i of t)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(PF(a)){const u=(a.__vccOpts||a)[e];u&&s.push(mr(u,n,r,i,o))}else{let c=a();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const h=OL(u)?u.default:u;i.components[o]=h;const m=(h.__vccOpts||h)[e];return m&&mr(m,n,r,i,o)()}))}}return s}function PF(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ev(t){const e=ct(vu),n=ct(Sm),r=Y(()=>e.resolve(Mt(t.to))),s=Y(()=>{const{matched:c}=r.value,{length:u}=c,h=c[u-1],d=n.matched;if(!h||!d.length)return-1;const m=d.findIndex(bi.bind(null,h));if(m>-1)return m;const g=tv(c[u-2]);return u>1&&tv(h)===g&&d[d.length-1].path!==g?d.findIndex(bi.bind(null,c[u-2])):m}),i=Y(()=>s.value>-1&&DF(n.params,r.value.params)),o=Y(()=>s.value>-1&&s.value===n.matched.length-1&&wb(n.params,r.value.params));function a(c={}){return kF(c)?e[Mt(t.replace)?"replace":"push"](Mt(t.to)).catch(No):Promise.resolve()}return{route:r,href:Y(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const CF=Kd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ev,setup(t,{slots:e}){const n=Vn(ev(t)),{options:r}=ct(vu),s=Y(()=>({[nv(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[nv(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:ki("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),xF=CF;function kF(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function DF(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!_n(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function tv(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const nv=(t,e,n)=>t??e??n,VF=Kd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=ct(Rd),s=Y(()=>t.route||r.value),i=ct(Zy,0),o=Y(()=>{let u=Mt(i);const{matched:h}=s.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=Y(()=>s.value.matched[o.value]);Ar(Zy,Y(()=>o.value+1)),Ar(SF,a),Ar(Rd,s);const c=ze();return Fe(()=>[c.value,a.value,t.name],([u,h,d],[m,g,E])=>{h&&(h.instances[d]=u,g&&g!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!bi(h,g)||!m)&&(h.enterCallbacks[d]||[]).forEach(b=>b(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,d=a.value,m=d&&d.components[h];if(!m)return rv(n.default,{Component:m,route:u});const g=d.props[h],E=g?g===!0?u.params:typeof g=="function"?g(u):g:null,C=ki(m,Me({},E,e,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(d.instances[h]=null)},ref:c}));return rv(n.default,{Component:C,route:u})||C}}});function rv(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const OF=VF;function NF(t){const e=cF(t.routes,t),n=t.parseQuery||AF,r=t.stringifyQuery||Xy,s=t.history,i=ho(),o=ho(),a=ho(),c=ft(ur);let u=ur;Xs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=mh.bind(null,B=>""+B),d=mh.bind(null,bF),m=mh.bind(null,Pl);function g(B,ne){let Z,oe;return bb(B)?(Z=e.getRecordMatcher(B),oe=ne):oe=B,e.addRoute(oe,Z)}function E(B){const ne=e.getRecordMatcher(B);ne&&e.removeRoute(ne)}function b(){return e.getRoutes().map(B=>B.record)}function C(B){return!!e.getRecordMatcher(B)}function N(B,ne){if(ne=Me({},ne||c.value),typeof B=="string"){const D=ph(n,B,ne.path),U=e.resolve({path:D.path},ne),j=s.createHref(D.fullPath);return Me(D,U,{params:m(U.params),hash:Pl(D.hash),redirectedFrom:void 0,href:j})}let Z;if("path"in B)Z=Me({},B,{path:ph(n,B.path,ne.path).path});else{const D=Me({},B.params);for(const U in D)D[U]==null&&delete D[U];Z=Me({},B,{params:d(D)}),ne.params=d(ne.params)}const oe=e.resolve(Z,ne),Pe=B.hash||"";oe.params=h(m(oe.params));const A=LL(r,Me({},B,{hash:IF(Pe),path:oe.path})),P=s.createHref(A);return Me({fullPath:A,hash:Pe,query:r===Xy?RF(B.query):B.query||{}},oe,{redirectedFrom:void 0,href:P})}function V(B){return typeof B=="string"?ph(n,B,c.value.path):Me({},B)}function x(B,ne){if(u!==B)return Ai(8,{from:ne,to:B})}function L(B){return R(B)}function q(B){return L(Me(V(B),{replace:!0}))}function G(B){const ne=B.matched[B.matched.length-1];if(ne&&ne.redirect){const{redirect:Z}=ne;let oe=typeof Z=="function"?Z(B):Z;return typeof oe=="string"&&(oe=oe.includes("?")||oe.includes("#")?oe=V(oe):{path:oe},oe.params={}),Me({query:B.query,hash:B.hash,params:"path"in oe?{}:B.params},oe)}}function R(B,ne){const Z=u=N(B),oe=c.value,Pe=B.state,A=B.force,P=B.replace===!0,D=G(Z);if(D)return R(Me(V(D),{state:typeof D=="object"?Me({},Pe,D.state):Pe,force:A,replace:P}),ne||Z);const U=Z;U.redirectedFrom=ne;let j;return!A&&FL(r,oe,Z)&&(j=Ai(16,{to:U,from:oe}),ut(oe,oe,!0,!1)),(j?Promise.resolve(j):w(U,oe)).catch(z=>Fn(z)?Fn(z,2)?z:Ge(z):he(z,U,oe)).then(z=>{if(z){if(Fn(z,2))return R(Me({replace:P},V(z.to),{state:typeof z.to=="object"?Me({},Pe,z.to.state):Pe,force:A}),ne||U)}else z=T(U,oe,!0,P,Pe);return S(U,oe,z),z})}function _(B,ne){const Z=x(B,ne);return Z?Promise.reject(Z):Promise.resolve()}function v(B){const ne=tr.values().next().value;return ne&&typeof ne.runWithContext=="function"?ne.runWithContext(B):B()}function w(B,ne){let Z;const[oe,Pe,A]=MF(B,ne);Z=gh(oe.reverse(),"beforeRouteLeave",B,ne);for(const D of oe)D.leaveGuards.forEach(U=>{Z.push(mr(U,B,ne))});const P=_.bind(null,B,ne);return Z.push(P),_t(Z).then(()=>{Z=[];for(const D of i.list())Z.push(mr(D,B,ne));return Z.push(P),_t(Z)}).then(()=>{Z=gh(Pe,"beforeRouteUpdate",B,ne);for(const D of Pe)D.updateGuards.forEach(U=>{Z.push(mr(U,B,ne))});return Z.push(P),_t(Z)}).then(()=>{Z=[];for(const D of A)if(D.beforeEnter)if(_n(D.beforeEnter))for(const U of D.beforeEnter)Z.push(mr(U,B,ne));else Z.push(mr(D.beforeEnter,B,ne));return Z.push(P),_t(Z)}).then(()=>(B.matched.forEach(D=>D.enterCallbacks={}),Z=gh(A,"beforeRouteEnter",B,ne),Z.push(P),_t(Z))).then(()=>{Z=[];for(const D of o.list())Z.push(mr(D,B,ne));return Z.push(P),_t(Z)}).catch(D=>Fn(D,8)?D:Promise.reject(D))}function S(B,ne,Z){a.list().forEach(oe=>v(()=>oe(B,ne,Z)))}function T(B,ne,Z,oe,Pe){const A=x(B,ne);if(A)return A;const P=ne===ur,D=Xs?history.state:{};Z&&(oe||P?s.replace(B.fullPath,Me({scroll:P&&D&&D.scroll},Pe)):s.push(B.fullPath,Pe)),c.value=B,ut(B,ne,Z,P),Ge()}let I;function de(){I||(I=s.listen((B,ne,Z)=>{if(!In.listening)return;const oe=N(B),Pe=G(oe);if(Pe){R(Me(Pe,{replace:!0}),oe).catch(No);return}u=oe;const A=c.value;Xs&&HL(qy(A.fullPath,Z.delta),yu()),w(oe,A).catch(P=>Fn(P,12)?P:Fn(P,2)?(R(P.to,oe).then(D=>{Fn(D,20)&&!Z.delta&&Z.type===fa.pop&&s.go(-1,!1)}).catch(No),Promise.reject()):(Z.delta&&s.go(-Z.delta,!1),he(P,oe,A))).then(P=>{P=P||T(oe,A,!1),P&&(Z.delta&&!Fn(P,8)?s.go(-Z.delta,!1):Z.type===fa.pop&&Fn(P,20)&&s.go(-1,!1)),S(oe,A,P)}).catch(No)}))}let ke=ho(),pe=ho(),Ie;function he(B,ne,Z){Ge(B);const oe=pe.list();return oe.length?oe.forEach(Pe=>Pe(B,ne,Z)):console.error(B),Promise.reject(B)}function Te(){return Ie&&c.value!==ur?Promise.resolve():new Promise((B,ne)=>{ke.add([B,ne])})}function Ge(B){return Ie||(Ie=!B,de(),ke.list().forEach(([ne,Z])=>B?Z(B):ne()),ke.reset()),B}function ut(B,ne,Z,oe){const{scrollBehavior:Pe}=t;if(!Xs||!Pe)return Promise.resolve();const A=!Z&&GL(qy(B.fullPath,0))||(oe||!Z)&&history.state&&history.state.scroll||null;return yn().then(()=>Pe(B,ne,A)).then(P=>P&&KL(P)).catch(P=>he(P,B,ne))}const Xe=B=>s.go(B);let Ze;const tr=new Set,In={currentRoute:c,listening:!0,addRoute:g,removeRoute:E,hasRoute:C,getRoutes:b,resolve:N,options:t,push:L,replace:q,go:Xe,back:()=>Xe(-1),forward:()=>Xe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:pe.add,isReady:Te,install(B){const ne=this;B.component("RouterLink",xF),B.component("RouterView",OF),B.config.globalProperties.$router=ne,Object.defineProperty(B.config.globalProperties,"$route",{enumerable:!0,get:()=>Mt(c)}),Xs&&!Ze&&c.value===ur&&(Ze=!0,L(s.location).catch(Pe=>{}));const Z={};for(const Pe in ur)Object.defineProperty(Z,Pe,{get:()=>c.value[Pe],enumerable:!0});B.provide(vu,ne),B.provide(Sm,Iv(Z)),B.provide(Rd,c);const oe=B.unmount;tr.add(B),B.unmount=function(){tr.delete(B),tr.size<1&&(u=ur,I&&I(),I=null,c.value=ur,Ze=!1,Ie=!1),oe()}}};function _t(B){return B.reduce((ne,Z)=>ne.then(()=>v(Z)),Promise.resolve())}return In}function MF(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>bi(u,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(u=>bi(u,c))||s.push(c))}return[n,r,s]}function T2(){return ct(vu)}function b2(){return ct(Sm)}vl.currentUser;const LF=[{path:"/",component:()=>tn(()=>import("./Default-ec6fa2e5.js"),["assets/Default-ec6fa2e5.js","assets/VApp-061e3757.js","assets/VApp-71d361fe.css"]),children:[{path:"",name:"Dashboard",component:()=>tn(()=>import("./Dashboard-367ec31c.js"),["assets/Dashboard-367ec31c.js","assets/PanelControl-936f1e93.js","assets/VFooter-1975de81.js","assets/_commonjsHelpers-725317a4.js","assets/VApp-061e3757.js","assets/VApp-71d361fe.css","assets/VFooter-036e0f92.css","assets/VRow-99b26c0e.js","assets/VRow-25b4deb0.css","assets/VCol-7ed7c233.js","assets/PanelControl-8369e211.css","assets/VContainer-b61d32c3.js"]),meta:{auth:!0}},{path:"/Miembros",name:"Miembros",component:()=>tn(()=>import("./Miembros-f6656d2f.js"),["assets/Miembros-f6656d2f.js","assets/PanelControl-936f1e93.js","assets/VFooter-1975de81.js","assets/_commonjsHelpers-725317a4.js","assets/VApp-061e3757.js","assets/VApp-71d361fe.css","assets/VFooter-036e0f92.css","assets/VRow-99b26c0e.js","assets/VRow-25b4deb0.css","assets/VCol-7ed7c233.js","assets/PanelControl-8369e211.css","assets/VTable-eb1c2c62.js","assets/VTable-702684f3.css","assets/VAlertTitle-05a0566e.js","assets/VForm-30f05d1f.js","assets/form-65142a50.js","assets/VSelect-3bb82d76.js","assets/VTextField-ffd46df8.js","assets/VTextField-f13cdd98.css","assets/VChip-c85d63b7.js","assets/VChip-323b10eb.css","assets/VSelect-403ccefa.css","assets/VTextarea-490ac977.js","assets/VTextarea-1e58334b.css","assets/Miembros-808b4094.css"]),meta:{auth:!0}},{path:"/Amigos",name:"Amigos",component:()=>tn(()=>import("./Amigos-01b34141.js"),["assets/Amigos-01b34141.js","assets/PanelControl-936f1e93.js","assets/VFooter-1975de81.js","assets/_commonjsHelpers-725317a4.js","assets/VApp-061e3757.js","assets/VApp-71d361fe.css","assets/VFooter-036e0f92.css","assets/VRow-99b26c0e.js","assets/VRow-25b4deb0.css","assets/VCol-7ed7c233.js","assets/PanelControl-8369e211.css","assets/VTable-eb1c2c62.js","assets/VTable-702684f3.css","assets/VForm-30f05d1f.js","assets/form-65142a50.js","assets/VTextField-ffd46df8.js","assets/VTextField-f13cdd98.css","assets/VTextarea-490ac977.js","assets/VTextarea-1e58334b.css","assets/Amigos-669a2500.css"]),meta:{auth:!0}},{path:"/Consultas",name:"Consultas",component:()=>tn(()=>import("./Consultas-29e60c25.js"),["assets/Consultas-29e60c25.js","assets/PanelControl-936f1e93.js","assets/VFooter-1975de81.js","assets/_commonjsHelpers-725317a4.js","assets/VApp-061e3757.js","assets/VApp-71d361fe.css","assets/VFooter-036e0f92.css","assets/VRow-99b26c0e.js","assets/VRow-25b4deb0.css","assets/VCol-7ed7c233.js","assets/PanelControl-8369e211.css","assets/VForm-30f05d1f.js","assets/form-65142a50.js","assets/VContainer-b61d32c3.js","assets/Consultas-d3ea7b90.css"]),meta:{auth:!0}},{path:"/Birthday",name:"Birthday",component:()=>tn(()=>import("./Birthday-3ea9fbfa.js"),["assets/Birthday-3ea9fbfa.js","assets/PanelControl-936f1e93.js","assets/VFooter-1975de81.js","assets/_commonjsHelpers-725317a4.js","assets/VApp-061e3757.js","assets/VApp-71d361fe.css","assets/VFooter-036e0f92.css","assets/VRow-99b26c0e.js","assets/VRow-25b4deb0.css","assets/VCol-7ed7c233.js","assets/PanelControl-8369e211.css","assets/VChip-c85d63b7.js","assets/VChip-323b10eb.css","assets/Birthday-bffe463d.css"]),meta:{auth:!0}},{path:"/Solicitudes",name:"Solicitudes",component:()=>tn(()=>import("./Solicitudes-fa01bd7f.js"),["assets/Solicitudes-fa01bd7f.js","assets/PanelControl-936f1e93.js","assets/VFooter-1975de81.js","assets/_commonjsHelpers-725317a4.js","assets/VApp-061e3757.js","assets/VApp-71d361fe.css","assets/VFooter-036e0f92.css","assets/VRow-99b26c0e.js","assets/VRow-25b4deb0.css","assets/VCol-7ed7c233.js","assets/PanelControl-8369e211.css","assets/VSelect-3bb82d76.js","assets/VTextField-ffd46df8.js","assets/form-65142a50.js","assets/VTextField-f13cdd98.css","assets/VChip-c85d63b7.js","assets/VChip-323b10eb.css","assets/VSelect-403ccefa.css","assets/Solicitudes-96e98268.css"]),meta:{auth:!0}},{path:"/Sugerencias",name:"Sugerencias",component:()=>tn(()=>import("./Sugerencias-50bd003f.js"),["assets/Sugerencias-50bd003f.js","assets/PanelControl-936f1e93.js","assets/VFooter-1975de81.js","assets/_commonjsHelpers-725317a4.js","assets/VApp-061e3757.js","assets/VApp-71d361fe.css","assets/VFooter-036e0f92.css","assets/VRow-99b26c0e.js","assets/VRow-25b4deb0.css","assets/VCol-7ed7c233.js","assets/PanelControl-8369e211.css","assets/VForm-30f05d1f.js","assets/form-65142a50.js","assets/VSelect-3bb82d76.js","assets/VTextField-ffd46df8.js","assets/VTextField-f13cdd98.css","assets/VChip-c85d63b7.js","assets/VChip-323b10eb.css","assets/VSelect-403ccefa.css","assets/VTextarea-490ac977.js","assets/VTextarea-1e58334b.css","assets/VAlert-b1cd6103.js","assets/VAlertTitle-05a0566e.js","assets/VAlert-a473ba34.css","assets/VContainer-b61d32c3.js"]),meta:{auth:!0}},{path:"/Informacion",name:"Informacion",component:()=>tn(()=>import("./Informacion-fa87b144.js"),["assets/Informacion-fa87b144.js","assets/PanelControl-936f1e93.js","assets/VFooter-1975de81.js","assets/_commonjsHelpers-725317a4.js","assets/VApp-061e3757.js","assets/VApp-71d361fe.css","assets/VFooter-036e0f92.css","assets/VRow-99b26c0e.js","assets/VRow-25b4deb0.css","assets/VCol-7ed7c233.js","assets/PanelControl-8369e211.css","assets/Informacion-2971d093.css"]),meta:{auth:!0}},{path:"/Login",name:"Login",component:()=>tn(()=>import("./Login-51bc31cb.js"),["assets/Login-51bc31cb.js","assets/VFooter-1975de81.js","assets/_commonjsHelpers-725317a4.js","assets/VApp-061e3757.js","assets/VApp-71d361fe.css","assets/VFooter-036e0f92.css","assets/VRow-99b26c0e.js","assets/VRow-25b4deb0.css","assets/VForm-30f05d1f.js","assets/form-65142a50.js","assets/VAlert-b1cd6103.js","assets/VAlertTitle-05a0566e.js","assets/VAlert-a473ba34.css","assets/VContainer-b61d32c3.js","assets/Login-fd898b59.css"]),meta:{auth:!1}},{path:"/:catchAll(.*)",name:"NotFound",component:()=>tn(()=>import("./NotFound-e568e3e2.js"),["assets/NotFound-e568e3e2.js","assets/VContainer-b61d32c3.js","assets/VRow-99b26c0e.js","assets/VRow-25b4deb0.css","assets/VCol-7ed7c233.js","assets/NotFound-e3b0c442.css"])}]}],Db=NF({history:JL({}.BASE_URL),routes:LF});function FF(){return new Promise(t=>{const e=vl.onAuthStateChanged(n=>{e(),t(n)})})}Db.beforeEach(async(t,e,n)=>{const r=await FF();t.path.toLowerCase()==="/login"&&r?n(""):t.matched.some(s=>s.meta.auth)&&!r?n("/Login"):n()});function UF(t){lL(),t.use(DL).use(VL).use(Db)}const Vb=zR(oL);UF(Vb);Vb.mount("#app");export{XF as $,l2 as A,o2 as B,a2 as C,xe as D,m2 as E,vt as F,Ut as G,I2 as H,_u as I,p2 as J,En as K,f2 as L,QM as M,yn as N,y2 as O,VO as P,Rs as Q,BT as R,Vn as S,Ey as T,JM as U,gM as V,GT as W,ZR as X,r2 as Y,vl as Z,RO as _,$ as a,gu as a$,nd as a0,co as a1,Yx as a2,Zu as a3,io as a4,Xu as a5,JF as a6,sA as a7,iA as a8,Bl as a9,YF as aA,Em as aB,rb as aC,rM as aD,pd as aE,$N as aF,Im as aG,qN as aH,sb as aI,sM as aJ,bm as aK,d2 as aL,Ar as aM,Wd as aN,jM as aO,ct as aP,$M as aQ,lE as aR,wo as aS,AA as aT,T2 as aU,Bv as aV,e2 as aW,VN as aX,Fr as aY,dd as aZ,cn as a_,n2 as aa,ZF as ab,yA as ac,jN as ad,vn as ae,wm as af,zN as ag,Tm as ah,ym as ai,Ba as aj,Li as ak,YT as al,Am as am,Fi as an,UM as ao,ft as ap,jT as aq,XM as ar,AT as as,Bo as at,h2 as au,WT as av,Oe as aw,HF as ax,eL as ay,yc as az,ze as b,uN as b0,Xt as b1,DO as b2,KT as b3,yM as b4,u2 as b5,rt as b6,bl as b7,FO as b8,Vs as b9,ny as bA,ms as bB,Dd as bC,kd as bD,i2 as bE,E2 as bF,yb as bG,kM as bH,Ly as bI,xT as bJ,MO as bK,b2 as bL,$F as bM,KF as bN,s2 as bO,qF as bP,ki as bQ,pn as bR,ih as bS,gA as bT,pA as bU,Dl as bV,w2 as bW,Pi as bX,_2 as ba,ZN as bb,eM as bc,Tl as bd,DT as be,Io as bf,tM as bg,ST as bh,hd as bi,md as bj,Fv as bk,mM as bl,Dr as bm,aM as bn,JT as bo,vm as bp,oM as bq,QT as br,Ae as bs,Ua as bt,mm as bu,v2 as bv,LO as bw,g2 as bx,iM as by,pb as bz,Zd as c,Fe as d,Hd as e,WA as f,jF as g,zl as h,CN as i,JA as j,vN as k,yN as l,Y as m,XT as n,jl as o,Jc as p,qt as q,bA as r,zF as s,BF as t,AO as u,rg as v,Pc as w,_N as x,Mt as y,c2 as z};
