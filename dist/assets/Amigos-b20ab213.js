import{d as w,_ as Z}from"./PanelControl-7df2cc45.js";import{D as J,a7 as Q,G as ee,I as le,a8 as oe,m as y,K as te,L as ae,a,q,u as G,b as A,d as N,o as C,f as S,w as n,n as H,h as d,i as g,p as re,v as se,y as u,j as m,F as ie,g as ne,t as v,k as j,l as de,x as Y,V as K,_ as ue,P as ce,c as U,s as me,R as pe,W as fe,U as ge,X as be,Y as D,Z as I,$ as ve}from"./index-90f7fbfb.js";import{d as Ve,V as he,f as R,g as B,b as xe,c as _e}from"./VTable-e331d311.js";import{V as ye,a as M,s as E}from"./VFooter-00ceb151.js";import{V as Ae}from"./VForm-b35ddd23.js";import{m as Ce,e as ke,u as Fe,V as W,g as z,d as L}from"./VTextField-cfb14247.js";import{V as $e}from"./VTextarea-e9078d95.js";import"./VApp-187cba23.js";import"./VRow-9d2fd381.js";import"./VCol-fcab6052.js";import"./_commonjsHelpers-725317a4.js";import"./form-1a9ccaaf.js";const Le=J({...Ce(),...Q(ke(),["inline"])},"VCheckbox"),Ee=ee()({name:"VCheckbox",inheritAttrs:!1,props:Le(),emits:{"update:modelValue":p=>!0,"update:focused":p=>!0},setup(p,s){let{attrs:e,slots:c}=s;const r=le(p,"modelValue"),{isFocused:V,focus:k,blur:F}=Fe(p),h=oe(),x=y(()=>p.id||`checkbox-${h}`);return te(()=>{const[_,$]=ae(e),[t,l]=W.filterProps(p),[o,i]=z.filterProps(p);return a(W,q({class:["v-checkbox",p.class]},_,t,{modelValue:r.value,"onUpdate:modelValue":b=>r.value=b,id:x.value,focused:V.value,style:p.style}),{...c,default:b=>{let{id:f,messagesId:P,isDisabled:T,isReadonly:O}=b;return a(z,q(o,{id:f.value,"aria-describedby":P.value,disabled:T.value,readonly:O.value},$,{modelValue:r.value,"onUpdate:modelValue":X=>r.value=X,onFocus:k,onBlur:F}),c)}})}),{}}});const Pe={class:"inputBox mr-2"},Se=d("label",null,null,-1),we=d("span",null,"Exportar a Excel",-1),Ne=d("span",{class:"d-none d-sm-flex"},"Agregar amigo",-1),Ue=d("thead",null,[d("tr",null,[d("th",{class:"text-left hide-on-small-screen column-divider"}," Nombre "),d("th",{class:"text-left column-divider hide-on-small-screen"},"Celular"),d("th",{class:"text-center column-divider hide-on-small-screen"},"Acciones"),d("th",{class:"text-center column-divider show-on-small-screen"},[d("h2",null,"Amigos")])])],-1),Te={class:"max-14-chars column-divider hide-on-small-screen"},qe={class:"hide-on-small-screen column-divider"},De={class:"text-center column-divider hide-on-small-screen"},Ie={class:"column-divider show-on-small-screen",style:{height:"auto"}},Re={__name:"TablaAmigos",setup(p){const s=G(),e=A(1),c=A(20),r=A(""),V=A(s.amigos),k=A([]),F=y(()=>h.value.sort((l,o)=>l.id<o.id?-1:l.id>o.id?1:0)),h=y(()=>{e.value=1;const l=new RegExp(r.value,"i");return _e(V.value,k).filter(i=>l.test(i.nombre)||l.test(i.apellido))}),x=y(()=>Math.ceil($.value/c.value)),_=y(()=>{const l=(e.value-1)*c.value,o=l+c.value;return F.value.slice(l,o)}),$=y(()=>h.value.length);function t(l){e.value=l}return N(()=>s.amigos,(l,o)=>{V.value=l}),(l,o)=>(C(),S("div",null,[a(K,{flat:"",color:"transparent"},{default:n(()=>[a(H,{class:"d-flex align-center conte1"},{default:n(()=>[d("div",Pe,[d("label",null,[a(g,{icon:"mdi-magnify",size:"20"})]),re(d("input",{"onUpdate:modelValue":o[0]||(o[0]=i=>r.value=i),type:"text",placeholder:"Buscar por nombre ",maxlength:"5"},null,512),[[se,r.value]]),Se]),a(w,{class:"d-none d-sm-flex"}),d("button",{class:"mb-2 mr-2 btnExcel elevation-1 d-none d-sm-flex",color:"success",onClick:o[1]||(o[1]=i=>u(Ve)(_.value))},[a(g,null,{default:n(()=>[m("mdi-file-excel")]),_:1}),we]),d("button",{class:"mb-2 mr-2 btnAdd elevation-1",color:"primary",onClick:o[2]||(o[2]=i=>u(s).formAmigos={display:!0,mode:"add",id:""})},[a(g,null,{default:n(()=>[m("mdi-plus")]),_:1}),Ne])]),_:1}),a(ye),a(he,{density:"compact","fixed-header":"","sort-by":"Codigo","sort-desc":!1,class:"small-font-table",style:{border:"0px solid #767575","border-bottom":"0px"},height:"500px"},{default:n(()=>[Ue,d("tbody",null,[(C(!0),S(ie,null,ne(_.value,(i,b)=>(C(),S("tr",{key:b,class:"selectFila"},[d("td",Te,v(u(R)(i)),1),d("td",qe,v(i.celular),1),d("td",De,[a(g,{class:"mr-2",color:"blue",title:"Editar",style:{cursor:"pointer"},onClick:f=>u(s).formAmigos={display:!0,mode:"edit",id:i.id}},{default:n(()=>[m("mdi-pencil")]),_:2},1032,["onClick"]),a(g,{class:"mr-2",color:"green",title:"Ver",style:{cursor:"pointer"},onClick:f=>u(s).formAmigos={display:!0,mode:"view",id:i.id}},{default:n(()=>[m("mdi-eye")]),_:2},1032,["onClick"]),a(g,{class:"",color:"#EF5350",title:"Eliminar",style:{cursor:"pointer"},onClick:f=>u(B)(i)},{default:n(()=>[m("mdi-delete")]),_:2},1032,["onClick"])]),d("td",Ie,[d("div",null,[a(j,null,{default:n(()=>[m(v(u(R)(i)),1)]),_:2},1024),a(de,{style:{"margin-top":"-5px"}},{default:n(()=>[m(" Celular:"+v(i.celular),1)]),_:2},1024),a(Y,null,{default:n(()=>[a(w),a(g,{class:"mr-2",color:"blue",title:"Editar",style:{cursor:"pointer"},onClick:f=>u(s).formAmigos={display:!0,mode:"edit",id:i.id}},{default:n(()=>[m("mdi-pencil")]),_:2},1032,["onClick"]),a(g,{class:"mr-2",color:"green",title:"Ver",style:{cursor:"pointer"},onClick:f=>u(s).formAmigos={display:!0,mode:"view",id:i.id}},{default:n(()=>[m("mdi-eye")]),_:2},1032,["onClick"]),a(g,{class:"",color:"#EF5350",title:"Eliminar",style:{cursor:"pointer"},onClick:f=>u(B)(i)},{default:n(()=>[m("mdi-delete")]),_:2},1032,["onClick"])]),_:2},1024)])])]))),128))])]),_:1}),a(xe,{class:"small-font-table",modelValue:e.value,"onUpdate:modelValue":o[3]||(o[3]=i=>e.value=i),length:x.value,"total-visible":5,ellipsis:null,"boundary-links":!1,onInput:t,"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right",style:{border:"1px solid #767575",color:"rgb(0, 0, 0)"}},null,8,["modelValue","length"])]),_:1})]))}};const Be={__name:"FormAmigoNuevo",setup(p){const s=G(),e=ce({id:"",sede:"",fechaR:"",nombre:"",apellido:"",fechaNacimiento:"",celular:"",tieneWhatsapp:!1,direccion:"",descripcion:""}),c=A(!1),r={required:t=>!!t||"Campo requerido.",minLength:t=>l=>l.length>=t||`Mínimo ${t} caracteres.`,maxLength:t=>l=>l.length<=t||`Máximo ${t} caracteres.`,isNumber:t=>/^\d+$/.test(t)||"Solo se permiten números."},V=()=>{const t=r.required(e.nombre)===!0&&r.minLength(2)(e.nombre)===!0&&r.maxLength(30)(e.nombre)===!0,l=r.required(e.apellido)===!0&&r.minLength(2)(e.apellido)===!0&&r.maxLength(30)(e.apellido)===!0,o=r.required(e.celular)===!0&&r.isNumber(e.celular)===!0&&r.maxLength(15)(e.celular)===!0,i=r.required(e.descripcion)===!0&&r.maxLength(150)(e.descripcion)===!0;c.value=t&&l&&o&&i};N(()=>({...e}),()=>V(),{deep:!0}),N(()=>s.formAmigos,t=>{if(t.mode=="view"||t.mode=="edit"&&t.id!=""){const l=s.amigos.find(o=>o.id===t.id);e.direccion="",e.fechaNacimiento="";for(const o in e)l.hasOwnProperty(o)&&(e[o]=l[o]);e.sede=l.sede,e.fechaR=l.fechaR,e.id=l.id}else x()});const k=()=>{if(c.value)if(c.value=!0,s.progre=!0,s.formAmigos.mode==="add"){e.id=$(),e.sede=fe.currentUser.email,e.fechaR=ge();const t={...e};F(t)}else h()};async function F(t){try{const l=await be(D(I,"Amigos",t.id),t);s.progre=!1,s.formAmigos={display:!1,mode:"",id:""},E("Éxito!","El registro se ha guardado correctamente.","success")}catch(l){s.progre=!1,btnSave.value=!1,E("Error!","Hubo un problema al guardar el registro en Firebase."+l,"error")}}async function h(){try{const t=D(I,"Amigos",s.formAmigos.id);await ve(t,e),s.progre=!1,x(),s.formAmigos={display:!1,mode:"",id:""},E("Éxito!","El registro se ha actualizado correctamente.","success")}catch{s.progre=!1,E("Error!","Hubo un problema al actualizar el registro en Firebase.","error")}}function x(){for(const t in e)Array.isArray(e[t])?e[t]=[]:typeof e[t]=="boolean"?e[t]=!1:e[t]=""}const _=()=>{s.formAmigos.display=!1};function $(){const t=new Date,l=String(t.getDate()).padStart(2,"0"),o=String(t.getMonth()+1).padStart(2,"0"),i=t.getFullYear(),b=String(t.getHours()).padStart(2,"0"),f=String(t.getMinutes()).padStart(2,"0"),P=String(t.getSeconds()).padStart(2,"0");return`${l}${o}${i}${b}${f}${P}`}return(t,l)=>(C(),U(pe,{modelValue:u(s).formAmigos.display,"onUpdate:modelValue":l[8]||(l[8]=o=>u(s).formAmigos.display=o),"max-width":"600px"},{default:n(()=>[a(K,null,{default:n(()=>[a(j,{class:"text-h5"},{default:n(()=>[m(v(u(s).formAmigos.mode=="add"?"Registrar amigo":u(s).formAmigos.mode=="edit"?"Editar amigo":u(s).formAmigos.mode=="view"?"Vista":"Texto por defecto"),1)]),_:1}),a(H,null,{default:n(()=>[a(Ae,{ref:"formRef",modelValue:c.value,"onUpdate:modelValue":l[7]||(l[7]=o=>c.value=o)},{default:n(()=>[a(L,{label:"Nombre",modelValue:e.nombre,"onUpdate:modelValue":l[0]||(l[0]=o=>e.nombre=o),rules:[r.required,r.minLength(2),r.maxLength(30)],outlined:"",clearable:""},null,8,["modelValue","rules"]),a(L,{label:"Apellido",modelValue:e.apellido,"onUpdate:modelValue":l[1]||(l[1]=o=>e.apellido=o),rules:[r.required,r.minLength(2),r.maxLength(30)],outlined:"",clearable:""},null,8,["modelValue","rules"]),a(L,{label:"Fecha de nacimiento",modelValue:e.fechaNacimiento,"onUpdate:modelValue":l[2]||(l[2]=o=>e.fechaNacimiento=o),type:"date",outlined:"",clearable:"",hint:"La fecha nacimiento es opcional","persistent-hint":"",style:{"margin-bottom":"12px"}},null,8,["modelValue"]),a(L,{label:"Celular",modelValue:e.celular,"onUpdate:modelValue":l[3]||(l[3]=o=>e.celular=o),rules:[r.required,r.isNumber,r.maxLength(15)],type:"number",outlined:"",clearable:""},null,8,["modelValue","rules"]),a(Ee,{label:"Tiene WhatsApp",modelValue:e.tieneWhatsapp,"onUpdate:modelValue":l[4]||(l[4]=o=>e.tieneWhatsapp=o)},null,8,["modelValue"]),a(L,{label:"Dirección",modelValue:e.direccion,"onUpdate:modelValue":l[5]||(l[5]=o=>e.direccion=o),rules:[r.required,r.maxLength(150)],outlined:"",clearable:""},null,8,["modelValue","rules"]),a($e,{label:"Descripción",modelValue:e.descripcion,"onUpdate:modelValue":l[6]||(l[6]=o=>e.descripcion=o),rules:[r.required,r.maxLength(500)],outlined:"",clearable:""},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),a(Y,null,{default:n(()=>[a(w),a(M,{color:"red",text:"",onClick:_},{default:n(()=>[m(v(u(s).formAmigos.mode==="view"?"Cerrar":"Cancelar"),1)]),_:1}),u(s).formAmigos.mode!=="view"?(C(),U(M,{key:0,disabled:!c.value,color:"green",text:"",onClick:k},{default:n(()=>[m(v(u(s).formAmigos.mode==="add"?"Guardar":"Guardar Cambios"),1)]),_:1},8,["disabled"])):me("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Me=ue(Be,[["__scopeId","data-v-c86b2f9c"]]),el={__name:"Amigos",setup(p){return(s,e)=>(C(),U(Z,null,{default:n(()=>[a(Re),a(Me)]),_:1}))}};export{el as default};
