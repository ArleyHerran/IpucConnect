import{n as ge,d as ee,g as ye}from"./VTextField-cfb14247.js";import{D as U,ae as re,G as J,ar as ce,d as Y,K as Q,a as i,F as K,q as O,ap as G,m as x,b as H,b4 as Ve,ao as be,as as we,b5 as le,aB as Se,b6 as ke,aG as xe,at as Ie,b7 as Pe,e as Ce,b8 as Te,b9 as Re,aw as W,ac as De,ba as Be,a7 as Fe,bb as _e,bc as Ae,H as Le,I as te,bd as ne,be as Me,i as ae,b1 as Ee,j as Oe,M as He,E as Ke,bf as oe}from"./index-90f7fbfb.js";import{u as Ue}from"./form-1a9ccaaf.js";import{m as qe,u as ze,V as Ne,b as $e,c as ue}from"./PanelControl-7df2cc45.js";import{V as je}from"./VChip-254359b9.js";const We=U({renderless:Boolean,...re()},"VVirtualScrollItem"),Ge=J()({name:"VVirtualScrollItem",inheritAttrs:!1,props:We(),emits:{"update:height":e=>!0},setup(e,f){let{attrs:t,emit:m,slots:r}=f;const{resizeRef:c,contentRect:h}=ce(void 0,"border");Y(()=>{var n;return(n=h.value)==null?void 0:n.height},n=>{n!=null&&m("update:height",n)}),Q(()=>{var n,a;return e.renderless?i(K,null,[(n=r.default)==null?void 0:n.call(r,{itemRef:c})]):i("div",O({ref:c,class:["v-virtual-scroll__item",e.class],style:e.style},t),[(a=r.default)==null?void 0:a.call(r)])})}}),ie=-1,se=1,Ye=U({itemHeight:{type:[Number,String],default:48}},"virtual");function Je(e,f,t){const m=G(0),r=G(e.itemHeight),c=x({get:()=>parseInt(r.value??0,10),set(d){r.value=d}}),h=H(),{resizeRef:n,contentRect:a}=ce();Ve(()=>{n.value=h.value});const b=be(),I=new Map;let S=Array.from({length:f.value.length});const o=x(()=>{const d=(!a.value||h.value===document.documentElement?b.height.value:a.value.height)-((t==null?void 0:t.value)??0);return Math.ceil(d/c.value*1.7+1)});function p(d,v){c.value=Math.max(c.value,v),S[d]=v,I.set(f.value[d],v)}function V(d){return S.slice(0,d).reduce((v,w)=>v+(w||c.value),0)}function B(d){const v=f.value.length;let w=0,D=0;for(;D<d&&w<v;)D+=S[w++]||c.value;return w-1}let T=0;function q(){if(!h.value||!a.value)return;const d=a.value.height-56,v=h.value.scrollTop,w=v<T?ie:se,D=B(v+d/2),N=Math.round(o.value/3),_=D-N,$=m.value+N*2-1;w===ie&&D<=$?m.value=le(_,0,f.value.length):w===se&&D>=$&&(m.value=le(_,0,f.value.length-o.value)),T=v}function M(d){if(!h.value)return;const v=V(d);h.value.scrollTop=v}const E=x(()=>Math.min(f.value.length,m.value+o.value)),L=x(()=>f.value.slice(m.value,E.value).map((d,v)=>({raw:d,index:v+m.value}))),z=x(()=>V(m.value)),F=x(()=>V(f.value.length)-V(E.value));return Y(()=>f.value.length,()=>{S=we(f.value.length).map(()=>c.value),I.forEach((d,v)=>{const w=f.value.indexOf(v);w===-1?I.delete(v):S[w]=d})}),{containerRef:h,computedItems:L,itemHeight:c,paddingTop:z,paddingBottom:F,scrollToIndex:M,handleScroll:q,handleItemResize:p}}const Qe=U({items:{type:Array,default:()=>[]},renderless:Boolean,...Ye(),...re(),...Se()},"VVirtualScroll"),Xe=J()({name:"VVirtualScroll",props:Qe(),setup(e,f){let{slots:t}=f;const m=ke("VVirtualScroll"),{dimensionStyles:r}=xe(e),{containerRef:c,handleScroll:h,handleItemResize:n,scrollToIndex:a,paddingTop:b,paddingBottom:I,computedItems:S}=Je(e,Ie(e,"items"));return Pe(()=>e.renderless,()=>{Ce(()=>{var o;c.value=Te(m.vnode.el,!0),(o=c.value)==null||o.addEventListener("scroll",h)}),Re(()=>{var o;(o=c.value)==null||o.removeEventListener("scroll",h)})}),Q(()=>{const o=S.value.map(p=>i(Ge,{key:p.index,renderless:e.renderless,"onUpdate:height":V=>n(p.index,V)},{default:V=>{var B;return(B=t.default)==null?void 0:B.call(t,{item:p.raw,index:p.index,...V})}}));return e.renderless?i(K,null,[i("div",{class:"v-virtual-scroll__spacer",style:{paddingTop:W(b.value)}},null),o,i("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:W(I.value)}},null)]):i("div",{ref:c,class:["v-virtual-scroll",e.class],onScroll:h,style:[r.value,e.style]},[i("div",{class:"v-virtual-scroll__container",style:{paddingTop:W(b.value),paddingBottom:W(I.value)}},[o])])}),{scrollToIndex:a}}});function Ze(e,f){const t=G(!1);let m;function r(n){cancelAnimationFrame(m),t.value=!0,m=requestAnimationFrame(()=>{m=requestAnimationFrame(()=>{t.value=!1})})}async function c(){await new Promise(n=>requestAnimationFrame(n)),await new Promise(n=>requestAnimationFrame(n)),await new Promise(n=>requestAnimationFrame(n)),await new Promise(n=>{if(t.value){const a=Y(t,()=>{a(),n()})}else n()})}async function h(n){var I,S;if(n.key==="Tab"&&((I=f.value)==null||I.focus()),!["PageDown","PageUp","Home","End"].includes(n.key))return;const a=(S=e.value)==null?void 0:S.$el;if(!a)return;(n.key==="Home"||n.key==="End")&&a.scrollTo({top:n.key==="Home"?0:a.scrollHeight,behavior:"smooth"}),await c();const b=a.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(n.key==="PageDown"||n.key==="Home"){const o=a.getBoundingClientRect().top;for(const p of b)if(p.getBoundingClientRect().top>=o){p.focus();break}}else{const o=a.getBoundingClientRect().bottom;for(const p of[...b].reverse())if(p.getBoundingClientRect().bottom<=o){p.focus();break}}}return{onListScroll:r,onListKeydown:h}}const el=U({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:De,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:Be},itemColor:String,...qe({itemChildren:!1})},"Select"),ll=U({...el(),...Fe(ge({modelValue:null,role:"button"}),["validationValue","dirty","appendInnerIcon"]),..._e({transition:{component:Ae}})},"VSelect"),il=J()({name:"VSelect",props:ll(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,f){let{slots:t}=f;const{t:m}=Le(),r=H(),c=H(),h=H(),n=te(e,"menu"),a=x({get:()=>n.value,set:l=>{var u;n.value&&!l&&((u=c.value)!=null&&u.Î¨openChildren)||(n.value=l)}}),{items:b,transformIn:I,transformOut:S}=ze(e),o=te(e,"modelValue",[],l=>I(l===null?[null]:Ke(l)),l=>{const u=S(l);return e.multiple?u:u[0]??null}),p=Ue(),V=x(()=>o.value.map(l=>b.value.find(u=>{const g=ne(u.raw,e.itemValue),A=ne(l.raw,e.itemValue);return g===void 0||A===void 0?!1:e.returnObject?e.valueComparator(g,A):e.valueComparator(u.value,l.value)})||l)),B=x(()=>V.value.map(l=>l.props.value)),T=G(!1),q=x(()=>a.value?e.closeText:e.openText);let M="",E;const L=x(()=>e.hideSelected?b.value.filter(l=>!V.value.some(u=>u===l)):b.value),z=x(()=>e.hideNoData&&!b.value.length||e.readonly||(p==null?void 0:p.isReadonly.value)),F=H(),{onListScroll:d,onListKeydown:v}=Ze(F,r);function w(l){e.openOnClear&&(a.value=!0)}function D(){z.value||(a.value=!a.value)}function N(l){var s,k;if(!l.key||e.readonly||p!=null&&p.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"," "].includes(l.key)&&(a.value=!0),["Escape","Tab"].includes(l.key)&&(a.value=!1),l.key==="Home"?(s=F.value)==null||s.focus("first"):l.key==="End"&&((k=F.value)==null||k.focus("last"));const u=1e3;function g(y){const R=y.key.length===1,P=!y.ctrlKey&&!y.metaKey&&!y.altKey;return R&&P}if(e.multiple||!g(l))return;const A=performance.now();A-E>u&&(M=""),M+=l.key.toLowerCase(),E=A;const j=b.value.find(y=>y.title.toLowerCase().startsWith(M));j!==void 0&&(o.value=[j])}function _(l){if(e.multiple){const u=B.value.findIndex(g=>e.valueComparator(g,l.value));if(u===-1)o.value=[...o.value,l];else{const g=[...o.value];g.splice(u,1),o.value=g}}else o.value=[l],a.value=!1}function $(l){var u;(u=F.value)!=null&&u.$el.contains(l.relatedTarget)||(a.value=!1)}function de(){var l;T.value&&((l=r.value)==null||l.focus())}function ve(l){T.value=!0}function fe(l){if(l==null)o.value=[];else if(oe(r.value,":autofill")||oe(r.value,":-webkit-autofill")){const u=b.value.find(g=>g.title===l);u&&_(u)}else r.value&&(r.value.value="")}return Y(a,()=>{if(!e.hideSelected&&a.value&&V.value.length){const l=L.value.findIndex(u=>V.value.some(g=>u.value===g.value));Me&&window.requestAnimationFrame(()=>{var u;l>=0&&((u=h.value)==null||u.scrollToIndex(l))})}}),Q(()=>{const l=!!(e.chips||t.chip),u=!!(!e.hideNoData||L.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),g=o.value.length>0,[A]=ee.filterProps(e),j=g||!T.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return i(ee,O({ref:r},A,{modelValue:o.value.map(s=>s.props.value).join(", "),"onUpdate:modelValue":fe,focused:T.value,"onUpdate:focused":s=>T.value=s,validationValue:o.externalValue,dirty:g,class:["v-select",{"v-select--active-menu":a.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":o.value.length,"v-select--selection-slot":!!t.selection},e.class],style:e.style,inputmode:"none",placeholder:j,"onClick:clear":w,"onMousedown:control":D,onBlur:$,onKeydown:N,"aria-label":m(q.value),title:m(q.value)}),{...t,default:()=>i(K,null,[i(Ne,O({ref:c,modelValue:a.value,"onUpdate:modelValue":s=>a.value=s,activator:"parent",contentClass:"v-select__content",disabled:z.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:de},e.menuProps),{default:()=>[u&&i($e,{ref:F,selected:B.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:s=>s.preventDefault(),onKeydown:v,onFocusin:ve,onScrollPassive:d,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var s,k,y;return[(s=t["prepend-item"])==null?void 0:s.call(t),!L.value.length&&!e.hideNoData&&(((k=t["no-data"])==null?void 0:k.call(t))??i(ue,{title:m(e.noDataText)},null)),i(Xe,{ref:h,renderless:!0,items:L.value},{default:R=>{var Z;let{item:P,index:C,itemRef:me}=R;const X=O(P.props,{ref:me,key:C,onClick:()=>_(P)});return((Z=t.item)==null?void 0:Z.call(t,{item:P,index:C,props:X}))??i(ue,X,{prepend:pe=>{let{isSelected:he}=pe;return i(K,null,[e.multiple&&!e.hideSelected?i(ye,{key:P.value,modelValue:he,ripple:!1,tabindex:"-1"},null):void 0,P.props.prependIcon&&i(ae,{icon:P.props.prependIcon},null)])}})}}),(y=t["append-item"])==null?void 0:y.call(t)]}})]}),V.value.map((s,k)=>{var P;function y(C){C.stopPropagation(),C.preventDefault(),_(s)}const R={"onClick:close":y,onMousedown(C){C.preventDefault(),C.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return i("div",{key:s.value,class:"v-select__selection"},[l?t.chip?i(Ee,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:s.title}}},{default:()=>{var C;return[(C=t.chip)==null?void 0:C.call(t,{item:s,index:k,props:R})]}}):i(je,O({key:"chip",closable:e.closableChips,size:"small",text:s.title},R),null):((P=t.selection)==null?void 0:P.call(t,{item:s,index:k}))??i("span",{class:"v-select__selection-text"},[s.title,e.multiple&&k<V.value.length-1&&i("span",{class:"v-select__selection-comma"},[Oe(",")])])])})]),"append-inner":function(){var R;for(var s=arguments.length,k=new Array(s),y=0;y<s;y++)k[y]=arguments[y];return i(K,null,[(R=t["append-inner"])==null?void 0:R.call(t,...k),e.menuIcon?i(ae,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),He({isFocused:T,menu:a,select:_},r)}});export{il as V};
