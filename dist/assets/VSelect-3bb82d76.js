import{n as ge,j as ee,l as ye}from"./VTextField-ffd46df8.js";import{D as U,ae as re,G as Q,ar as ce,d as Y,K as Z,a as i,F as K,q as O,ap as G,m as x,b as H,aY as Ve,ao as we,as as Se,aZ as le,aB as be,a_ as ke,aG as xe,at as Pe,a$ as Ie,e as Ce,b0 as Te,b1 as Re,aw as W,Q as De,b2 as Be,P as _e,b3 as Fe,b4 as Ae,H as Le,I as te,b5 as ne,b6 as Me,i as ae,b7 as Ee,j as Oe,M as He,E as Ke,b8 as oe}from"./index-18f30046.js";import{u as Ue}from"./form-65142a50.js";import{m as $e,u as qe,V as ze,b as Ne,c as ue}from"./PanelControl-936f1e93.js";import{V as je}from"./VChip-c85d63b7.js";const We=U({renderless:Boolean,...re()},"VVirtualScrollItem"),Ge=Q()({name:"VVirtualScrollItem",inheritAttrs:!1,props:We(),emits:{"update:height":e=>!0},setup(e,f){let{attrs:t,emit:m,slots:r}=f;const{resizeRef:c,contentRect:h}=ce(void 0,"border");Y(()=>{var n;return(n=h.value)==null?void 0:n.height},n=>{n!=null&&m("update:height",n)}),Z(()=>{var n,a;return e.renderless?i(K,null,[(n=r.default)==null?void 0:n.call(r,{itemRef:c})]):i("div",O({ref:c,class:["v-virtual-scroll__item",e.class],style:e.style},t),[(a=r.default)==null?void 0:a.call(r)])})}}),ie=-1,se=1,Ye=U({itemHeight:{type:[Number,String],default:48}},"virtual");function Qe(e,f,t){const m=G(0),r=G(e.itemHeight),c=x({get:()=>parseInt(r.value??0,10),set(d){r.value=d}}),h=H(),{resizeRef:n,contentRect:a}=ce();Ve(()=>{n.value=h.value});const w=we(),P=new Map;let b=Array.from({length:f.value.length});const o=x(()=>{const d=(!a.value||h.value===document.documentElement?w.height.value:a.value.height)-((t==null?void 0:t.value)??0);return Math.ceil(d/c.value*1.7+1)});function p(d,v){c.value=Math.max(c.value,v),b[d]=v,P.set(f.value[d],v)}function V(d){return b.slice(0,d).reduce((v,S)=>v+(S||c.value),0)}function B(d){const v=f.value.length;let S=0,D=0;for(;D<d&&S<v;)D+=b[S++]||c.value;return S-1}let T=0;function $(){if(!h.value||!a.value)return;const d=a.value.height-56,v=h.value.scrollTop,S=v<T?ie:se,D=B(v+d/2),z=Math.round(o.value/3),F=D-z,N=m.value+z*2-1;S===ie&&D<=N?m.value=le(F,0,f.value.length):S===se&&D>=N&&(m.value=le(F,0,f.value.length-o.value)),T=v}function M(d){if(!h.value)return;const v=V(d);h.value.scrollTop=v}const E=x(()=>Math.min(f.value.length,m.value+o.value)),L=x(()=>f.value.slice(m.value,E.value).map((d,v)=>({raw:d,index:v+m.value}))),q=x(()=>V(m.value)),_=x(()=>V(f.value.length)-V(E.value));return Y(()=>f.value.length,()=>{b=Se(f.value.length).map(()=>c.value),P.forEach((d,v)=>{const S=f.value.indexOf(v);S===-1?P.delete(v):b[S]=d})}),{containerRef:h,computedItems:L,itemHeight:c,paddingTop:q,paddingBottom:_,scrollToIndex:M,handleScroll:$,handleItemResize:p}}const Ze=U({items:{type:Array,default:()=>[]},renderless:Boolean,...Ye(),...re(),...be()},"VVirtualScroll"),Je=Q()({name:"VVirtualScroll",props:Ze(),setup(e,f){let{slots:t}=f;const m=ke("VVirtualScroll"),{dimensionStyles:r}=xe(e),{containerRef:c,handleScroll:h,handleItemResize:n,scrollToIndex:a,paddingTop:w,paddingBottom:P,computedItems:b}=Qe(e,Pe(e,"items"));return Ie(()=>e.renderless,()=>{Ce(()=>{var o;c.value=Te(m.vnode.el,!0),(o=c.value)==null||o.addEventListener("scroll",h)}),Re(()=>{var o;(o=c.value)==null||o.removeEventListener("scroll",h)})}),Z(()=>{const o=b.value.map(p=>i(Ge,{key:p.index,renderless:e.renderless,"onUpdate:height":V=>n(p.index,V)},{default:V=>{var B;return(B=t.default)==null?void 0:B.call(t,{item:p.raw,index:p.index,...V})}}));return e.renderless?i(K,null,[i("div",{class:"v-virtual-scroll__spacer",style:{paddingTop:W(w.value)}},null),o,i("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:W(P.value)}},null)]):i("div",{ref:c,class:["v-virtual-scroll",e.class],onScroll:h,style:[r.value,e.style]},[i("div",{class:"v-virtual-scroll__container",style:{paddingTop:W(w.value),paddingBottom:W(P.value)}},[o])])}),{scrollToIndex:a}}});function Xe(e,f){const t=G(!1);let m;function r(n){cancelAnimationFrame(m),t.value=!0,m=requestAnimationFrame(()=>{m=requestAnimationFrame(()=>{t.value=!1})})}async function c(){await new Promise(n=>requestAnimationFrame(n)),await new Promise(n=>requestAnimationFrame(n)),await new Promise(n=>requestAnimationFrame(n)),await new Promise(n=>{if(t.value){const a=Y(t,()=>{a(),n()})}else n()})}async function h(n){var P,b;if(n.key==="Tab"&&((P=f.value)==null||P.focus()),!["PageDown","PageUp","Home","End"].includes(n.key))return;const a=(b=e.value)==null?void 0:b.$el;if(!a)return;(n.key==="Home"||n.key==="End")&&a.scrollTo({top:n.key==="Home"?0:a.scrollHeight,behavior:"smooth"}),await c();const w=a.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(n.key==="PageDown"||n.key==="Home"){const o=a.getBoundingClientRect().top;for(const p of w)if(p.getBoundingClientRect().top>=o){p.focus();break}}else{const o=a.getBoundingClientRect().bottom;for(const p of[...w].reverse())if(p.getBoundingClientRect().bottom<=o){p.focus();break}}}return{onListScroll:r,onListKeydown:h}}const el=U({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:De,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:Be},itemColor:String,...$e({itemChildren:!1})},"Select"),ll=U({...el(),..._e(ge({modelValue:null,role:"button"}),["validationValue","dirty","appendInnerIcon"]),...Fe({transition:{component:Ae}})},"VSelect"),il=Q()({name:"VSelect",props:ll(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,f){let{slots:t}=f;const{t:m}=Le(),r=H(),c=H(),h=H(),n=te(e,"menu"),a=x({get:()=>n.value,set:l=>{var u;n.value&&!l&&((u=c.value)!=null&&u.Î¨openChildren)||(n.value=l)}}),{items:w,transformIn:P,transformOut:b}=qe(e),o=te(e,"modelValue",[],l=>P(l===null?[null]:Ke(l)),l=>{const u=b(l);return e.multiple?u:u[0]??null}),p=Ue(),V=x(()=>o.value.map(l=>w.value.find(u=>{const g=ne(u.raw,e.itemValue),A=ne(l.raw,e.itemValue);return g===void 0||A===void 0?!1:e.returnObject?e.valueComparator(g,A):e.valueComparator(u.value,l.value)})||l)),B=x(()=>V.value.map(l=>l.props.value)),T=G(!1),$=x(()=>a.value?e.closeText:e.openText);let M="",E;const L=x(()=>e.hideSelected?w.value.filter(l=>!V.value.some(u=>u===l)):w.value),q=x(()=>e.hideNoData&&!w.value.length||e.readonly||(p==null?void 0:p.isReadonly.value)),_=H(),{onListScroll:d,onListKeydown:v}=Xe(_,r);function S(l){e.openOnClear&&(a.value=!0)}function D(){q.value||(a.value=!a.value)}function z(l){var s,k;if(!l.key||e.readonly||p!=null&&p.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"," "].includes(l.key)&&(a.value=!0),["Escape","Tab"].includes(l.key)&&(a.value=!1),l.key==="Home"?(s=_.value)==null||s.focus("first"):l.key==="End"&&((k=_.value)==null||k.focus("last"));const u=1e3;function g(y){const R=y.key.length===1,I=!y.ctrlKey&&!y.metaKey&&!y.altKey;return R&&I}if(e.multiple||!g(l))return;const A=performance.now();A-E>u&&(M=""),M+=l.key.toLowerCase(),E=A;const j=w.value.find(y=>y.title.toLowerCase().startsWith(M));j!==void 0&&(o.value=[j])}function F(l){if(e.multiple){const u=B.value.findIndex(g=>e.valueComparator(g,l.value));if(u===-1)o.value=[...o.value,l];else{const g=[...o.value];g.splice(u,1),o.value=g}}else o.value=[l],a.value=!1}function N(l){var u;(u=_.value)!=null&&u.$el.contains(l.relatedTarget)||(a.value=!1)}function de(){var l;T.value&&((l=r.value)==null||l.focus())}function ve(l){T.value=!0}function fe(l){if(l==null)o.value=[];else if(oe(r.value,":autofill")||oe(r.value,":-webkit-autofill")){const u=w.value.find(g=>g.title===l);u&&F(u)}else r.value&&(r.value.value="")}return Y(a,()=>{if(!e.hideSelected&&a.value&&V.value.length){const l=L.value.findIndex(u=>V.value.some(g=>u.value===g.value));Me&&window.requestAnimationFrame(()=>{var u;l>=0&&((u=h.value)==null||u.scrollToIndex(l))})}}),Z(()=>{const l=!!(e.chips||t.chip),u=!!(!e.hideNoData||L.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),g=o.value.length>0,[A]=ee.filterProps(e),j=g||!T.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return i(ee,O({ref:r},A,{modelValue:o.value.map(s=>s.props.value).join(", "),"onUpdate:modelValue":fe,focused:T.value,"onUpdate:focused":s=>T.value=s,validationValue:o.externalValue,dirty:g,class:["v-select",{"v-select--active-menu":a.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":o.value.length,"v-select--selection-slot":!!t.selection},e.class],style:e.style,inputmode:"none",placeholder:j,"onClick:clear":S,"onMousedown:control":D,onBlur:N,onKeydown:z,"aria-label":m($.value),title:m($.value)}),{...t,default:()=>i(K,null,[i(ze,O({ref:c,modelValue:a.value,"onUpdate:modelValue":s=>a.value=s,activator:"parent",contentClass:"v-select__content",disabled:q.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:de},e.menuProps),{default:()=>[u&&i(Ne,{ref:_,selected:B.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:s=>s.preventDefault(),onKeydown:v,onFocusin:ve,onScrollPassive:d,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var s,k,y;return[(s=t["prepend-item"])==null?void 0:s.call(t),!L.value.length&&!e.hideNoData&&(((k=t["no-data"])==null?void 0:k.call(t))??i(ue,{title:m(e.noDataText)},null)),i(Je,{ref:h,renderless:!0,items:L.value},{default:R=>{var X;let{item:I,index:C,itemRef:me}=R;const J=O(I.props,{ref:me,key:C,onClick:()=>F(I)});return((X=t.item)==null?void 0:X.call(t,{item:I,index:C,props:J}))??i(ue,J,{prepend:pe=>{let{isSelected:he}=pe;return i(K,null,[e.multiple&&!e.hideSelected?i(ye,{key:I.value,modelValue:he,ripple:!1,tabindex:"-1"},null):void 0,I.props.prependIcon&&i(ae,{icon:I.props.prependIcon},null)])}})}}),(y=t["append-item"])==null?void 0:y.call(t)]}})]}),V.value.map((s,k)=>{var I;function y(C){C.stopPropagation(),C.preventDefault(),F(s)}const R={"onClick:close":y,onMousedown(C){C.preventDefault(),C.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return i("div",{key:s.value,class:"v-select__selection"},[l?t.chip?i(Ee,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:s.title}}},{default:()=>{var C;return[(C=t.chip)==null?void 0:C.call(t,{item:s,index:k,props:R})]}}):i(je,O({key:"chip",closable:e.closableChips,size:"small",text:s.title},R),null):((I=t.selection)==null?void 0:I.call(t,{item:s,index:k}))??i("span",{class:"v-select__selection-text"},[s.title,e.multiple&&k<V.value.length-1&&i("span",{class:"v-select__selection-comma"},[Oe(",")])])])})]),"append-inner":function(){var R;for(var s=arguments.length,k=new Array(s),y=0;y<s;y++)k[y]=arguments[y];return i(K,null,[(R=t["append-inner"])==null?void 0:R.call(t,...k),e.menuIcon?i(ae,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),He({isFocused:T,menu:a,select:F},r)}});export{il as V};
